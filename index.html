<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Working Effectively with Unit Tests</title>
<link href="stylesheet.css" type="text/css" rel="stylesheet" />
</head>
<body>
<div id="leanpub-toc">
<h2>Table of Contents</h2>
<ol class="toc">
<ul class='toc no-parts'>
  <li>
    <a href='#leanpub-auto-foreword'>Foreword</a>
  </li>
  <li>
    <a href='#leanpub-auto-preface'>Preface</a>
  </li>
  <li>
    <a href='#leanpub-auto-acknowledgments'>Acknowledgments</a>
  </li>
  <li>
    <a href='#chapter1'>Unit Testing, a First Example</a>
    <ul>
      <li>
        <a href='#leanpub-auto-thoughts-on-our-tests'>Thoughts on our Tests</a>
      </li>
      <li>
        <a href='#leanpub-auto-the-domain-code'>The Domain Code</a>
      </li>
      <li>
        <a href='#leanpub-auto-moving-towards-readability'>Moving Towards Readability</a>
      </li>
      <li>
        <a href='#leanpub-auto-replace-loop-with-individual-tests'>Replace Loop with Individual Tests</a>
      </li>
      <li>
        <a href='#leanpub-auto-expect-literals'>Expect Literals</a>
      </li>
      <li>
        <a href='#leanpub-auto-inline-setup'>Inline Setup</a>
      </li>
      <li>
        <a href='#leanpub-auto-replace-objectmother-with-databuilder'>Replace ObjectMother with DataBuilder</a>
      </li>
      <li>
        <a href='#leanpub-auto-comparing-the-results'>Comparing the Results</a>
      </li>
      <li>
        <a href='#leanpub-auto-final-thoughts-on-our-tests'>Final Thoughts on our Tests</a>
      </li>
    </ul>
  </li>
  <li>
    <a href='#leanpub-auto-motivators'>Motivators</a>
  </li>
  <li>
    <a href='#typesoftests'>Types of Tests</a>
    <ul>
      <li>
        <a href='#typesoftests-stateverification'>State Verification</a>
      </li>
      <li>
        <a href='#typesoftests-behaviorverification'>Behavior Verification</a>
      </li>
      <li>
        <a href='#leanpub-auto-unit-test'>Unit Test</a>
      </li>
      <li>
        <a href='#typesoftests-solitaryunittest'>Solitary Unit Test</a>
      </li>
      <li>
        <a href='#typesoftests-sociableunittest'>Sociable Unit Test</a>
      </li>
      <li>
        <a href='#leanpub-auto-continuing-with-examples-from-chapter-1'>Continuing with Examples From Chapter 1</a>
      </li>
      <li>
        <a href='#leanpub-auto-final-thoughts-again'>Final Thoughts, Again</a>
      </li>
    </ul>
  </li>
  <li>
    <a href='#improvingassertions'>Improving Assertions</a>
    <ul>
      <li>
        <a href='#improvingassertions-oneassertionpertest'>One Assertion Per Test</a>
      </li>
      <li>
        <a href='#improvingassertions-implementationoverspecification'>Implementation Overspecification</a>
      </li>
      <li>
        <a href='#improvingassertions-assertlast'>Assert Last</a>
      </li>
      <li>
        <a href='#improvingassertions-expectliterals'>Expect Literals</a>
      </li>
      <li>
        <a href='#improvingassertions-negativetesting'>Negative Testing</a>
      </li>
      <li>
        <a href='#leanpub-auto-hamcrest'>Hamcrest</a>
      </li>
    </ul>
  </li>
  <li>
    <a href='#leanpub-auto-improving-test-cases'>Improving Test Cases</a>
    <ul>
      <li>
        <a href='#leanpub-auto-too-much-magic'>Too Much Magic</a>
      </li>
      <li>
        <a href='#improvingtestcases-inlinesetup'>Inline Setup</a>
      </li>
      <li>
        <a href='#leanpub-auto-test-names'>Test Names</a>
      </li>
    </ul>
  </li>
  <li>
    <a href='#leanpub-auto-improving-test-suites'>Improving Test Suites</a>
    <ul>
      <li>
        <a href='#leanpub-auto-separating-the-solitary-from-the-sociable'>Separating The Solitary From The Sociable</a>
      </li>
      <li>
        <a href='#leanpub-auto-questionable-tests'>Questionable Tests</a>
      </li>
      <li>
        <a href='#leanpub-auto-custom-assertions'>Custom Assertions</a>
      </li>
      <li>
        <a href='#leanpub-auto-global-definition'>Global Definition</a>
      </li>
    </ul>
  </li>
  <li>
    <a href='#leanpub-auto-closing-thoughts'>Closing Thoughts</a>
    <ul>
      <li>
        <a href='#closingthoughts-broadstacktests'>Broad Stack Tests</a>
      </li>
      <li>
        <a href='#leanpub-auto-test-pyramid'>Test Pyramid</a>
      </li>
      <li>
        <a href='#leanpub-auto-final-thoughts-on-roi'>Final Thoughts On ROI</a>
      </li>
      <li>
        <a href='#leanpub-auto-more'>Moreâ€¦</a>
      </li>
    </ul>
  </li>
</ul>

</ol>
</div>

<div class="code-block">
<div class="highlight"><pre><code class="n">JUnit</code> <code class="n">version</code> <code class="mf">4.11</code>
<code class="o">.</code><code class="na">E</code><code class="o">.</code><code class="na">E</code><code class="o">..</code>
<code class="n">There</code> <code class="n">were</code> <code class="mi">2</code> <code class="nl">failures:</code>
<code class="mi">1</code><code class="o">)</code> <code class="n">statement</code><code class="o">(</code><code class="n">CustomerTest</code><code class="o">)</code>
<code class="n">org</code><code class="o">.</code><code class="na">junit</code><code class="o">.</code><code class="na">ComparisonFailure</code><code class="o">:</code> <code class="nl">expected:</code><code class="o">&lt;...</code><code class="na">or</code> <code class="n">John</code>
	<code class="n">Godfather</code> <code class="mi">4</code><code class="o">[</code>	<code class="o">]</code><code class="mf">9.0</code>
<code class="n">Amount</code> <code class="n">owed</code> <code class="n">is</code> <code class="mi">9</code><code class="o">...&gt;</code> <code class="n">but</code> <code class="nl">was:</code><code class="o">&lt;...</code><code class="na">or</code> <code class="n">John</code>
	<code class="n">Godfather</code> <code class="mi">4</code><code class="o">[</code> <code class="o">]</code><code class="mf">9.0</code>
<code class="n">Amount</code> <code class="n">owed</code> <code class="n">is</code> <code class="mi">9</code><code class="o">...&gt;</code>
<code class="mi">2</code><code class="o">)</code> <code class="n">htmlStatement</code><code class="o">(</code><code class="n">CustomerTest</code><code class="o">)</code>
<code class="n">org</code><code class="o">.</code><code class="na">junit</code><code class="o">.</code><code class="na">ComparisonFailure</code><code class="o">:</code> <code class="nl">expected:</code><code class="o">&lt;...&lt;/</code><code class="n">h1</code><code class="o">&gt;</code>
<code class="o">&lt;</code><code class="n">p</code><code class="o">&gt;</code><code class="n">Godfather</code> <code class="mi">4</code><code class="o">[</code>	<code class="o">]</code><code class="mf">9.0</code><code class="o">&lt;/</code><code class="n">p</code><code class="o">&gt;</code>
<code class="o">&lt;</code><code class="n">p</code><code class="o">&gt;</code><code class="n">Amount</code> <code class="n">ow</code><code class="o">...&gt;</code> <code class="n">but</code> <code class="nl">was:</code><code class="o">&lt;...&lt;/</code><code class="n">h1</code><code class="o">&gt;</code>
<code class="o">&lt;</code><code class="n">p</code><code class="o">&gt;</code><code class="n">Godfather</code> <code class="mi">4</code><code class="o">[</code> <code class="o">]</code><code class="mf">9.0</code><code class="o">&lt;/</code><code class="n">p</code><code class="o">&gt;</code>
<code class="o">&lt;</code><code class="n">p</code><code class="o">&gt;</code><code class="n">Amount</code> <code class="n">ow</code><code class="o">...&gt;</code>

<code class="n">FAILURES</code><code class="o">!!!</code>
<code class="n">Tests</code> <code class="nl">run:</code> <code class="mi">4</code><code class="o">,</code>  <code class="nl">Failures:</code> <code class="mi">2</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">CustomerTest</code> <code class="o">{</code>
  <code class="n">Customer</code> <code class="n">john</code><code class="o">,</code> <code class="n">steve</code><code class="o">,</code> <code class="n">pat</code><code class="o">,</code> <code class="n">david</code><code class="o">;</code>
  <code class="n">String</code> <code class="n">johnName</code> <code class="o">=</code> <code class="s">"John"</code><code class="o">,</code>
    <code class="n">steveName</code> <code class="o">=</code> <code class="s">"Steve"</code><code class="o">,</code>
    <code class="n">patName</code> <code class="o">=</code> <code class="s">"Pat"</code><code class="o">,</code>
    <code class="n">davidName</code> <code class="o">=</code> <code class="s">"David"</code><code class="o">;</code>
  <code class="n">Customer</code><code class="o">[]</code> <code class="n">customers</code><code class="o">;</code>

  <code class="nd">@Before</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">setup</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">david</code> <code class="o">=</code> <code class="n">ObjectMother</code>
      <code class="o">.</code><code class="na">customerWithNoRentals</code><code class="o">(</code>
        <code class="n">davidName</code><code class="o">);</code>
    <code class="n">john</code> <code class="o">=</code> <code class="n">ObjectMother</code>
      <code class="o">.</code><code class="na">customerWithOneNewRelease</code><code class="o">(</code>
        <code class="n">johnName</code><code class="o">);</code>
    <code class="n">pat</code> <code class="o">=</code> <code class="n">ObjectMother</code>
      <code class="o">.</code><code class="na">customerWithOneOfEachRentalType</code><code class="o">(</code>
        <code class="n">patName</code><code class="o">);</code>
    <code class="n">steve</code> <code class="o">=</code> <code class="n">ObjectMother</code>
      <code class="o">.</code><code class="na">customerWithOneNewReleaseAndOneRegular</code><code class="o">(</code>
        <code class="n">steveName</code><code class="o">);</code>
    <code class="n">customers</code> <code class="o">=</code>
      <code class="k">new</code> <code class="n">Customer</code><code class="o">[]</code>
      <code class="o">{</code> <code class="n">david</code><code class="o">,</code> <code class="n">john</code><code class="o">,</code> <code class="n">steve</code><code class="o">,</code> <code class="n">pat</code><code class="o">};</code>
  <code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre>  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">getName</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="n">davidName</code><code class="o">,</code> <code class="n">david</code><code class="o">.</code><code class="na">getName</code><code class="o">());</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="n">johnName</code><code class="o">,</code> <code class="n">john</code><code class="o">.</code><code class="na">getName</code><code class="o">());</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="n">steveName</code><code class="o">,</code> <code class="n">steve</code><code class="o">.</code><code class="na">getName</code><code class="o">());</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="n">patName</code><code class="o">,</code> <code class="n">pat</code><code class="o">.</code><code class="na">getName</code><code class="o">());</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">statement</code><code class="o">()</code> <code class="o">{</code>
    <code class="k">for</code> <code class="o">(</code><code class="kt">int</code> <code class="n">i</code><code class="o">=</code><code class="mi">0</code><code class="o">;</code> <code class="n">i</code><code class="o">&lt;</code><code class="n">customers</code><code class="o">.</code><code class="na">length</code><code class="o">;</code> <code class="n">i</code><code class="o">++)</code> <code class="o">{</code>
      <code class="n">assertEquals</code><code class="o">(</code>
        <code class="n">expStatement</code><code class="o">(</code>
          <code class="s">"Rental record for %s\n"</code> <code class="o">+</code>
          <code class="s">"%sAmount owed is %s\n"</code>  <code class="o">+</code>
          <code class="s">"You earned %s frequent "</code> <code class="o">+</code>
          <code class="s">"renter points"</code><code class="o">,</code>
          <code class="n">customers</code><code class="o">[</code><code class="n">i</code><code class="o">],</code>
          <code class="n">rentalInfo</code><code class="o">(</code>
            <code class="s">"\t"</code><code class="o">,</code> <code class="s">""</code><code class="o">,</code>
            <code class="n">customers</code><code class="o">[</code><code class="n">i</code><code class="o">].</code><code class="na">getRentals</code><code class="o">())),</code>
        <code class="n">customers</code><code class="o">[</code><code class="n">i</code><code class="o">].</code><code class="na">statement</code><code class="o">());</code>
    <code class="o">}</code>
  <code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre>  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">htmlStatement</code><code class="o">()</code> <code class="o">{</code>
    <code class="k">for</code> <code class="o">(</code><code class="kt">int</code> <code class="n">i</code><code class="o">=</code><code class="mi">0</code><code class="o">;</code> <code class="n">i</code><code class="o">&lt;</code><code class="n">customers</code><code class="o">.</code><code class="na">length</code><code class="o">;</code> <code class="n">i</code><code class="o">++)</code> <code class="o">{</code>
      <code class="n">assertEquals</code><code class="o">(</code>
        <code class="n">expStatement</code><code class="o">(</code>
          <code class="s">"&lt;h1&gt;Rental record for "</code> <code class="o">+</code>
          <code class="s">"&lt;em&gt;%s&lt;/em&gt;&lt;/h1&gt;\n%s"</code> <code class="o">+</code>
          <code class="s">"&lt;p&gt;Amount owed is &lt;em&gt;%s&lt;/em&gt;"</code> <code class="o">+</code>
          <code class="s">"&lt;/p&gt;\n&lt;p&gt;You earned &lt;em&gt;%s"</code> <code class="o">+</code>
          <code class="s">" frequent renter points&lt;/em&gt;&lt;/p&gt;"</code><code class="o">,</code>
          <code class="n">customers</code><code class="o">[</code><code class="n">i</code><code class="o">],</code>
          <code class="n">rentalInfo</code><code class="o">(</code>
            <code class="s">"&lt;p&gt;"</code><code class="o">,</code> <code class="s">"&lt;/p&gt;"</code><code class="o">,</code>
            <code class="n">customers</code><code class="o">[</code><code class="n">i</code><code class="o">].</code><code class="na">getRentals</code><code class="o">())),</code>
        <code class="n">customers</code><code class="o">[</code><code class="n">i</code><code class="o">].</code><code class="na">htmlStatement</code><code class="o">());</code>
    <code class="o">}</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="o">(</code><code class="n">expected</code><code class="o">=</code><code class="n">IllegalArgumentException</code><code class="o">.</code><code class="na">class</code><code class="o">)</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">invalidTitle</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">ObjectMother</code>
      <code class="o">.</code><code class="na">customerWithNoRentals</code><code class="o">(</code><code class="s">"Bob"</code><code class="o">)</code>
      <code class="o">.</code><code class="na">addRental</code><code class="o">(</code>
        <code class="k">new</code> <code class="nf">Rental</code><code class="o">(</code>
          <code class="k">new</code> <code class="nf">Movie</code><code class="o">(</code><code class="s">"Crazy, Stupid, Love."</code><code class="o">,</code>
                    <code class="n">Movie</code><code class="o">.</code><code class="na">Type</code><code class="o">.</code><code class="na">UNKNOWN</code><code class="o">),</code>
          <code class="mi">4</code><code class="o">));</code>
  <code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre>  <code class="kd">public</code> <code class="kd">static</code> <code class="n">String</code> <code class="nf">rentalInfo</code><code class="o">(</code>
    <code class="n">String</code> <code class="n">startsWith</code><code class="o">,</code>
    <code class="n">String</code> <code class="n">endsWith</code><code class="o">,</code>
    <code class="n">List</code><code class="o">&lt;</code><code class="n">Rental</code><code class="o">&gt;</code> <code class="n">rentals</code><code class="o">)</code> <code class="o">{</code>
    <code class="n">String</code> <code class="n">result</code> <code class="o">=</code> <code class="s">""</code><code class="o">;</code>
    <code class="k">for</code> <code class="o">(</code><code class="n">Rental</code> <code class="n">rental</code> <code class="o">:</code> <code class="n">rentals</code><code class="o">)</code>
      <code class="n">result</code> <code class="o">+=</code> <code class="n">String</code><code class="o">.</code><code class="na">format</code><code class="o">(</code>
        <code class="s">"%s%s\t%s%s\n"</code><code class="o">,</code>
        <code class="n">startsWith</code><code class="o">,</code>
        <code class="n">rental</code><code class="o">.</code><code class="na">getMovie</code><code class="o">().</code><code class="na">getTitle</code><code class="o">(),</code>
        <code class="n">rental</code><code class="o">.</code><code class="na">getCharge</code><code class="o">(),</code>
        <code class="n">endsWith</code><code class="o">);</code>
    <code class="k">return</code> <code class="n">result</code><code class="o">;</code>
  <code class="o">}</code>

  <code class="kd">public</code> <code class="kd">static</code> <code class="n">String</code> <code class="nf">expStatement</code><code class="o">(</code>
    <code class="n">String</code> <code class="n">formatStr</code><code class="o">,</code>
    <code class="n">Customer</code> <code class="n">customer</code><code class="o">,</code>
    <code class="n">String</code> <code class="n">rentalInfo</code><code class="o">)</code> <code class="o">{</code>
    <code class="k">return</code> <code class="n">String</code><code class="o">.</code><code class="na">format</code><code class="o">(</code>
      <code class="n">formatStr</code><code class="o">,</code>
      <code class="n">customer</code><code class="o">.</code><code class="na">getName</code><code class="o">(),</code>
      <code class="n">rentalInfo</code><code class="o">,</code>
      <code class="n">customer</code><code class="o">.</code><code class="na">getTotalCharge</code><code class="o">(),</code>
      <code class="n">customer</code><code class="o">.</code><code class="na">getTotalPoints</code><code class="o">());</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">ObjectMother</code> <code class="o">{</code>
  <code class="kd">public</code> <code class="kd">static</code> <code class="n">Customer</code>
  <code class="nf">customerWithOneOfEachRentalType</code><code class="o">(</code>
    <code class="n">String</code> <code class="n">name</code><code class="o">)</code> <code class="o">{</code>
    <code class="n">Customer</code> <code class="n">result</code> <code class="o">=</code>
      <code class="n">customerWithOneNewReleaseAndOneRegular</code><code class="o">(</code>
        <code class="n">name</code><code class="o">);</code>
    <code class="n">result</code><code class="o">.</code><code class="na">addRental</code><code class="o">(</code>
      <code class="k">new</code> <code class="nf">Rental</code><code class="o">(</code>
        <code class="k">new</code> <code class="nf">Movie</code><code class="o">(</code><code class="s">"Lion King"</code><code class="o">,</code> <code class="n">CHILDREN</code><code class="o">),</code> <code class="mi">3</code><code class="o">));</code>
    <code class="k">return</code> <code class="n">result</code><code class="o">;</code>
  <code class="o">}</code>

  <code class="kd">public</code> <code class="kd">static</code> <code class="n">Customer</code>
  <code class="nf">customerWithOneNewReleaseAndOneRegular</code><code class="o">(</code>
    <code class="n">String</code> <code class="n">n</code><code class="o">)</code> <code class="o">{</code>
    <code class="n">Customer</code> <code class="n">result</code> <code class="o">=</code>
      <code class="n">customerWithOneNewRelease</code><code class="o">(</code><code class="n">n</code><code class="o">);</code>
    <code class="n">result</code><code class="o">.</code><code class="na">addRental</code><code class="o">(</code>
      <code class="k">new</code> <code class="nf">Rental</code><code class="o">(</code>
        <code class="k">new</code> <code class="nf">Movie</code><code class="o">(</code><code class="s">"Scarface"</code><code class="o">,</code> <code class="n">REGULAR</code><code class="o">),</code> <code class="mi">3</code><code class="o">));</code>
    <code class="k">return</code> <code class="n">result</code><code class="o">;</code>
  <code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre>  <code class="kd">public</code> <code class="kd">static</code> <code class="n">Customer</code>
  <code class="nf">customerWithOneNewRelease</code><code class="o">(</code>
    <code class="n">String</code> <code class="n">name</code><code class="o">)</code> <code class="o">{</code>
    <code class="n">Customer</code> <code class="n">result</code> <code class="o">=</code>
      <code class="n">customerWithNoRentals</code><code class="o">(</code><code class="n">name</code><code class="o">);</code>
    <code class="n">result</code><code class="o">.</code><code class="na">addRental</code><code class="o">(</code>
      <code class="k">new</code> <code class="nf">Rental</code><code class="o">(</code>
        <code class="k">new</code> <code class="nf">Movie</code><code class="o">(</code>
          <code class="s">"Godfather 4"</code><code class="o">,</code> <code class="n">NEW_RELEASE</code><code class="o">),</code> <code class="mi">3</code><code class="o">));</code>
    <code class="k">return</code> <code class="n">result</code><code class="o">;</code>
  <code class="o">}</code>

  <code class="kd">public</code> <code class="kd">static</code> <code class="n">Customer</code>
  <code class="nf">customerWithNoRentals</code><code class="o">(</code><code class="n">String</code> <code class="n">name</code><code class="o">)</code> <code class="o">{</code>
    <code class="k">return</code> <code class="k">new</code> <code class="nf">Customer</code><code class="o">(</code><code class="n">name</code><code class="o">);</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">Customer</code> <code class="o">{</code>

  <code class="kd">private</code> <code class="n">String</code> <code class="n">name</code><code class="o">;</code>
  <code class="kd">private</code> <code class="n">List</code><code class="o">&lt;</code><code class="n">Rental</code><code class="o">&gt;</code> <code class="n">rentals</code> <code class="o">=</code>
    <code class="k">new</code> <code class="n">ArrayList</code><code class="o">&lt;</code><code class="n">Rental</code><code class="o">&gt;();</code>

  <code class="kd">public</code> <code class="nf">Customer</code><code class="o">(</code><code class="n">String</code> <code class="n">name</code><code class="o">)</code> <code class="o">{</code>
    <code class="k">this</code><code class="o">.</code><code class="na">name</code> <code class="o">=</code> <code class="n">name</code><code class="o">;</code>
  <code class="o">}</code>

  <code class="kd">public</code> <code class="n">String</code> <code class="nf">getName</code><code class="o">()</code> <code class="o">{</code>
    <code class="k">return</code> <code class="n">name</code><code class="o">;</code>
  <code class="o">}</code>

  <code class="kd">public</code> <code class="n">List</code><code class="o">&lt;</code><code class="n">Rental</code><code class="o">&gt;</code> <code class="nf">getRentals</code><code class="o">()</code> <code class="o">{</code>
    <code class="k">return</code> <code class="n">rentals</code><code class="o">;</code>
  <code class="o">}</code>

  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">addRental</code><code class="o">(</code><code class="n">Rental</code> <code class="n">rental</code><code class="o">)</code> <code class="o">{</code>
    <code class="n">rentals</code><code class="o">.</code><code class="na">add</code><code class="o">(</code><code class="n">rental</code><code class="o">);</code>
  <code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre>  <code class="kd">public</code> <code class="n">String</code> <code class="nf">statement</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">String</code> <code class="n">result</code> <code class="o">=</code>
      <code class="s">"Rental record for "</code> <code class="o">+</code> <code class="n">getName</code><code class="o">()</code> <code class="o">+</code> <code class="s">"\n"</code><code class="o">;</code>
    <code class="k">for</code> <code class="o">(</code><code class="n">Rental</code> <code class="n">rental</code> <code class="o">:</code> <code class="n">rentals</code><code class="o">)</code>
      <code class="n">result</code> <code class="o">+=</code>
        <code class="s">"\t"</code> <code class="o">+</code> <code class="n">rental</code><code class="o">.</code><code class="na">getLineItem</code><code class="o">()</code> <code class="o">+</code> <code class="s">"\n"</code><code class="o">;</code>
    <code class="n">result</code> <code class="o">+=</code>
      <code class="s">"Amount owed is "</code> <code class="o">+</code> <code class="n">getTotalCharge</code><code class="o">()</code> <code class="o">+</code>
      <code class="s">"\n"</code> <code class="o">+</code> <code class="s">"You earned "</code> <code class="o">+</code>
      <code class="n">getTotalPoints</code><code class="o">()</code> <code class="o">+</code>
      <code class="s">" frequent renter points"</code><code class="o">;</code>
    <code class="k">return</code> <code class="n">result</code><code class="o">;</code>
  <code class="o">}</code>

  <code class="kd">public</code> <code class="n">String</code> <code class="nf">htmlStatement</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">String</code> <code class="n">result</code> <code class="o">=</code>
      <code class="s">"&lt;h1&gt;Rental record for &lt;em&gt;"</code> <code class="o">+</code>
      <code class="n">getName</code><code class="o">()</code> <code class="o">+</code> <code class="s">"&lt;/em&gt;&lt;/h1&gt;\n"</code><code class="o">;</code>
    <code class="k">for</code> <code class="o">(</code><code class="n">Rental</code> <code class="n">rental</code> <code class="o">:</code> <code class="n">rentals</code><code class="o">)</code>
      <code class="n">result</code> <code class="o">+=</code> <code class="s">"&lt;p&gt;"</code> <code class="o">+</code> <code class="n">rental</code><code class="o">.</code><code class="na">getLineItem</code><code class="o">()</code> <code class="o">+</code>
        <code class="s">"&lt;/p&gt;\n"</code><code class="o">;</code>
    <code class="n">result</code> <code class="o">+=</code>
      <code class="s">"&lt;p&gt;Amount owed is &lt;em&gt;"</code> <code class="o">+</code>
      <code class="n">getTotalCharge</code><code class="o">()</code> <code class="o">+</code> <code class="s">"&lt;/em&gt;&lt;/p&gt;\n"</code> <code class="o">+</code>
      <code class="s">"&lt;p&gt;You earned &lt;em&gt;"</code> <code class="o">+</code>
      <code class="n">getTotalPoints</code><code class="o">()</code> <code class="o">+</code>
      <code class="s">" frequent renter points&lt;/em&gt;&lt;/p&gt;"</code><code class="o">;</code>
    <code class="k">return</code> <code class="n">result</code><code class="o">;</code>

  <code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre>  <code class="kd">public</code> <code class="kt">double</code> <code class="nf">getTotalCharge</code><code class="o">()</code> <code class="o">{</code>
    <code class="kt">double</code> <code class="n">total</code> <code class="o">=</code> <code class="mi">0</code><code class="o">;</code>
    <code class="k">for</code> <code class="o">(</code><code class="n">Rental</code> <code class="n">rental</code> <code class="o">:</code> <code class="n">rentals</code><code class="o">)</code>
      <code class="n">total</code> <code class="o">+=</code> <code class="n">rental</code><code class="o">.</code><code class="na">getCharge</code><code class="o">();</code>
    <code class="k">return</code> <code class="n">total</code><code class="o">;</code>
  <code class="o">}</code>

  <code class="kd">public</code> <code class="kt">int</code> <code class="nf">getTotalPoints</code><code class="o">()</code> <code class="o">{</code>
    <code class="kt">int</code> <code class="n">total</code> <code class="o">=</code> <code class="mi">0</code><code class="o">;</code>
    <code class="k">for</code> <code class="o">(</code><code class="n">Rental</code> <code class="n">rental</code> <code class="o">:</code> <code class="n">rentals</code><code class="o">)</code>
      <code class="n">total</code> <code class="o">+=</code> <code class="n">rental</code><code class="o">.</code><code class="na">getPoints</code><code class="o">();</code>
    <code class="k">return</code> <code class="n">total</code><code class="o">;</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">Rental</code> <code class="o">{</code>

  <code class="n">Movie</code> <code class="n">movie</code><code class="o">;</code>
  <code class="kd">private</code> <code class="kt">int</code> <code class="n">daysRented</code><code class="o">;</code>

  <code class="kd">public</code> <code class="nf">Rental</code><code class="o">(</code><code class="n">Movie</code> <code class="n">movie</code><code class="o">,</code> <code class="kt">int</code> <code class="n">daysRented</code><code class="o">)</code> <code class="o">{</code>
    <code class="k">this</code><code class="o">.</code><code class="na">movie</code> <code class="o">=</code> <code class="n">movie</code><code class="o">;</code>
    <code class="k">this</code><code class="o">.</code><code class="na">daysRented</code> <code class="o">=</code> <code class="n">daysRented</code><code class="o">;</code>
  <code class="o">}</code>

  <code class="kd">public</code> <code class="n">Movie</code> <code class="nf">getMovie</code><code class="o">()</code> <code class="o">{</code>
    <code class="k">return</code> <code class="n">movie</code><code class="o">;</code>
  <code class="o">}</code>

  <code class="kd">public</code> <code class="kt">int</code> <code class="nf">getDaysRented</code><code class="o">()</code> <code class="o">{</code>
    <code class="k">return</code> <code class="n">daysRented</code><code class="o">;</code>
  <code class="o">}</code>

  <code class="kd">public</code> <code class="kt">double</code> <code class="nf">getCharge</code><code class="o">()</code> <code class="o">{</code>
    <code class="k">return</code> <code class="n">movie</code><code class="o">.</code><code class="na">getCharge</code><code class="o">(</code><code class="n">daysRented</code><code class="o">);</code>
  <code class="o">}</code>

  <code class="kd">public</code> <code class="kt">int</code> <code class="nf">getPoints</code><code class="o">()</code> <code class="o">{</code>
    <code class="k">return</code> <code class="n">movie</code><code class="o">.</code><code class="na">getPoints</code><code class="o">(</code><code class="n">daysRented</code><code class="o">);</code>
  <code class="o">}</code>

  <code class="kd">public</code> <code class="n">String</code> <code class="nf">getLineItem</code><code class="o">()</code> <code class="o">{</code>
    <code class="k">return</code>
      <code class="n">movie</code><code class="o">.</code><code class="na">getTitle</code><code class="o">()</code> <code class="o">+</code> <code class="s">" "</code> <code class="o">+</code> <code class="n">getCharge</code><code class="o">();</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">Movie</code> <code class="o">{</code>

  <code class="kd">public</code> <code class="kd">enum</code> <code class="n">Type</code> <code class="o">{</code>
    <code class="n">REGULAR</code><code class="o">,</code> <code class="n">NEW_RELEASE</code><code class="o">,</code> <code class="n">CHILDREN</code><code class="o">,</code> <code class="n">UNKNOWN</code><code class="o">;</code>
  <code class="o">}</code>

  <code class="kd">private</code> <code class="n">String</code> <code class="n">title</code><code class="o">;</code>
  <code class="n">Price</code> <code class="n">price</code><code class="o">;</code>

  <code class="kd">public</code> <code class="nf">Movie</code><code class="o">(</code>
    <code class="n">String</code> <code class="n">title</code><code class="o">,</code> <code class="n">Movie</code><code class="o">.</code><code class="na">Type</code> <code class="n">priceCode</code><code class="o">)</code> <code class="o">{</code>
    <code class="k">this</code><code class="o">.</code><code class="na">title</code> <code class="o">=</code> <code class="n">title</code><code class="o">;</code>
    <code class="n">setPriceCode</code><code class="o">(</code><code class="n">priceCode</code><code class="o">);</code>
  <code class="o">}</code>

  <code class="kd">public</code> <code class="n">String</code> <code class="nf">getTitle</code><code class="o">()</code> <code class="o">{</code>
    <code class="k">return</code> <code class="n">title</code><code class="o">;</code>
  <code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre>  <code class="kd">private</code> <code class="kt">void</code> <code class="nf">setPriceCode</code><code class="o">(</code>
    <code class="n">Movie</code><code class="o">.</code><code class="na">Type</code> <code class="n">priceCode</code><code class="o">)</code> <code class="o">{</code>
    <code class="k">switch</code> <code class="o">(</code><code class="n">priceCode</code><code class="o">)</code> <code class="o">{</code>
    <code class="k">case</code> <code class="nl">CHILDREN:</code>
      <code class="n">price</code> <code class="o">=</code> <code class="k">new</code> <code class="n">ChildrensPrice</code><code class="o">();</code>
      <code class="k">break</code><code class="o">;</code>
    <code class="k">case</code> <code class="nl">NEW_RELEASE:</code>
      <code class="n">price</code> <code class="o">=</code> <code class="k">new</code> <code class="n">NewReleasePrice</code><code class="o">();</code>
      <code class="k">break</code><code class="o">;</code>
    <code class="k">case</code> <code class="nl">REGULAR:</code>
      <code class="n">price</code> <code class="o">=</code> <code class="k">new</code> <code class="n">RegularPrice</code><code class="o">();</code>
      <code class="k">break</code><code class="o">;</code>
    <code class="k">default</code><code class="o">:</code>
      <code class="k">throw</code> <code class="k">new</code> <code class="nf">IllegalArgumentException</code><code class="o">(</code>
        <code class="s">"invalid price code"</code><code class="o">);</code>
    <code class="o">}</code>
  <code class="o">}</code>

  <code class="kd">public</code> <code class="kt">double</code> <code class="nf">getCharge</code><code class="o">(</code><code class="kt">int</code> <code class="n">daysRented</code><code class="o">)</code> <code class="o">{</code>
    <code class="k">return</code> <code class="n">price</code><code class="o">.</code><code class="na">getCharge</code><code class="o">(</code><code class="n">daysRented</code><code class="o">);</code>
  <code class="o">}</code>

  <code class="kd">public</code> <code class="kt">int</code> <code class="nf">getPoints</code><code class="o">(</code><code class="kt">int</code> <code class="n">daysRented</code><code class="o">)</code> <code class="o">{</code>
    <code class="k">return</code> <code class="n">price</code><code class="o">.</code><code class="na">getPoints</code><code class="o">(</code><code class="n">daysRented</code><code class="o">);</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">abstract</code> <code class="kd">class</code> <code class="nc">Price</code> <code class="o">{</code>
  <code class="kd">abstract</code> <code class="kt">double</code> <code class="nf">getCharge</code><code class="o">(</code><code class="kt">int</code> <code class="n">daysRented</code><code class="o">);</code>

  <code class="kt">int</code> <code class="nf">getPoints</code><code class="o">(</code><code class="kt">int</code> <code class="n">daysRented</code><code class="o">)</code> <code class="o">{</code>
    <code class="k">return</code> <code class="mi">1</code><code class="o">;</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">ChildrensPrice</code> <code class="kd">extends</code> <code class="n">Price</code> <code class="o">{</code>
  <code class="nd">@Override</code>
  <code class="kt">double</code> <code class="nf">getCharge</code><code class="o">(</code><code class="kt">int</code> <code class="n">daysRented</code><code class="o">)</code> <code class="o">{</code>
    <code class="kt">double</code> <code class="n">amount</code> <code class="o">=</code> <code class="mf">1.5</code><code class="o">;</code>
    <code class="k">if</code> <code class="o">(</code><code class="n">daysRented</code> <code class="o">&gt;</code> <code class="mi">3</code><code class="o">)</code>
      <code class="n">amount</code> <code class="o">+=</code> <code class="o">(</code><code class="n">daysRented</code> <code class="o">-</code> <code class="mi">3</code><code class="o">)</code> <code class="o">*</code> <code class="mf">1.5</code><code class="o">;</code>
    <code class="k">return</code> <code class="n">amount</code><code class="o">;</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">RegularPrice</code> <code class="kd">extends</code> <code class="n">Price</code> <code class="o">{</code>
  <code class="nd">@Override</code>
  <code class="kd">public</code> <code class="kt">double</code> <code class="nf">getCharge</code><code class="o">(</code><code class="kt">int</code> <code class="n">daysRented</code><code class="o">)</code> <code class="o">{</code>
    <code class="kt">double</code> <code class="n">amount</code> <code class="o">=</code> <code class="mi">2</code><code class="o">;</code>
    <code class="k">if</code> <code class="o">(</code><code class="n">daysRented</code> <code class="o">&gt;</code> <code class="mi">2</code><code class="o">)</code>
      <code class="n">amount</code> <code class="o">+=</code> <code class="o">(</code><code class="n">daysRented</code> <code class="o">-</code> <code class="mi">2</code><code class="o">)</code> <code class="o">*</code> <code class="mf">1.5</code><code class="o">;</code>
    <code class="k">return</code> <code class="n">amount</code><code class="o">;</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">NewReleasePrice</code> <code class="kd">extends</code> <code class="n">Price</code> <code class="o">{</code>
  <code class="nd">@Override</code>
  <code class="kd">public</code> <code class="kt">double</code> <code class="nf">getCharge</code><code class="o">(</code><code class="kt">int</code> <code class="n">daysRented</code><code class="o">)</code> <code class="o">{</code>
    <code class="k">return</code> <code class="n">daysRented</code> <code class="o">*</code> <code class="mi">3</code><code class="o">;</code>
  <code class="o">}</code>

  <code class="nd">@Override</code>
  <code class="kt">int</code> <code class="nf">getPoints</code><code class="o">(</code><code class="kt">int</code> <code class="n">daysRented</code><code class="o">)</code> <code class="o">{</code>
    <code class="k">if</code> <code class="o">(</code><code class="n">daysRented</code> <code class="o">&gt;</code> <code class="mi">1</code><code class="o">)</code>
      <code class="k">return</code> <code class="mi">2</code><code class="o">;</code>
    <code class="k">return</code> <code class="mi">1</code><code class="o">;</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">CustomerTest</code> <code class="o">{</code>
  <code class="n">Customer</code> <code class="n">john</code><code class="o">,</code> <code class="n">steve</code><code class="o">,</code> <code class="n">pat</code><code class="o">,</code> <code class="n">david</code><code class="o">;</code>
  <code class="n">String</code> <code class="n">johnName</code> <code class="o">=</code> <code class="s">"John"</code><code class="o">,</code>
    <code class="n">steveName</code> <code class="o">=</code> <code class="s">"Steve"</code><code class="o">,</code>
    <code class="n">patName</code> <code class="o">=</code> <code class="s">"Pat"</code><code class="o">,</code>
    <code class="n">davidName</code> <code class="o">=</code> <code class="s">"David"</code><code class="o">;</code>
  <code class="n">Customer</code><code class="o">[]</code> <code class="n">customers</code><code class="o">;</code>

  <code class="nd">@Before</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">setup</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">david</code> <code class="o">=</code> <code class="n">ObjectMother</code>
      <code class="o">.</code><code class="na">customerWithNoRentals</code><code class="o">(</code><code class="n">davidName</code><code class="o">);</code>
    <code class="n">john</code> <code class="o">=</code> <code class="n">ObjectMother</code>
      <code class="o">.</code><code class="na">customerWithOneNewRelease</code><code class="o">(</code><code class="n">johnName</code><code class="o">);</code>
    <code class="n">pat</code> <code class="o">=</code> <code class="n">ObjectMother</code>
      <code class="o">.</code><code class="na">customerWithOneOfEachRentalType</code><code class="o">(</code>
        <code class="n">patName</code><code class="o">);</code>
    <code class="n">steve</code> <code class="o">=</code> <code class="n">ObjectMother</code>
      <code class="o">.</code><code class="na">customerWithOneNewReleaseAndOneRegular</code><code class="o">(</code>
        <code class="n">steveName</code><code class="o">);</code>
    <code class="n">customers</code> <code class="o">=</code> <code class="k">new</code> <code class="n">Customer</code><code class="o">[]</code> <code class="o">{</code>
      <code class="n">david</code><code class="o">,</code> <code class="n">john</code><code class="o">,</code> <code class="n">steve</code><code class="o">,</code> <code class="n">pat</code> <code class="o">};</code>
  <code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="uil">  <code class="nd">@Test</code>
</code><code class="uil">  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">davidStatement</code><code class="o">()</code> <code class="o">{</code>
</code><code class="uil">    <code class="n">assertEquals</code><code class="o">(</code>
</code><code class="uil">      <code class="n">expStatement</code><code class="o">(</code>
</code><code class="uil">        <code class="s">"Rental record for %s\n%sAmount "</code> <code class="o">+</code>
</code><code class="uil">        <code class="s">"owed is %s\nYou earned %s "</code> <code class="o">+</code>
</code><code class="uil">        <code class="s">"frequent renter points"</code><code class="o">,</code>
</code><code class="uil">        <code class="n">david</code><code class="o">,</code>
</code><code class="uil">        <code class="n">rentalInfo</code><code class="o">(</code>
</code><code class="uil">          <code class="s">"\t"</code><code class="o">,</code> <code class="s">""</code><code class="o">,</code> <code class="n">david</code><code class="o">.</code><code class="na">getRentals</code><code class="o">())),</code>
</code><code class="uil">      <code class="n">david</code><code class="o">.</code><code class="na">statement</code><code class="o">());</code>
</code><code class="uil">  <code class="o">}</code>
</code><code class="uil">
</code><code class="uil">  <code class="nd">@Test</code>
</code><code class="uil">  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">johnStatement</code><code class="o">()</code> <code class="o">{</code>
</code><code class="uil">    <code class="n">assertEquals</code><code class="o">(</code>
</code><code class="uil">      <code class="n">expStatement</code><code class="o">(</code>
</code><code class="uil">        <code class="s">"Rental record for %s\n%sAmount "</code> <code class="o">+</code>
</code><code class="uil">        <code class="s">"owed is %s\nYou earned %s "</code> <code class="o">+</code>
</code><code class="uil">        <code class="s">"frequent renter points"</code><code class="o">,</code>
</code><code class="uil">        <code class="n">john</code><code class="o">,</code>
</code><code class="uil">        <code class="n">rentalInfo</code><code class="o">(</code>
</code><code class="uil">          <code class="s">"\t"</code><code class="o">,</code> <code class="s">""</code><code class="o">,</code> <code class="n">john</code><code class="o">.</code><code class="na">getRentals</code><code class="o">())),</code>
</code><code class="uil">      <code class="n">john</code><code class="o">.</code><code class="na">statement</code><code class="o">());</code>
</code><code class="uil">  <code class="o">}</code>
</code></pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre>  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">patStatement</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="n">expStatement</code><code class="o">(</code>
        <code class="s">"Rental record for %s\n%sAmount "</code> <code class="o">+</code>
        <code class="s">"owed is %s\nYou earned %s "</code> <code class="o">+</code>
        <code class="s">"frequent renter points"</code><code class="o">,</code>
        <code class="n">pat</code><code class="o">,</code>
        <code class="n">rentalInfo</code><code class="o">(</code>
          <code class="s">"\t"</code><code class="o">,</code> <code class="s">""</code><code class="o">,</code> <code class="n">pat</code><code class="o">.</code><code class="na">getRentals</code><code class="o">())),</code>
      <code class="n">pat</code><code class="o">.</code><code class="na">statement</code><code class="o">());</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">steveStatement</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="n">expStatement</code><code class="o">(</code>
        <code class="s">"Rental record for %s\n%s"</code> <code class="o">+</code>
        <code class="s">"Amount owed is %s\nYou earned %s "</code> <code class="o">+</code>
        <code class="s">"frequent renter points"</code><code class="o">,</code>
        <code class="n">steve</code><code class="o">,</code>
        <code class="n">rentalInfo</code><code class="o">(</code>
          <code class="s">"\t"</code><code class="o">,</code> <code class="s">""</code><code class="o">,</code> <code class="n">steve</code><code class="o">.</code><code class="na">getRentals</code><code class="o">())),</code>
      <code class="n">steve</code><code class="o">.</code><code class="na">statement</code><code class="o">());</code>
  <code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre>  <code class="kd">public</code> <code class="kd">static</code> <code class="n">String</code> <code class="nf">rentalInfo</code><code class="o">(</code>
    <code class="n">String</code> <code class="n">startsWith</code><code class="o">,</code>
    <code class="n">String</code> <code class="n">endsWith</code><code class="o">,</code>
    <code class="n">List</code><code class="o">&lt;</code><code class="n">Rental</code><code class="o">&gt;</code> <code class="n">rentals</code><code class="o">)</code> <code class="o">{</code>
    <code class="n">String</code> <code class="n">result</code> <code class="o">=</code> <code class="s">""</code><code class="o">;</code>
    <code class="k">for</code> <code class="o">(</code><code class="n">Rental</code> <code class="n">rental</code> <code class="o">:</code> <code class="n">rentals</code><code class="o">)</code>
      <code class="n">result</code> <code class="o">+=</code> <code class="n">String</code><code class="o">.</code><code class="na">format</code><code class="o">(</code>
        <code class="s">"%s%s\t%s%s\n"</code><code class="o">,</code>
        <code class="n">startsWith</code><code class="o">,</code>
        <code class="n">rental</code><code class="o">.</code><code class="na">getMovie</code><code class="o">().</code><code class="na">getTitle</code><code class="o">(),</code>
        <code class="n">rental</code><code class="o">.</code><code class="na">getCharge</code><code class="o">(),</code>
        <code class="n">endsWith</code><code class="o">);</code>
    <code class="k">return</code> <code class="n">result</code><code class="o">;</code>
  <code class="o">}</code>

  <code class="kd">public</code> <code class="kd">static</code> <code class="n">String</code> <code class="nf">expStatement</code><code class="o">(</code>
    <code class="n">String</code> <code class="n">formatStr</code><code class="o">,</code>
    <code class="n">Customer</code> <code class="n">customer</code><code class="o">,</code>
    <code class="n">String</code> <code class="n">rentalInfo</code><code class="o">)</code> <code class="o">{</code>
    <code class="k">return</code> <code class="n">String</code><code class="o">.</code><code class="na">format</code><code class="o">(</code>
      <code class="n">formatStr</code><code class="o">,</code>
      <code class="n">customer</code><code class="o">.</code><code class="na">getName</code><code class="o">(),</code>
      <code class="n">rentalInfo</code><code class="o">,</code>
      <code class="n">customer</code><code class="o">.</code><code class="na">getTotalCharge</code><code class="o">(),</code>
      <code class="n">customer</code><code class="o">.</code><code class="na">getTotalPoints</code><code class="o">());</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="n">JUnit</code> <code class="n">version</code> <code class="mf">4.11</code>
<code class="o">.</code><code class="na">E</code><code class="o">.</code><code class="na">E</code><code class="o">..</code><code class="na">E</code>
<code class="n">There</code> <code class="n">were</code> <code class="mi">3</code> <code class="nl">failures:</code>
<code class="mi">1</code><code class="o">)</code> <code class="n">johnStatement</code><code class="o">(</code><code class="n">CustomerTest</code><code class="o">)</code>
<code class="n">org</code><code class="o">.</code><code class="na">junit</code><code class="o">.</code><code class="na">ComparisonFailure</code><code class="o">:</code> <code class="nl">expected:</code><code class="o">&lt;...</code><code class="na">or</code> <code class="n">John</code>
	<code class="n">Godfather</code> <code class="mi">4</code><code class="o">[</code>	<code class="o">]</code><code class="mf">9.0</code>
<code class="n">Amount</code> <code class="n">owed</code> <code class="n">is</code> <code class="mi">9</code><code class="o">...&gt;</code> <code class="n">but</code> <code class="nl">was:</code><code class="o">&lt;...</code><code class="na">or</code> <code class="n">John</code>
	<code class="n">Godfather</code> <code class="mi">4</code><code class="o">[</code> <code class="o">]</code><code class="mf">9.0</code>
<code class="n">Amount</code> <code class="n">owed</code> <code class="n">is</code> <code class="mi">9</code><code class="o">...&gt;</code>
<code class="mi">2</code><code class="o">)</code> <code class="n">steveStatement</code><code class="o">(</code><code class="n">CustomerTest</code><code class="o">)</code>
<code class="n">org</code><code class="o">.</code><code class="na">junit</code><code class="o">.</code><code class="na">ComparisonFailure</code><code class="o">:</code> <code class="nl">expected:</code><code class="o">&lt;...</code><code class="na">r</code> <code class="n">Steve</code>
	<code class="n">Godfather</code> <code class="mi">4</code><code class="o">[</code>	<code class="mf">9.0</code>
	<code class="n">Scarface</code>	<code class="o">]</code><code class="mf">3.5</code>
<code class="n">Amount</code> <code class="n">owed</code> <code class="n">is</code> <code class="mi">1</code><code class="o">...&gt;</code> <code class="n">but</code> <code class="nl">was:</code><code class="o">&lt;...</code><code class="na">r</code> <code class="n">Steve</code>
	<code class="n">Godfather</code> <code class="mi">4</code><code class="o">[</code> <code class="mf">9.0</code>
	<code class="n">Scarface</code> <code class="o">]</code><code class="mf">3.5</code>
<code class="n">Amount</code> <code class="n">owed</code> <code class="n">is</code> <code class="mi">1</code><code class="o">...&gt;</code>
<code class="mi">3</code><code class="o">)</code> <code class="n">patStatement</code><code class="o">(</code><code class="n">CustomerTest</code><code class="o">)</code>
<code class="n">org</code><code class="o">.</code><code class="na">junit</code><code class="o">.</code><code class="na">ComparisonFailure</code><code class="o">:</code> <code class="nl">expected:</code><code class="o">&lt;...</code><code class="na">for</code> <code class="n">Pat</code>
	<code class="n">Godfather</code> <code class="mi">4</code><code class="o">[</code>	<code class="mf">9.0</code>
	<code class="n">Scarface</code>	<code class="mf">3.5</code>
	<code class="n">Lion</code> <code class="n">King</code>	<code class="o">]</code><code class="mf">1.5</code>
<code class="n">Amount</code> <code class="n">owed</code> <code class="n">is</code> <code class="mi">1</code><code class="o">...&gt;</code> <code class="n">but</code> <code class="nl">was:</code><code class="o">&lt;...</code><code class="na">for</code> <code class="n">Pat</code>
	<code class="n">Godfather</code> <code class="mi">4</code><code class="o">[</code> <code class="mf">9.0</code>
	<code class="n">Scarface</code> <code class="mf">3.5</code>
	<code class="n">Lion</code> <code class="n">King</code> <code class="o">]</code><code class="mf">1.5</code>
<code class="n">Amount</code> <code class="n">owed</code> <code class="n">is</code> <code class="mi">1</code><code class="o">...&gt;</code>

<code class="n">FAILURES</code><code class="o">!!!</code>
<code class="n">Tests</code> <code class="nl">run:</code> <code class="mi">4</code><code class="o">,</code>  <code class="nl">Failures:</code> <code class="mi">3</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">CustomerTest</code> <code class="o">{</code>
  <code class="n">Customer</code> <code class="n">john</code><code class="o">,</code> <code class="n">steve</code><code class="o">,</code> <code class="n">pat</code><code class="o">,</code> <code class="n">david</code><code class="o">;</code>
  <code class="n">String</code> <code class="n">johnName</code> <code class="o">=</code> <code class="s">"John"</code><code class="o">,</code>
    <code class="n">steveName</code> <code class="o">=</code> <code class="s">"Steve"</code><code class="o">,</code>
    <code class="n">patName</code> <code class="o">=</code> <code class="s">"Pat"</code><code class="o">,</code>
    <code class="n">davidName</code> <code class="o">=</code> <code class="s">"David"</code><code class="o">;</code>
  <code class="n">Customer</code><code class="o">[]</code> <code class="n">customers</code><code class="o">;</code>

  <code class="nd">@Before</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">setup</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">david</code> <code class="o">=</code> <code class="n">ObjectMother</code>
      <code class="o">.</code><code class="na">customerWithNoRentals</code><code class="o">(</code><code class="n">davidName</code><code class="o">);</code>
    <code class="n">john</code> <code class="o">=</code> <code class="n">ObjectMother</code>
      <code class="o">.</code><code class="na">customerWithOneNewRelease</code><code class="o">(</code><code class="n">johnName</code><code class="o">);</code>
    <code class="n">pat</code> <code class="o">=</code> <code class="n">ObjectMother</code>
      <code class="o">.</code><code class="na">customerWithOneOfEachRentalType</code><code class="o">(</code>
        <code class="n">patName</code><code class="o">);</code>
    <code class="n">steve</code> <code class="o">=</code> <code class="n">ObjectMother</code>
      <code class="o">.</code><code class="na">customerWithOneNewReleaseAndOneRegular</code><code class="o">(</code>
        <code class="n">steveName</code><code class="o">);</code>
    <code class="n">customers</code> <code class="o">=</code> <code class="k">new</code> <code class="n">Customer</code><code class="o">[]</code> <code class="o">{</code>
      <code class="n">david</code><code class="o">,</code> <code class="n">john</code><code class="o">,</code> <code class="n">steve</code><code class="o">,</code> <code class="n">pat</code> <code class="o">};</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">davidStatement</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
<code class="uil">      <code class="s">"Rental record for David\nAmount "</code> <code class="o">+</code>
</code><code class="uil">      <code class="s">"owed is 0.0\n"</code> <code class="o">+</code>
</code><code class="uil">      <code class="s">"You earned 0 frequent renter points"</code><code class="o">,</code>
</code>      <code class="n">david</code><code class="o">.</code><code class="na">statement</code><code class="o">());</code>
  <code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre>  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">johnStatement</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
<code class="uil">      <code class="s">"Rental record for John\n\t"</code> <code class="o">+</code>
</code><code class="uil">      <code class="s">"Godfather 4\t9.0\n"</code> <code class="o">+</code>
</code><code class="uil">      <code class="s">"Amount owed is 9.0\n"</code> <code class="o">+</code>
</code><code class="uil">      <code class="s">"You earned 2 frequent renter points"</code><code class="o">,</code>
</code>      <code class="n">john</code><code class="o">.</code><code class="na">statement</code><code class="o">());</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">patStatement</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
<code class="uil">      <code class="s">"Rental record for Pat\n\t"</code> <code class="o">+</code>
</code><code class="uil">      <code class="s">"Godfather 4\t9.0\n"</code> <code class="o">+</code>
</code><code class="uil">      <code class="s">"\tScarface\t3.5\n"</code> <code class="o">+</code>
</code><code class="uil">      <code class="s">"\tLion King\t1.5\n"</code> <code class="o">+</code>
</code><code class="uil">      <code class="s">"Amount owed is 14.0\n"</code> <code class="o">+</code>
</code><code class="uil">      <code class="s">"You earned 4 frequent renter points"</code><code class="o">,</code>
</code>      <code class="n">pat</code><code class="o">.</code><code class="na">statement</code><code class="o">());</code>
  <code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre>  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">steveStatement</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
<code class="uil">      <code class="s">"Rental record for Steve\n\t"</code> <code class="o">+</code>
</code><code class="uil">      <code class="s">"Godfather 4\t9.0\n"</code> <code class="o">+</code>
</code><code class="uil">      <code class="s">"\tScarface\t3.5\n"</code> <code class="o">+</code>
</code><code class="uil">      <code class="s">"Amount owed is 12.5\n"</code> <code class="o">+</code>
</code><code class="uil">      <code class="s">"You earned 3 frequent renter points"</code><code class="o">,</code>
</code>      <code class="n">steve</code><code class="o">.</code><code class="na">statement</code><code class="o">());</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">CustomerTest</code> <code class="o">{</code>
  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">noRentalsStatement</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="s">"Rental record for David\nAmount "</code> <code class="o">+</code>
      <code class="s">"owed is 0.0\n"</code> <code class="o">+</code>
      <code class="s">"You earned 0 frequent renter points"</code><code class="o">,</code>
<code class="uil">      <code class="n">ObjectMother</code>
</code><code class="uil">      <code class="o">.</code><code class="na">customerWithNoRentals</code><code class="o">(</code>
</code><code class="uil">        <code class="s">"David"</code><code class="o">).</code><code class="na">statement</code><code class="o">());</code>
</code>  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">oneNewReleaseStatement</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="s">"Rental record for John\n\t"</code> <code class="o">+</code>
      <code class="s">"Godfather 4 9.0\n"</code> <code class="o">+</code>
      <code class="s">"Amount owed is 9.0\n"</code> <code class="o">+</code>
      <code class="s">"You earned 2 frequent renter points"</code><code class="o">,</code>
<code class="uil">      <code class="n">ObjectMother</code>
</code><code class="uil">      <code class="o">.</code><code class="na">customerWithOneNewRelease</code><code class="o">(</code>
</code><code class="uil">        <code class="s">"John"</code><code class="o">).</code><code class="na">statement</code><code class="o">());</code>
</code>  <code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre>  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">allRentalTypesStatement</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="s">"Rental record for Pat\n\t"</code> <code class="o">+</code>
      <code class="s">"Godfather 4 9.0\n"</code> <code class="o">+</code>
      <code class="s">"\tScarface 3.5\n\tLion King 1.5\n"</code> <code class="o">+</code>
      <code class="s">"Amount owed is 14.0\n"</code> <code class="o">+</code>
      <code class="s">"You earned 4 frequent renter points"</code><code class="o">,</code>
<code class="uil">      <code class="n">ObjectMother</code>
</code><code class="uil">      <code class="o">.</code><code class="na">customerWithOneOfEachRentalType</code><code class="o">(</code>
</code><code class="uil">        <code class="s">"Pat"</code><code class="o">).</code><code class="na">statement</code><code class="o">());</code>
</code>  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code>
  <code class="nf">newReleaseAndRegularStatement</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="s">"Rental record for Steve\n\t"</code> <code class="o">+</code>
      <code class="s">"Godfather 4 9.0\n"</code> <code class="o">+</code>
      <code class="s">"\tScarface 3.5\n"</code> <code class="o">+</code>
      <code class="s">"Amount owed is 12.5\n"</code> <code class="o">+</code>
      <code class="s">"You earned 3 frequent renter points"</code><code class="o">,</code>
<code class="uil">      <code class="n">ObjectMother</code>
</code><code class="uil">      <code class="o">.</code><code class="na">customerWithOneNewReleaseAndOneRegular</code><code class="o">(</code>
</code><code class="uil">        <code class="s">"Steve"</code><code class="o">).</code><code class="na">statement</code><code class="o">());</code>
</code>  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">a</code> <code class="o">{</code>
  <code class="kd">public</code> <code class="kd">static</code> <code class="n">CustomerBuilder</code> <code class="n">customer</code> <code class="o">=</code>
    <code class="k">new</code> <code class="nf">CustomerBuilder</code><code class="o">();</code>
  <code class="kd">public</code> <code class="kd">static</code> <code class="n">RentalBuilder</code> <code class="n">rental</code> <code class="o">=</code>
    <code class="k">new</code> <code class="nf">RentalBuilder</code><code class="o">();</code>
  <code class="kd">public</code> <code class="kd">static</code> <code class="n">MovieBuilder</code> <code class="n">movie</code> <code class="o">=</code>
    <code class="k">new</code> <code class="nf">MovieBuilder</code><code class="o">();</code>

  <code class="kd">public</code> <code class="kd">static</code> <code class="kd">class</code> <code class="nc">CustomerBuilder</code> <code class="o">{</code>
    <code class="n">Rental</code><code class="o">[]</code> <code class="n">rentals</code><code class="o">;</code>
    <code class="n">String</code> <code class="n">name</code><code class="o">;</code>

    <code class="n">CustomerBuilder</code><code class="o">()</code> <code class="o">{</code>
      <code class="k">this</code><code class="o">(</code><code class="s">"Jim"</code><code class="o">,</code> <code class="k">new</code> <code class="n">Rental</code><code class="o">[</code><code class="mi">0</code><code class="o">]);</code>
    <code class="o">}</code>

    <code class="n">CustomerBuilder</code><code class="o">(</code>
      <code class="n">String</code> <code class="n">name</code><code class="o">,</code> <code class="n">Rental</code><code class="o">[]</code> <code class="n">rentals</code><code class="o">)</code> <code class="o">{</code>
      <code class="k">this</code><code class="o">.</code><code class="na">name</code> <code class="o">=</code> <code class="n">name</code><code class="o">;</code>
      <code class="k">this</code><code class="o">.</code><code class="na">rentals</code> <code class="o">=</code> <code class="n">rentals</code><code class="o">;</code>
    <code class="o">}</code>

    <code class="kd">public</code> <code class="n">CustomerBuilder</code> <code class="nf">w</code><code class="o">(</code>
      <code class="n">RentalBuilder</code><code class="o">...</code> <code class="n">builders</code><code class="o">)</code> <code class="o">{</code>
      <code class="n">Rental</code><code class="o">[]</code> <code class="n">rentals</code> <code class="o">=</code>
        <code class="k">new</code> <code class="n">Rental</code><code class="o">[</code><code class="n">builders</code><code class="o">.</code><code class="na">length</code><code class="o">];</code>
      <code class="k">for</code> <code class="o">(</code><code class="kt">int</code> <code class="n">i</code><code class="o">=</code><code class="mi">0</code><code class="o">;</code> <code class="n">i</code><code class="o">&lt;</code><code class="n">builders</code><code class="o">.</code><code class="na">length</code><code class="o">;</code> <code class="n">i</code><code class="o">++)</code> <code class="o">{</code>
        <code class="n">rentals</code><code class="o">[</code><code class="n">i</code><code class="o">]</code> <code class="o">=</code> <code class="n">builders</code><code class="o">[</code><code class="n">i</code><code class="o">].</code><code class="na">build</code><code class="o">();</code>
      <code class="o">}</code>
      <code class="k">return</code>
        <code class="k">new</code> <code class="nf">CustomerBuilder</code><code class="o">(</code><code class="n">name</code><code class="o">,</code> <code class="n">rentals</code><code class="o">);</code>
    <code class="o">}</code>

    <code class="kd">public</code> <code class="n">CustomerBuilder</code> <code class="nf">w</code><code class="o">(</code><code class="n">String</code> <code class="n">name</code><code class="o">)</code> <code class="o">{</code>
      <code class="k">return</code>
        <code class="k">new</code> <code class="nf">CustomerBuilder</code><code class="o">(</code><code class="n">name</code><code class="o">,</code> <code class="n">rentals</code><code class="o">);</code>
    <code class="o">}</code>

    <code class="kd">public</code> <code class="n">Customer</code> <code class="nf">build</code><code class="o">()</code> <code class="o">{</code>
      <code class="n">Customer</code> <code class="n">result</code> <code class="o">=</code> <code class="k">new</code> <code class="n">Customer</code><code class="o">(</code><code class="n">name</code><code class="o">);</code>
      <code class="k">for</code> <code class="o">(</code><code class="n">Rental</code> <code class="n">rental</code> <code class="o">:</code> <code class="n">rentals</code><code class="o">)</code> <code class="o">{</code>
        <code class="n">result</code><code class="o">.</code><code class="na">addRental</code><code class="o">(</code><code class="n">rental</code><code class="o">);</code>
      <code class="o">}</code>
      <code class="k">return</code> <code class="n">result</code><code class="o">;</code>
    <code class="o">}</code>
  <code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre>  <code class="kd">public</code> <code class="kd">static</code> <code class="kd">class</code> <code class="nc">RentalBuilder</code> <code class="o">{</code>
    <code class="kd">final</code> <code class="n">Movie</code> <code class="n">movie</code><code class="o">;</code>
    <code class="kd">final</code> <code class="kt">int</code> <code class="n">days</code><code class="o">;</code>

    <code class="n">RentalBuilder</code><code class="o">()</code> <code class="o">{</code>
      <code class="k">this</code><code class="o">(</code><code class="k">new</code> <code class="n">MovieBuilder</code><code class="o">().</code><code class="na">build</code><code class="o">(),</code> <code class="mi">3</code><code class="o">);</code>
    <code class="o">}</code>

    <code class="n">RentalBuilder</code><code class="o">(</code><code class="n">Movie</code> <code class="n">movie</code><code class="o">,</code> <code class="kt">int</code> <code class="n">days</code><code class="o">)</code> <code class="o">{</code>
      <code class="k">this</code><code class="o">.</code><code class="na">movie</code> <code class="o">=</code> <code class="n">movie</code><code class="o">;</code>
      <code class="k">this</code><code class="o">.</code><code class="na">days</code> <code class="o">=</code> <code class="n">days</code><code class="o">;</code>
    <code class="o">}</code>

    <code class="kd">public</code> <code class="n">RentalBuilder</code> <code class="nf">w</code><code class="o">(</code>
      <code class="n">MovieBuilder</code> <code class="n">movie</code><code class="o">)</code> <code class="o">{</code>
      <code class="k">return</code>
        <code class="k">new</code> <code class="nf">RentalBuilder</code><code class="o">(</code>
          <code class="n">movie</code><code class="o">.</code><code class="na">build</code><code class="o">(),</code> <code class="n">days</code><code class="o">);</code>
    <code class="o">}</code>

    <code class="kd">public</code> <code class="n">Rental</code> <code class="nf">build</code><code class="o">()</code> <code class="o">{</code>
      <code class="k">return</code> <code class="k">new</code> <code class="nf">Rental</code><code class="o">(</code><code class="n">movie</code><code class="o">,</code> <code class="n">days</code><code class="o">);</code>
    <code class="o">}</code>
  <code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre>  <code class="kd">public</code> <code class="kd">static</code> <code class="kd">class</code> <code class="nc">MovieBuilder</code> <code class="o">{</code>
    <code class="kd">final</code> <code class="n">String</code> <code class="n">name</code><code class="o">;</code>
    <code class="kd">final</code> <code class="n">Movie</code><code class="o">.</code><code class="na">Type</code> <code class="n">type</code><code class="o">;</code>

    <code class="n">MovieBuilder</code><code class="o">()</code> <code class="o">{</code>
      <code class="k">this</code><code class="o">(</code><code class="s">"Godfather 4"</code><code class="o">,</code>
           <code class="n">Movie</code><code class="o">.</code><code class="na">Type</code><code class="o">.</code><code class="na">NEW_RELEASE</code><code class="o">);</code>
    <code class="o">}</code>

    <code class="n">MovieBuilder</code><code class="o">(</code>
      <code class="n">String</code> <code class="n">name</code><code class="o">,</code> <code class="n">Movie</code><code class="o">.</code><code class="na">Type</code> <code class="n">type</code><code class="o">)</code> <code class="o">{</code>
      <code class="k">this</code><code class="o">.</code><code class="na">name</code> <code class="o">=</code> <code class="n">name</code><code class="o">;</code>
      <code class="k">this</code><code class="o">.</code><code class="na">type</code> <code class="o">=</code> <code class="n">type</code><code class="o">;</code>
    <code class="o">}</code>

    <code class="kd">public</code> <code class="n">MovieBuilder</code> <code class="nf">w</code><code class="o">(</code><code class="n">Movie</code><code class="o">.</code><code class="na">Type</code> <code class="n">type</code><code class="o">)</code> <code class="o">{</code>
      <code class="k">return</code> <code class="k">new</code> <code class="nf">MovieBuilder</code><code class="o">(</code><code class="n">name</code><code class="o">,</code> <code class="n">type</code><code class="o">);</code>
    <code class="o">}</code>

    <code class="kd">public</code> <code class="n">MovieBuilder</code> <code class="nf">w</code><code class="o">(</code><code class="n">String</code> <code class="n">name</code><code class="o">)</code> <code class="o">{</code>
      <code class="k">return</code> <code class="k">new</code> <code class="nf">MovieBuilder</code><code class="o">(</code><code class="n">name</code><code class="o">,</code> <code class="n">type</code><code class="o">);</code>
    <code class="o">}</code>

    <code class="kd">public</code> <code class="n">Movie</code> <code class="nf">build</code><code class="o">()</code> <code class="o">{</code>
      <code class="k">return</code> <code class="k">new</code> <code class="nf">Movie</code><code class="o">(</code><code class="n">name</code><code class="o">,</code> <code class="n">type</code><code class="o">);</code>
    <code class="o">}</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">CustomerTest</code> <code class="o">{</code>
  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">noRentalsStatement</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="s">"Rental record for David\nAmount "</code> <code class="o">+</code>
      <code class="s">"owed is 0.0\nYou earned 0 frequent "</code> <code class="o">+</code>
      <code class="s">"renter points"</code><code class="o">,</code>
<code class="uil">      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
</code><code class="uil">        <code class="s">"David"</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">statement</code><code class="o">());</code>
</code>  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">oneNewReleaseStatement</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="s">"Rental record for John\n\t"</code> <code class="o">+</code>
      <code class="s">"Godfather 4 9.0\nAmount owed is "</code> <code class="o">+</code>
      <code class="s">"9.0\nYou earned 2 frequent renter "</code> <code class="o">+</code>
      <code class="s">"points"</code><code class="o">,</code>
<code class="uil">      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="s">"John"</code><code class="o">).</code><code class="na">w</code><code class="o">(</code>
</code><code class="uil">        <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
</code><code class="uil">          <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">NEW_RELEASE</code><code class="o">))).</code><code class="na">build</code><code class="o">()</code>
</code>      <code class="o">.</code><code class="na">statement</code><code class="o">());</code>
  <code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre>  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">allRentalTypesStatement</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="s">"Rental record for Pat\n\t"</code> <code class="o">+</code>
      <code class="s">"Godfather 4 9.0\n\tScarface 3.5\n"</code> <code class="o">+</code>
      <code class="s">"\tLion King 1.5\nAmount owed is "</code> <code class="o">+</code>
      <code class="s">"14.0\nYou earned 4 frequent renter "</code> <code class="o">+</code>
      <code class="s">"points"</code><code class="o">,</code>
<code class="uil">      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="s">"Pat"</code><code class="o">).</code><code class="na">w</code><code class="o">(</code>
</code><code class="uil">        <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">NEW_RELEASE</code><code class="o">)),</code>
</code><code class="uil">        <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="s">"Scarface"</code><code class="o">).</code><code class="na">w</code><code class="o">(</code>
</code><code class="uil">                     <code class="n">REGULAR</code><code class="o">)),</code>
</code><code class="uil">        <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="s">"Lion King"</code><code class="o">).</code><code class="na">w</code><code class="o">(</code>
</code><code class="uil">                     <code class="n">CHILDREN</code><code class="o">))).</code><code class="na">build</code><code class="o">()</code>
</code>      <code class="o">.</code><code class="na">statement</code><code class="o">());</code>
  <code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre>  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code>
  <code class="nf">newReleaseAndRegularStatement</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="s">"Rental record for Steve\n\t"</code> <code class="o">+</code>
      <code class="s">"Godfather 4 9.0\n\tScarface 3.5\n"</code> <code class="o">+</code>
      <code class="s">"Amount owed is 12.5\nYou earned 3 "</code> <code class="o">+</code>
      <code class="s">"frequent renter points"</code><code class="o">,</code>
<code class="uil">      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="s">"Steve"</code><code class="o">).</code><code class="na">w</code><code class="o">(</code>
</code><code class="uil">        <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">NEW_RELEASE</code><code class="o">)),</code>
</code><code class="uil">        <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
</code><code class="uil">          <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
</code><code class="uil">            <code class="s">"Scarface"</code><code class="o">).</code><code class="na">w</code><code class="o">(</code><code class="n">REGULAR</code><code class="o">))).</code><code class="na">build</code><code class="o">()</code>
</code>      <code class="o">.</code><code class="na">statement</code><code class="o">());</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">CustomerTest</code> <code class="o">{</code>
  <code class="n">Customer</code> <code class="n">john</code><code class="o">,</code> <code class="n">steve</code><code class="o">,</code> <code class="n">pat</code><code class="o">,</code> <code class="n">david</code><code class="o">;</code>
  <code class="n">String</code> <code class="n">johnName</code> <code class="o">=</code> <code class="s">"John"</code><code class="o">,</code>
    <code class="n">steveName</code> <code class="o">=</code> <code class="s">"Steve"</code><code class="o">,</code>
    <code class="n">patName</code> <code class="o">=</code> <code class="s">"Pat"</code><code class="o">,</code>
    <code class="n">davidName</code> <code class="o">=</code> <code class="s">"David"</code><code class="o">;</code>
  <code class="n">Customer</code><code class="o">[]</code> <code class="n">customers</code><code class="o">;</code>

  <code class="nd">@Before</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">setup</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">david</code> <code class="o">=</code> <code class="n">ObjectMother</code>
      <code class="o">.</code><code class="na">customerWithNoRentals</code><code class="o">(</code>
        <code class="n">davidName</code><code class="o">);</code>
    <code class="n">john</code> <code class="o">=</code> <code class="n">ObjectMother</code>
      <code class="o">.</code><code class="na">customerWithOneNewRelease</code><code class="o">(</code>
        <code class="n">johnName</code><code class="o">);</code>
    <code class="n">pat</code> <code class="o">=</code> <code class="n">ObjectMother</code>
      <code class="o">.</code><code class="na">customerWithOneOfEachRentalType</code><code class="o">(</code>
        <code class="n">patName</code><code class="o">);</code>
    <code class="n">steve</code> <code class="o">=</code> <code class="n">ObjectMother</code>
      <code class="o">.</code><code class="na">customerWithOneNewReleaseAndOneRegular</code><code class="o">(</code>
        <code class="n">steveName</code><code class="o">);</code>
    <code class="n">customers</code> <code class="o">=</code>
      <code class="k">new</code> <code class="n">Customer</code><code class="o">[]</code>
      <code class="o">{</code> <code class="n">david</code><code class="o">,</code> <code class="n">john</code><code class="o">,</code> <code class="n">steve</code><code class="o">,</code> <code class="n">pat</code><code class="o">};</code>
  <code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre>  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">getName</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="n">davidName</code><code class="o">,</code> <code class="n">david</code><code class="o">.</code><code class="na">getName</code><code class="o">());</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="n">johnName</code><code class="o">,</code> <code class="n">john</code><code class="o">.</code><code class="na">getName</code><code class="o">());</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="n">steveName</code><code class="o">,</code> <code class="n">steve</code><code class="o">.</code><code class="na">getName</code><code class="o">());</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="n">patName</code><code class="o">,</code> <code class="n">pat</code><code class="o">.</code><code class="na">getName</code><code class="o">());</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">statement</code><code class="o">()</code> <code class="o">{</code>
    <code class="k">for</code> <code class="o">(</code><code class="kt">int</code> <code class="n">i</code><code class="o">=</code><code class="mi">0</code><code class="o">;</code> <code class="n">i</code><code class="o">&lt;</code><code class="n">customers</code><code class="o">.</code><code class="na">length</code><code class="o">;</code> <code class="n">i</code><code class="o">++)</code> <code class="o">{</code>
      <code class="n">assertEquals</code><code class="o">(</code>
        <code class="n">expStatement</code><code class="o">(</code>
          <code class="s">"Rental record for %s\n"</code> <code class="o">+</code>
          <code class="s">"%sAmount owed is %s\n"</code>  <code class="o">+</code>
          <code class="s">"You earned %s frequent "</code> <code class="o">+</code>
          <code class="s">"renter points"</code><code class="o">,</code>
          <code class="n">customers</code><code class="o">[</code><code class="n">i</code><code class="o">],</code>
          <code class="n">rentalInfo</code><code class="o">(</code>
            <code class="s">"\t"</code><code class="o">,</code> <code class="s">""</code><code class="o">,</code>
            <code class="n">customers</code><code class="o">[</code><code class="n">i</code><code class="o">].</code><code class="na">getRentals</code><code class="o">())),</code>
        <code class="n">customers</code><code class="o">[</code><code class="n">i</code><code class="o">].</code><code class="na">statement</code><code class="o">());</code>
    <code class="o">}</code>
  <code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre>  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">htmlStatement</code><code class="o">()</code> <code class="o">{</code>
    <code class="k">for</code> <code class="o">(</code><code class="kt">int</code> <code class="n">i</code><code class="o">=</code><code class="mi">0</code><code class="o">;</code> <code class="n">i</code><code class="o">&lt;</code><code class="n">customers</code><code class="o">.</code><code class="na">length</code><code class="o">;</code> <code class="n">i</code><code class="o">++)</code> <code class="o">{</code>
      <code class="n">assertEquals</code><code class="o">(</code>
        <code class="n">expStatement</code><code class="o">(</code>
          <code class="s">"&lt;h1&gt;Rental record for "</code> <code class="o">+</code>
          <code class="s">"&lt;em&gt;%s&lt;/em&gt;&lt;/h1&gt;\n%s"</code> <code class="o">+</code>
          <code class="s">"&lt;p&gt;Amount owed is &lt;em&gt;%s&lt;/em&gt;"</code> <code class="o">+</code>
          <code class="s">"&lt;/p&gt;\n&lt;p&gt;You earned &lt;em&gt;%s"</code> <code class="o">+</code>
          <code class="s">" frequent renter points&lt;/em&gt;&lt;/p&gt;"</code><code class="o">,</code>
          <code class="n">customers</code><code class="o">[</code><code class="n">i</code><code class="o">],</code>
          <code class="n">rentalInfo</code><code class="o">(</code>
            <code class="s">"&lt;p&gt;"</code><code class="o">,</code> <code class="s">"&lt;/p&gt;"</code><code class="o">,</code>
            <code class="n">customers</code><code class="o">[</code><code class="n">i</code><code class="o">].</code><code class="na">getRentals</code><code class="o">())),</code>
        <code class="n">customers</code><code class="o">[</code><code class="n">i</code><code class="o">].</code><code class="na">htmlStatement</code><code class="o">());</code>
    <code class="o">}</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="o">(</code><code class="n">expected</code><code class="o">=</code><code class="n">IllegalArgumentException</code><code class="o">.</code><code class="na">class</code><code class="o">)</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">invalidTitle</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">ObjectMother</code>
      <code class="o">.</code><code class="na">customerWithNoRentals</code><code class="o">(</code><code class="s">"Bob"</code><code class="o">)</code>
      <code class="o">.</code><code class="na">addRental</code><code class="o">(</code>
        <code class="k">new</code> <code class="nf">Rental</code><code class="o">(</code>
          <code class="k">new</code> <code class="nf">Movie</code><code class="o">(</code><code class="s">"Crazy, Stupid, Love."</code><code class="o">,</code>
                    <code class="n">Movie</code><code class="o">.</code><code class="na">Type</code><code class="o">.</code><code class="na">UNKNOWN</code><code class="o">),</code>
          <code class="mi">4</code><code class="o">));</code>
  <code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre>  <code class="kd">public</code> <code class="kd">static</code> <code class="n">String</code> <code class="nf">rentalInfo</code><code class="o">(</code>
    <code class="n">String</code> <code class="n">startsWith</code><code class="o">,</code>
    <code class="n">String</code> <code class="n">endsWith</code><code class="o">,</code>
    <code class="n">List</code><code class="o">&lt;</code><code class="n">Rental</code><code class="o">&gt;</code> <code class="n">rentals</code><code class="o">)</code> <code class="o">{</code>
    <code class="n">String</code> <code class="n">result</code> <code class="o">=</code> <code class="s">""</code><code class="o">;</code>
    <code class="k">for</code> <code class="o">(</code><code class="n">Rental</code> <code class="n">rental</code> <code class="o">:</code> <code class="n">rentals</code><code class="o">)</code>
      <code class="n">result</code> <code class="o">+=</code> <code class="n">String</code><code class="o">.</code><code class="na">format</code><code class="o">(</code>
        <code class="s">"%s%s\t%s%s\n"</code><code class="o">,</code>
        <code class="n">startsWith</code><code class="o">,</code>
        <code class="n">rental</code><code class="o">.</code><code class="na">getMovie</code><code class="o">().</code><code class="na">getTitle</code><code class="o">(),</code>
        <code class="n">rental</code><code class="o">.</code><code class="na">getCharge</code><code class="o">(),</code>
        <code class="n">endsWith</code><code class="o">);</code>
    <code class="k">return</code> <code class="n">result</code><code class="o">;</code>
  <code class="o">}</code>

  <code class="kd">public</code> <code class="kd">static</code> <code class="n">String</code> <code class="nf">expStatement</code><code class="o">(</code>
    <code class="n">String</code> <code class="n">formatStr</code><code class="o">,</code>
    <code class="n">Customer</code> <code class="n">customer</code><code class="o">,</code>
    <code class="n">String</code> <code class="n">rentalInfo</code><code class="o">)</code> <code class="o">{</code>
    <code class="k">return</code> <code class="n">String</code><code class="o">.</code><code class="na">format</code><code class="o">(</code>
      <code class="n">formatStr</code><code class="o">,</code>
      <code class="n">customer</code><code class="o">.</code><code class="na">getName</code><code class="o">(),</code>
      <code class="n">rentalInfo</code><code class="o">,</code>
      <code class="n">customer</code><code class="o">.</code><code class="na">getTotalCharge</code><code class="o">(),</code>
      <code class="n">customer</code><code class="o">.</code><code class="na">getTotalPoints</code><code class="o">());</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">CustomerTest</code> <code class="o">{</code>
  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">getName</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="s">"John"</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="s">"John"</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">getName</code><code class="o">());</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">noRentalsStatement</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="s">"Rental record for David\nAmount "</code> <code class="o">+</code>
      <code class="s">"owed is 0.0\nYou earned 0 frequent "</code> <code class="o">+</code>
      <code class="s">"renter points"</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="s">"David"</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">statement</code><code class="o">());</code>
  <code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre>  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">oneNewReleaseStatement</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="s">"Rental record for John\n"</code> <code class="o">+</code>
      <code class="s">"\tGodfather 4 9.0\n"</code> <code class="o">+</code>
      <code class="s">"Amount owed is 9.0\n"</code> <code class="o">+</code>
      <code class="s">"You earned 2 frequent renter points"</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="s">"John"</code><code class="o">).</code><code class="na">w</code><code class="o">(</code>
        <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
          <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
            <code class="n">NEW_RELEASE</code><code class="o">))).</code><code class="na">build</code><code class="o">()</code>
      <code class="o">.</code><code class="na">statement</code><code class="o">());</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">allRentalTypesStatement</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="s">"Rental record for Pat\n"</code> <code class="o">+</code>
      <code class="s">"\tGodfather 4 9.0\n"</code> <code class="o">+</code>
      <code class="s">"\tScarface 3.5\n"</code> <code class="o">+</code>
      <code class="s">"\tLion King 1.5\n"</code> <code class="o">+</code>
      <code class="s">"Amount owed is 14.0\n"</code> <code class="o">+</code>
      <code class="s">"You earned 4 frequent renter points"</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="s">"Pat"</code><code class="o">).</code><code class="na">w</code><code class="o">(</code>
        <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">NEW_RELEASE</code><code class="o">)),</code>
        <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
          <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="s">"Scarface"</code><code class="o">).</code><code class="na">w</code><code class="o">(</code><code class="n">REGULAR</code><code class="o">)),</code>
        <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
          <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="s">"Lion King"</code><code class="o">).</code><code class="na">w</code><code class="o">(</code>
            <code class="n">CHILDREN</code><code class="o">))).</code><code class="na">build</code><code class="o">().</code><code class="na">statement</code><code class="o">());</code>
  <code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre>  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code>
  <code class="nf">newReleaseAndRegularStatement</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="s">"Rental record for Steve\n"</code> <code class="o">+</code>
      <code class="s">"\tGodfather 4 9.0\n"</code> <code class="o">+</code>
      <code class="s">"\tScarface 3.5\n"</code> <code class="o">+</code>
      <code class="s">"Amount owed is 12.5\n"</code> <code class="o">+</code>
      <code class="s">"You earned 3 frequent renter points"</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="s">"Steve"</code><code class="o">).</code><code class="na">w</code><code class="o">(</code>
        <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">NEW_RELEASE</code><code class="o">)),</code>
        <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
          <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="s">"Scarface"</code><code class="o">).</code><code class="na">w</code><code class="o">(</code>
            <code class="n">REGULAR</code><code class="o">))).</code><code class="na">build</code><code class="o">().</code><code class="na">statement</code><code class="o">());</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">noRentalsHtmlStatement</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="s">"&lt;h1&gt;Rental record for &lt;em&gt;David"</code> <code class="o">+</code>
      <code class="s">"&lt;/em&gt;&lt;/h1&gt;\n&lt;p&gt;Amount owed is &lt;em&gt;"</code> <code class="o">+</code>
      <code class="s">"0.0&lt;/em&gt;&lt;/p&gt;\n&lt;p&gt;You earned &lt;em&gt;0 "</code> <code class="o">+</code>
      <code class="s">"frequent renter points&lt;/em&gt;&lt;/p&gt;"</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="s">"David"</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">htmlStatement</code><code class="o">());</code>
  <code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre>  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">oneNewReleaseHtmlStatement</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="s">"&lt;h1&gt;Rental record for &lt;em&gt;John&lt;/em&gt;"</code> <code class="o">+</code>
      <code class="s">"&lt;/h1&gt;\n&lt;p&gt;Godfather 4 9.0&lt;/p&gt;\n"</code> <code class="o">+</code>
      <code class="s">"&lt;p&gt;Amount owed is &lt;em&gt;9.0&lt;/em&gt;&lt;/p&gt;"</code> <code class="o">+</code>
      <code class="s">"\n&lt;p&gt;You earned &lt;em&gt;2 frequent "</code> <code class="o">+</code>
      <code class="s">"renter points&lt;/em&gt;&lt;/p&gt;"</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="s">"John"</code><code class="o">).</code><code class="na">w</code><code class="o">(</code>
        <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
          <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
            <code class="n">NEW_RELEASE</code><code class="o">))).</code><code class="na">build</code><code class="o">()</code>
      <code class="o">.</code><code class="na">htmlStatement</code><code class="o">());</code>
  <code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre>  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">allRentalTypesHtmlStatement</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="s">"&lt;h1&gt;Rental record for &lt;em&gt;Pat&lt;/em&gt;"</code> <code class="o">+</code>
      <code class="s">"&lt;/h1&gt;\n&lt;p&gt;Godfather 4 9.0&lt;/p&gt;\n"</code> <code class="o">+</code>
      <code class="s">"&lt;p&gt;Scarface 3.5&lt;/p&gt;\n&lt;p&gt;Lion King"</code> <code class="o">+</code>
      <code class="s">" 1.5&lt;/p&gt;\n&lt;p&gt;Amount owed is &lt;em&gt;"</code> <code class="o">+</code>
      <code class="s">"14.0&lt;/em&gt;&lt;/p&gt;\n&lt;p&gt;You earned &lt;em&gt;"</code> <code class="o">+</code>
      <code class="s">"4 frequent renter points&lt;/em&gt;&lt;/p&gt;"</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="s">"Pat"</code><code class="o">).</code><code class="na">w</code><code class="o">(</code>
        <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">NEW_RELEASE</code><code class="o">)),</code>
        <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
          <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="s">"Scarface"</code><code class="o">).</code><code class="na">w</code><code class="o">(</code><code class="n">REGULAR</code><code class="o">)),</code>
        <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
          <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="s">"Lion King"</code><code class="o">).</code><code class="na">w</code><code class="o">(</code>
            <code class="n">CHILDREN</code><code class="o">))).</code><code class="na">build</code><code class="o">()</code>
      <code class="o">.</code><code class="na">htmlStatement</code><code class="o">());</code>
  <code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre>  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code>
  <code class="nf">newReleaseAndRegularHtmlStatement</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="s">"&lt;h1&gt;Rental record for &lt;em&gt;Steve"</code> <code class="o">+</code>
      <code class="s">"&lt;/em&gt;&lt;/h1&gt;\n&lt;p&gt;Godfather 4 9.0&lt;/p&gt;"</code> <code class="o">+</code>
      <code class="s">"\n&lt;p&gt;Scarface 3.5&lt;/p&gt;\n&lt;p&gt;Amount "</code> <code class="o">+</code>
      <code class="s">"owed is &lt;em&gt;12.5&lt;/em&gt;&lt;/p&gt;\n&lt;p&gt;"</code> <code class="o">+</code>
      <code class="s">"You earned &lt;em&gt;3 frequent renter "</code> <code class="o">+</code>
      <code class="s">"points&lt;/em&gt;&lt;/p&gt;"</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="s">"Steve"</code><code class="o">).</code><code class="na">w</code><code class="o">(</code>
        <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">NEW_RELEASE</code><code class="o">)),</code>
        <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
          <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="s">"Scarface"</code><code class="o">).</code><code class="na">w</code><code class="o">(</code>
            <code class="n">REGULAR</code><code class="o">))).</code><code class="na">build</code><code class="o">()</code>
      <code class="o">.</code><code class="na">htmlStatement</code><code class="o">());</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="o">(</code><code class="n">expected</code><code class="o">=</code><code class="n">IllegalArgumentException</code><code class="o">.</code><code class="na">class</code><code class="o">)</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">invalidTitle</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
      <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">UNKNOWN</code><code class="o">))).</code><code class="na">build</code><code class="o">();</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">RentalTest</code> <code class="o">{</code>
  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">rentalIsStartedIfInStore</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">Movie</code> <code class="n">movie</code> <code class="o">=</code> <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">build</code><code class="o">();</code>
    <code class="n">Rental</code> <code class="n">rental</code> <code class="o">=</code>
      <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">movie</code><code class="o">).</code><code class="na">build</code><code class="o">();</code>
    <code class="n">Store</code> <code class="n">store</code> <code class="o">=</code> <code class="n">a</code><code class="o">.</code><code class="na">store</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">movie</code><code class="o">).</code><code class="na">build</code><code class="o">();</code>
    <code class="n">rental</code><code class="o">.</code><code class="na">start</code><code class="o">(</code><code class="n">store</code><code class="o">);</code>
    <code class="n">assertTrue</code><code class="o">(</code><code class="n">rental</code><code class="o">.</code><code class="na">isStarted</code><code class="o">());</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mi">0</code><code class="o">,</code> <code class="n">store</code><code class="o">.</code><code class="na">getAvailability</code><code class="o">(</code><code class="n">movie</code><code class="o">));</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code>
  <code class="nf">rentalDoesNotStartIfNotAvailable</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">Movie</code> <code class="n">movie</code> <code class="o">=</code> <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">build</code><code class="o">();</code>
    <code class="n">Rental</code> <code class="n">rental</code> <code class="o">=</code> <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">.</code><code class="na">build</code><code class="o">();</code>
    <code class="n">Store</code> <code class="n">store</code> <code class="o">=</code> <code class="n">a</code><code class="o">.</code><code class="na">store</code><code class="o">.</code><code class="na">build</code><code class="o">();</code>
    <code class="n">rental</code><code class="o">.</code><code class="na">start</code><code class="o">(</code><code class="n">store</code><code class="o">);</code>
    <code class="n">assertFalse</code><code class="o">(</code><code class="n">rental</code><code class="o">.</code><code class="na">isStarted</code><code class="o">());</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mi">0</code><code class="o">,</code> <code class="n">store</code><code class="o">.</code><code class="na">getAvailability</code><code class="o">(</code><code class="n">movie</code><code class="o">));</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">RentalTest</code> <code class="o">{</code>
  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">rentalIsStartedIfInStore</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">Movie</code> <code class="n">movie</code> <code class="o">=</code> <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">build</code><code class="o">();</code>
    <code class="n">Rental</code> <code class="n">rental</code> <code class="o">=</code>
      <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">movie</code><code class="o">).</code><code class="na">build</code><code class="o">();</code>
    <code class="n">Store</code> <code class="n">store</code> <code class="o">=</code> <code class="n">mock</code><code class="o">(</code><code class="n">Store</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">when</code><code class="o">(</code><code class="n">store</code><code class="o">.</code><code class="na">getAvailability</code><code class="o">(</code><code class="n">movie</code><code class="o">))</code>
      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="mi">1</code><code class="o">);</code>
    <code class="n">rental</code><code class="o">.</code><code class="na">start</code><code class="o">(</code><code class="n">store</code><code class="o">);</code>
    <code class="n">assertTrue</code><code class="o">(</code><code class="n">rental</code><code class="o">.</code><code class="na">isStarted</code><code class="o">());</code>
    <code class="n">verify</code><code class="o">(</code><code class="n">store</code><code class="o">).</code><code class="na">remove</code><code class="o">(</code><code class="n">movie</code><code class="o">);</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code>
  <code class="nf">rentalDoesNotStartIfNotAvailable</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">Rental</code> <code class="n">rental</code> <code class="o">=</code> <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">.</code><code class="na">build</code><code class="o">();</code>
    <code class="n">Store</code> <code class="n">store</code> <code class="o">=</code> <code class="n">mock</code><code class="o">(</code><code class="n">Store</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">rental</code><code class="o">.</code><code class="na">start</code><code class="o">(</code><code class="n">store</code><code class="o">);</code>
    <code class="n">assertFalse</code><code class="o">(</code><code class="n">rental</code><code class="o">.</code><code class="na">isStarted</code><code class="o">());</code>
    <code class="n">verify</code><code class="o">(</code>
      <code class="n">store</code><code class="o">,</code> <code class="n">never</code><code class="o">()).</code><code class="na">remove</code><code class="o">(</code>
        <code class="n">any</code><code class="o">(</code><code class="n">Movie</code><code class="o">.</code><code class="na">class</code><code class="o">));</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">CustomerTest</code> <code class="o">{</code>
  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">getName</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="s">"John"</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="s">"John"</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">getName</code><code class="o">());</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">noRentalsStatement</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="s">"Rental record for David\nAmount"</code> <code class="o">+</code>
      <code class="s">" owed is 0.0\n"</code> <code class="o">+</code>
      <code class="s">"You earned 0 frequent renter points"</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="s">"David"</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">statement</code><code class="o">());</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">oneNewReleaseStatement</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="s">"Rental record for John\n"</code> <code class="o">+</code>
      <code class="s">"\tGodfather 4 9.0\n"</code> <code class="o">+</code>
      <code class="s">"Amount owed is 9.0\n"</code> <code class="o">+</code>
      <code class="s">"You earned 2 frequent renter points"</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="s">"John"</code><code class="o">).</code><code class="na">w</code><code class="o">(</code>
        <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
          <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
            <code class="n">NEW_RELEASE</code><code class="o">))).</code><code class="na">build</code><code class="o">()</code>
      <code class="o">.</code><code class="na">statement</code><code class="o">());</code>
  <code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre>  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">allRentalTypesStatement</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="s">"Rental record for Pat\n"</code> <code class="o">+</code>
      <code class="s">"\tGodfather 4 9.0\n"</code> <code class="o">+</code>
      <code class="s">"\tScarface 3.5\n"</code> <code class="o">+</code>
      <code class="s">"\tLion King 1.5\n"</code> <code class="o">+</code>
      <code class="s">"Amount owed is 14.0\n"</code> <code class="o">+</code>
      <code class="s">"You earned 4 frequent renter points"</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="s">"Pat"</code><code class="o">).</code><code class="na">w</code><code class="o">(</code>
        <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">NEW_RELEASE</code><code class="o">)),</code>
        <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
          <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="s">"Scarface"</code><code class="o">).</code><code class="na">w</code><code class="o">(</code><code class="n">REGULAR</code><code class="o">)),</code>
        <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
          <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
            <code class="s">"Lion King"</code><code class="o">).</code><code class="na">w</code><code class="o">(</code>
              <code class="n">CHILDREN</code><code class="o">))).</code><code class="na">build</code><code class="o">()</code>
      <code class="o">.</code><code class="na">statement</code><code class="o">());</code>
  <code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre>  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code>
  <code class="nf">newReleaseAndRegularStatement</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="s">"Rental record for Steve\n"</code> <code class="o">+</code>
      <code class="s">"\tGodfather 4 9.0\n"</code> <code class="o">+</code>
      <code class="s">"\tScarface 3.5\n"</code> <code class="o">+</code>
      <code class="s">"Amount owed is 12.5\n"</code> <code class="o">+</code>
      <code class="s">"You earned 3 frequent renter points"</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="s">"Steve"</code><code class="o">).</code><code class="na">w</code><code class="o">(</code>
        <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">NEW_RELEASE</code><code class="o">)),</code>
        <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
          <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="s">"Scarface"</code><code class="o">).</code><code class="na">w</code><code class="o">(</code>
            <code class="n">REGULAR</code><code class="o">))).</code><code class="na">build</code><code class="o">()</code>
      <code class="o">.</code><code class="na">statement</code><code class="o">());</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">noRentalsHtmlStatement</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="s">"&lt;h1&gt;Rental record for &lt;em&gt;David"</code> <code class="o">+</code>
      <code class="s">"&lt;/em&gt;&lt;/h1&gt;\n&lt;p&gt;Amount owed is "</code> <code class="o">+</code>
      <code class="s">"&lt;em&gt;0.0&lt;/em&gt;&lt;/p&gt;\n&lt;p&gt;"</code> <code class="o">+</code>
      <code class="s">"You earned &lt;em&gt;0 frequent renter "</code> <code class="o">+</code>
      <code class="s">"points&lt;/em&gt;&lt;/p&gt;"</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="s">"David"</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">htmlStatement</code><code class="o">());</code>
  <code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre>  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">oneNewReleaseHtmlStatement</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="s">"&lt;h1&gt;Rental record for &lt;em&gt;John&lt;/em&gt;"</code> <code class="o">+</code>
      <code class="s">"&lt;/h1&gt;\n&lt;p&gt;Godfather 4 9.0&lt;/p&gt;\n"</code> <code class="o">+</code>
      <code class="s">"&lt;p&gt;Amount owed is &lt;em&gt;9.0&lt;/em&gt;&lt;/p&gt;"</code> <code class="o">+</code>
      <code class="s">"\n&lt;p&gt;You earned &lt;em&gt;2 frequent "</code> <code class="o">+</code>
      <code class="s">"renter points&lt;/em&gt;&lt;/p&gt;"</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="s">"John"</code><code class="o">).</code><code class="na">w</code><code class="o">(</code>
        <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
          <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">NEW_RELEASE</code><code class="o">))).</code><code class="na">build</code><code class="o">()</code>
      <code class="o">.</code><code class="na">htmlStatement</code><code class="o">());</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">allRentalTypesHtmlStatement</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="s">"&lt;h1&gt;Rental record for &lt;em&gt;Pat&lt;/em&gt;"</code> <code class="o">+</code>
      <code class="s">"&lt;/h1&gt;\n&lt;p&gt;Godfather 4 9.0&lt;/p&gt;\n&lt;p&gt;"</code> <code class="o">+</code>
      <code class="s">"Scarface 3.5&lt;/p&gt;\n&lt;p&gt;Lion King 1.5"</code> <code class="o">+</code>
      <code class="s">"&lt;/p&gt;\n&lt;p&gt;Amount owed is &lt;em&gt;14.0"</code> <code class="o">+</code>
      <code class="s">"&lt;/em&gt;&lt;/p&gt;\n&lt;p&gt;You earned &lt;em&gt;4 "</code> <code class="o">+</code>
      <code class="s">"frequent renter points&lt;/em&gt;&lt;/p&gt;"</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="s">"Pat"</code><code class="o">).</code><code class="na">w</code><code class="o">(</code>
        <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">NEW_RELEASE</code><code class="o">)),</code>
        <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="s">"Scarface"</code><code class="o">).</code><code class="na">w</code><code class="o">(</code>
                     <code class="n">REGULAR</code><code class="o">)),</code>
        <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="s">"Lion King"</code><code class="o">).</code><code class="na">w</code><code class="o">(</code>
                     <code class="n">CHILDREN</code><code class="o">))).</code><code class="na">build</code><code class="o">()</code>
      <code class="o">.</code><code class="na">htmlStatement</code><code class="o">());</code>
  <code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre>  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code>
  <code class="nf">newReleaseAndRegularHtmlStatement</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="s">"&lt;h1&gt;Rental record for &lt;em&gt;Steve"</code> <code class="o">+</code>
      <code class="s">"&lt;/em&gt;&lt;/h1&gt;\n&lt;p&gt;Godfather 4 9.0&lt;/p&gt;"</code> <code class="o">+</code>
      <code class="s">"\n&lt;p&gt;Scarface 3.5&lt;/p&gt;\n&lt;p&gt;Amount "</code> <code class="o">+</code>
      <code class="s">"owed is &lt;em&gt;12.5&lt;/em&gt;&lt;/p&gt;\n&lt;p&gt;You "</code> <code class="o">+</code>
      <code class="s">"earned &lt;em&gt;3 frequent renter points"</code> <code class="o">+</code>
      <code class="s">"&lt;/em&gt;&lt;/p&gt;"</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="s">"Steve"</code><code class="o">).</code><code class="na">w</code><code class="o">(</code>
        <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">NEW_RELEASE</code><code class="o">)),</code>
        <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="s">"Scarface"</code><code class="o">).</code><code class="na">w</code><code class="o">(</code>
                     <code class="n">REGULAR</code><code class="o">))).</code><code class="na">build</code><code class="o">()</code>
      <code class="o">.</code><code class="na">htmlStatement</code><code class="o">());</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="o">(</code><code class="n">expected</code><code class="o">=</code><code class="n">IllegalArgumentException</code><code class="o">.</code><code class="na">class</code><code class="o">)</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">invalidTitle</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
      <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">UNKNOWN</code><code class="o">))).</code><code class="na">build</code><code class="o">();</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">MovieTest</code> <code class="o">{</code>
  <code class="nd">@Test</code>
  <code class="o">(</code><code class="n">expected</code><code class="o">=</code><code class="n">IllegalArgumentException</code><code class="o">.</code><code class="na">class</code><code class="o">)</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">invalidTitle</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">UNKNOWN</code><code class="o">).</code><code class="na">build</code><code class="o">();</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">CustomerTest</code> <code class="o">{</code>
  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">noRentalsStatement</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="s">"Rental record for Jim\nAmount owed"</code> <code class="o">+</code>
      <code class="s">" is 0.0\n"</code> <code class="o">+</code>
      <code class="s">"You earned 0 frequent renter points"</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">build</code><code class="o">().</code><code class="na">statement</code><code class="o">());</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">oneRentalStatement</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="s">"Rental record for Jim\n\tnull\n"</code> <code class="o">+</code>
      <code class="s">"Amount owed is 0.0\n"</code> <code class="o">+</code>
      <code class="s">"You earned 0 frequent renter points"</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
<code class="uil">        <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">)).</code><code class="na">build</code><code class="o">()</code>
</code>      <code class="o">.</code><code class="na">statement</code><code class="o">());</code>
  <code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre>  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">twoRentalsStatement</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="s">"Rental record for Jim\n\t"</code> <code class="o">+</code>
      <code class="s">"null\n\tnull\n"</code> <code class="o">+</code>
      <code class="s">"Amount owed is 0.0\n"</code> <code class="o">+</code>
      <code class="s">"You earned 0 frequent renter points"</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
<code class="uil">        <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">),</code>
</code><code class="uil">        <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">)).</code><code class="na">build</code><code class="o">()</code>
</code>      <code class="o">.</code><code class="na">statement</code><code class="o">());</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">CustomerTest</code> <code class="o">{</code>
  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">noRentalsCharge</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mf">0.0</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">build</code><code class="o">().</code><code class="na">getTotalCharge</code><code class="o">(),</code>
      <code class="mi">0</code><code class="o">);</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">twoRentalsCharge</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">Rental</code> <code class="n">rental</code> <code class="o">=</code> <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">when</code><code class="o">(</code><code class="n">rental</code><code class="o">.</code><code class="na">getCharge</code><code class="o">()).</code><code class="na">thenReturn</code><code class="o">(</code><code class="mf">2.0</code><code class="o">);</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mf">4.0</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">rental</code><code class="o">,</code>
        <code class="n">rental</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">getTotalCharge</code><code class="o">(),</code>
      <code class="mi">0</code><code class="o">);</code>
  <code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre>  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">threeRentalsCharge</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">Rental</code> <code class="n">rental</code> <code class="o">=</code> <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">when</code><code class="o">(</code><code class="n">rental</code><code class="o">.</code><code class="na">getCharge</code><code class="o">()).</code><code class="na">thenReturn</code><code class="o">(</code><code class="mf">2.0</code><code class="o">);</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mf">6.0</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">rental</code><code class="o">,</code>
        <code class="n">rental</code><code class="o">,</code>
        <code class="n">rental</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">getTotalCharge</code><code class="o">(),</code>
      <code class="mi">0</code><code class="o">);</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">noRentalsPoints</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mi">0</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">build</code><code class="o">().</code><code class="na">getTotalPoints</code><code class="o">());</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">twoRentalsPoints</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">Rental</code> <code class="n">rental</code> <code class="o">=</code> <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">when</code><code class="o">(</code><code class="n">rental</code><code class="o">.</code><code class="na">getPoints</code><code class="o">()).</code><code class="na">thenReturn</code><code class="o">(</code><code class="mi">2</code><code class="o">);</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mi">4</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">rental</code><code class="o">,</code>
        <code class="n">rental</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">getTotalPoints</code><code class="o">());</code>
  <code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre>  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">threeRentalsPoints</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">Rental</code> <code class="n">rental</code> <code class="o">=</code> <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">when</code><code class="o">(</code><code class="n">rental</code><code class="o">.</code><code class="na">getPoints</code><code class="o">()).</code><code class="na">thenReturn</code><code class="o">(</code><code class="mi">2</code><code class="o">);</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mi">6</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">rental</code><code class="o">,</code>
        <code class="n">rental</code><code class="o">,</code>
        <code class="n">rental</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">getTotalPoints</code><code class="o">());</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">MovieTest</code> <code class="o">{</code>
  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">getChargeForChildrens</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mf">1.5</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">CHILDREN</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">getCharge</code><code class="o">(</code><code class="mi">1</code><code class="o">),</code>
      <code class="mi">0</code><code class="o">);</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mf">1.5</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">CHILDREN</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">getCharge</code><code class="o">(</code><code class="mi">2</code><code class="o">),</code>
      <code class="mi">0</code><code class="o">);</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mf">1.5</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">CHILDREN</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">getCharge</code><code class="o">(</code><code class="mi">3</code><code class="o">),</code>
      <code class="mi">0</code><code class="o">);</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mf">3.0</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">CHILDREN</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">getCharge</code><code class="o">(</code><code class="mi">4</code><code class="o">),</code>
      <code class="mi">0</code><code class="o">);</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mf">4.5</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">CHILDREN</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">getCharge</code><code class="o">(</code><code class="mi">5</code><code class="o">),</code>
      <code class="mi">0</code><code class="o">);</code>
  <code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre>  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">getChargeForNewRelease</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mf">3.0</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">NEW_RELEASE</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">getCharge</code><code class="o">(</code><code class="mi">1</code><code class="o">),</code>
      <code class="mi">0</code><code class="o">);</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mf">6.0</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">NEW_RELEASE</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">getCharge</code><code class="o">(</code><code class="mi">2</code><code class="o">),</code>
      <code class="mi">0</code><code class="o">);</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mf">9.0</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">NEW_RELEASE</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">getCharge</code><code class="o">(</code><code class="mi">3</code><code class="o">),</code>
      <code class="mi">0</code><code class="o">);</code>
  <code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre>  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">getChargeForRegular</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mf">2.0</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">REGULAR</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">getCharge</code><code class="o">(</code><code class="mi">1</code><code class="o">),</code>
      <code class="mi">0</code><code class="o">);</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mf">2.0</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">REGULAR</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">getCharge</code><code class="o">(</code><code class="mi">2</code><code class="o">),</code>
      <code class="mi">0</code><code class="o">);</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mf">3.5</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">REGULAR</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">getCharge</code><code class="o">(</code><code class="mi">3</code><code class="o">),</code>
      <code class="mi">0</code><code class="o">);</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mf">5.0</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">REGULAR</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">getCharge</code><code class="o">(</code><code class="mi">4</code><code class="o">),</code>
      <code class="mi">0</code><code class="o">);</code>
  <code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre>  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">getPointsForChildrens</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mi">1</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">CHILDREN</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">getPoints</code><code class="o">(</code><code class="mi">1</code><code class="o">));</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mi">1</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">CHILDREN</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">getPoints</code><code class="o">(</code><code class="mi">2</code><code class="o">));</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">getPointsForNewRelease</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mi">1</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">NEW_RELEASE</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">getPoints</code><code class="o">(</code><code class="mi">1</code><code class="o">));</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mi">2</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">NEW_RELEASE</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">getPoints</code><code class="o">(</code><code class="mi">2</code><code class="o">));</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mi">2</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">NEW_RELEASE</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">getPoints</code><code class="o">(</code><code class="mi">3</code><code class="o">));</code>
  <code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre>  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">getPointsForRegular</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mi">1</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">REGULAR</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">getPoints</code><code class="o">(</code><code class="mi">1</code><code class="o">));</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mi">1</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">REGULAR</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">getPoints</code><code class="o">(</code><code class="mi">2</code><code class="o">));</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">CustomerTest</code> <code class="o">{</code>
  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">allRentalTypesStatement</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="s">"Rental record for Pat\n"</code> <code class="o">+</code>
      <code class="s">"\tGodfather 4 9.0\n"</code> <code class="o">+</code>
      <code class="s">"\tScarface 3.5\n"</code> <code class="o">+</code>
      <code class="s">"\tLion King 1.5\n"</code> <code class="o">+</code>
      <code class="s">"Amount owed is 14.0\n"</code> <code class="o">+</code>
      <code class="s">"You earned 4 frequent renter points"</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="s">"Pat"</code><code class="o">).</code><code class="na">w</code><code class="o">(</code>
        <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">NEW_RELEASE</code><code class="o">)),</code>
        <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="s">"Scarface"</code><code class="o">).</code><code class="na">w</code><code class="o">(</code>
                     <code class="n">REGULAR</code><code class="o">)),</code>
        <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="s">"Lion King"</code><code class="o">).</code><code class="na">w</code><code class="o">(</code>
                     <code class="n">CHILDREN</code><code class="o">)))</code>
      <code class="o">.</code><code class="na">build</code><code class="o">().</code><code class="na">statement</code><code class="o">());</code>
  <code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre>  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">allRentalTypesHtmlStatement</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="s">"&lt;h1&gt;Rental record for "</code> <code class="o">+</code>
      <code class="s">"&lt;em&gt;Pat&lt;/em&gt;&lt;/h1&gt;\n"</code> <code class="o">+</code>
      <code class="s">"&lt;p&gt;Godfather 4 9.0&lt;/p&gt;\n"</code> <code class="o">+</code>
      <code class="s">"&lt;p&gt;Scarface 3.5&lt;/p&gt;\n"</code> <code class="o">+</code>
      <code class="s">"&lt;p&gt;Lion King 1.5&lt;/p&gt;\n"</code> <code class="o">+</code>
      <code class="s">"&lt;p&gt;Amount owed is "</code> <code class="o">+</code>
      <code class="s">"&lt;em&gt;14.0&lt;/em&gt;&lt;/p&gt;\n&lt;p&gt;"</code> <code class="o">+</code>
      <code class="s">"You earned &lt;em&gt;4 frequent "</code> <code class="o">+</code>
      <code class="s">"renter points&lt;/em&gt;&lt;/p&gt;"</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="s">"Pat"</code><code class="o">).</code><code class="na">w</code><code class="o">(</code>
        <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">NEW_RELEASE</code><code class="o">)),</code>
        <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="s">"Scarface"</code><code class="o">).</code><code class="na">w</code><code class="o">(</code>
                     <code class="n">REGULAR</code><code class="o">)),</code>
        <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="s">"Lion King"</code><code class="o">).</code><code class="na">w</code><code class="o">(</code>
                     <code class="n">CHILDREN</code><code class="o">)))</code>
      <code class="o">.</code><code class="na">build</code><code class="o">().</code><code class="na">htmlStatement</code><code class="o">());</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="n">JUnit</code> <code class="n">version</code> <code class="mf">4.11</code>
<code class="o">..........</code><code class="na">E</code><code class="o">...</code>
<code class="n">There</code> <code class="n">was</code> <code class="mi">1</code> <code class="nl">failure:</code>
<code class="mi">1</code><code class="o">)</code> <code class="n">twoRentalsCharge</code><code class="o">(</code><code class="n">solitary</code><code class="o">.</code><code class="na">CustomerTest</code><code class="o">)</code>
<code class="n">java</code><code class="o">.</code><code class="na">lang</code><code class="o">.</code><code class="na">AssertionError</code><code class="o">:</code> <code class="nl">expected:</code><code class="o">&lt;</code><code class="mf">6.0</code><code class="o">&gt;</code> <code class="n">but</code> <code class="nl">was:</code><code class="err">\</code>
<code class="o">&lt;</code><code class="mf">4.0</code><code class="o">&gt;</code>

<code class="n">FAILURES</code><code class="o">!!!</code>
<code class="n">Tests</code> <code class="nl">run:</code> <code class="mi">13</code><code class="o">,</code>  <code class="nl">Failures:</code> <code class="mi">1</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">CustomerTest</code> <code class="o">{</code>
  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">getName</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="s">"John"</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="s">"John"</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">getName</code><code class="o">());</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">noRentalsStatement</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="s">"Rental record for Jim\nAmount owed"</code> <code class="o">+</code>
      <code class="s">" is 0.0\nYou earned 0 frequent "</code> <code class="o">+</code>
      <code class="s">"renter points"</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">build</code><code class="o">().</code><code class="na">statement</code><code class="o">());</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">oneRentalStatement</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="s">"Rental record for Jim\n\tnull\n"</code> <code class="o">+</code>
      <code class="s">"Amount owed is 0.0\n"</code> <code class="o">+</code>
      <code class="s">"You earned 0 frequent renter points"</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">)).</code><code class="na">build</code><code class="o">()</code>
      <code class="o">.</code><code class="na">statement</code><code class="o">());</code>
  <code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre>  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">twoRentalsStatement</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="s">"Rental record for Jim\n\tnull\n"</code> <code class="o">+</code>
      <code class="s">"\tnull\nAmount owed is 0.0\n"</code> <code class="o">+</code>
      <code class="s">"You earned 0 frequent renter points"</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">),</code>
        <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">)).</code><code class="na">build</code><code class="o">()</code>
      <code class="o">.</code><code class="na">statement</code><code class="o">());</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">noRentalsHtmlStatement</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="s">"&lt;h1&gt;Rental record for &lt;em&gt;Jim&lt;/em&gt;"</code> <code class="o">+</code>
      <code class="s">"&lt;/h1&gt;\n&lt;p&gt;Amount owed is &lt;em&gt;0.0"</code> <code class="o">+</code>
      <code class="s">"&lt;/em&gt;&lt;/p&gt;\n&lt;p&gt;You earned &lt;em&gt;0 "</code> <code class="o">+</code>
      <code class="s">"frequent renter points&lt;/em&gt;&lt;/p&gt;"</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">build</code><code class="o">().</code><code class="na">htmlStatement</code><code class="o">());</code>
  <code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre>  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">oneRentalHtmlStatement</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">Rental</code> <code class="n">rental</code> <code class="o">=</code> <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="s">"&lt;h1&gt;Rental record for &lt;em&gt;Jim&lt;/em&gt;"</code> <code class="o">+</code>
      <code class="s">"&lt;/h1&gt;\n&lt;p&gt;null&lt;/p&gt;\n&lt;p&gt;Amount owed "</code> <code class="o">+</code>
      <code class="s">"is &lt;em&gt;0.0&lt;/em&gt;&lt;/p&gt;\n&lt;p&gt;You earned "</code> <code class="o">+</code>
      <code class="s">"&lt;em&gt;0 frequent renter points&lt;/em&gt;"</code> <code class="o">+</code>
      <code class="s">"&lt;/p&gt;"</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">)).</code><code class="na">build</code><code class="o">()</code>
      <code class="o">.</code><code class="na">htmlStatement</code><code class="o">());</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">twoRentalsHtmlStatement</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="s">"&lt;h1&gt;Rental record for &lt;em&gt;Jim&lt;/em&gt;"</code> <code class="o">+</code>
      <code class="s">"&lt;/h1&gt;\n&lt;p&gt;null&lt;/p&gt;\n&lt;p&gt;null&lt;/p&gt;\n"</code> <code class="o">+</code>
      <code class="s">"&lt;p&gt;Amount owed is &lt;em&gt;0.0&lt;/em&gt;&lt;/p&gt;"</code> <code class="o">+</code>
      <code class="s">"\n&lt;p&gt;You earned &lt;em&gt;0 frequent"</code> <code class="o">+</code>
      <code class="s">" renter points&lt;/em&gt;&lt;/p&gt;"</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">),</code>
        <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">)).</code><code class="na">build</code><code class="o">()</code>
      <code class="o">.</code><code class="na">htmlStatement</code><code class="o">());</code>
  <code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre>  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">noRentalsCharge</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mf">0.0</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">build</code><code class="o">().</code><code class="na">getTotalCharge</code><code class="o">(),</code>
      <code class="mi">0</code><code class="o">);</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">twoRentalsCharge</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">Rental</code> <code class="n">rental</code> <code class="o">=</code> <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">when</code><code class="o">(</code><code class="n">rental</code><code class="o">.</code><code class="na">getCharge</code><code class="o">()).</code><code class="na">thenReturn</code><code class="o">(</code><code class="mf">2.0</code><code class="o">);</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mf">6.0</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">rental</code><code class="o">,</code>
        <code class="n">rental</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">getTotalCharge</code><code class="o">(),</code>
      <code class="mi">0</code><code class="o">);</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">threeRentalsCharge</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">Rental</code> <code class="n">rental</code> <code class="o">=</code> <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">when</code><code class="o">(</code><code class="n">rental</code><code class="o">.</code><code class="na">getCharge</code><code class="o">()).</code><code class="na">thenReturn</code><code class="o">(</code><code class="mf">2.0</code><code class="o">);</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mf">6.0</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">rental</code><code class="o">,</code>
        <code class="n">rental</code><code class="o">,</code>
        <code class="n">rental</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">getTotalCharge</code><code class="o">(),</code>
      <code class="mi">0</code><code class="o">);</code>
  <code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre>  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">noRentalsPoints</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mi">0</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">build</code><code class="o">().</code><code class="na">getTotalPoints</code><code class="o">());</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">twoRentalsPoints</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">Rental</code> <code class="n">rental</code> <code class="o">=</code> <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">when</code><code class="o">(</code><code class="n">rental</code><code class="o">.</code><code class="na">getPoints</code><code class="o">()).</code><code class="na">thenReturn</code><code class="o">(</code><code class="mi">2</code><code class="o">);</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mi">4</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">rental</code><code class="o">,</code>
        <code class="n">rental</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">getTotalPoints</code><code class="o">());</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">threeRentalsPoints</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">Rental</code> <code class="n">rental</code> <code class="o">=</code> <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">when</code><code class="o">(</code><code class="n">rental</code><code class="o">.</code><code class="na">getPoints</code><code class="o">()).</code><code class="na">thenReturn</code><code class="o">(</code><code class="mi">2</code><code class="o">);</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mi">6</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">rental</code><code class="o">,</code>
        <code class="n">rental</code><code class="o">,</code>
        <code class="n">rental</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">getTotalPoints</code><code class="o">());</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">CustomerTest</code> <code class="o">{</code>
  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">allRentalTypesStatement</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="s">"Rental record for Pat\n"</code> <code class="o">+</code>
      <code class="s">"\tGodfather 4 9.0\n"</code> <code class="o">+</code>
      <code class="s">"\tScarface 3.5\n"</code> <code class="o">+</code>
      <code class="s">"\tLion King 1.5\n"</code> <code class="o">+</code>
      <code class="s">"Amount owed is 14.0\n"</code> <code class="o">+</code>
      <code class="s">"You earned 4 frequent renter points"</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="s">"Pat"</code><code class="o">).</code><code class="na">w</code><code class="o">(</code>
        <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">NEW_RELEASE</code><code class="o">)),</code>
        <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="s">"Scarface"</code><code class="o">).</code><code class="na">w</code><code class="o">(</code>
                     <code class="n">REGULAR</code><code class="o">)),</code>
        <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="s">"Lion King"</code><code class="o">).</code><code class="na">w</code><code class="o">(</code>
                     <code class="n">CHILDREN</code><code class="o">)))</code>
      <code class="o">.</code><code class="na">build</code><code class="o">().</code><code class="na">statement</code><code class="o">());</code>
  <code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre>  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">allRentalTypesHtmlStatement</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="s">"&lt;h1&gt;Rental record for &lt;em&gt;Pat"</code> <code class="o">+</code>
      <code class="s">"&lt;/em&gt;&lt;/h1&gt;\n"</code> <code class="o">+</code>
      <code class="s">"&lt;p&gt;Godfather 4 9.0&lt;/p&gt;\n"</code> <code class="o">+</code>
      <code class="s">"&lt;p&gt;Scarface 3.5&lt;/p&gt;\n"</code> <code class="o">+</code>
      <code class="s">"&lt;p&gt;Lion King 1.5&lt;/p&gt;\n"</code> <code class="o">+</code>
      <code class="s">"&lt;p&gt;Amount owed is "</code> <code class="o">+</code>
      <code class="s">"&lt;em&gt;14.0&lt;/em&gt;&lt;/p&gt;\n&lt;p&gt;"</code> <code class="o">+</code>
      <code class="s">"You earned &lt;em&gt;4 "</code> <code class="o">+</code>
      <code class="s">"frequent renter points&lt;/em&gt;&lt;/p&gt;"</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="s">"Pat"</code><code class="o">).</code><code class="na">w</code><code class="o">(</code>
        <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">NEW_RELEASE</code><code class="o">)),</code>
        <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="s">"Scarface"</code><code class="o">).</code><code class="na">w</code><code class="o">(</code>
                     <code class="n">REGULAR</code><code class="o">)),</code>
        <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="s">"Lion King"</code><code class="o">).</code><code class="na">w</code><code class="o">(</code>
                     <code class="n">CHILDREN</code><code class="o">)))</code>
      <code class="o">.</code><code class="na">build</code><code class="o">().</code><code class="na">htmlStatement</code><code class="o">());</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">Customer</code> <code class="o">{</code>

  <code class="kd">private</code> <code class="n">String</code> <code class="n">name</code><code class="o">;</code>
  <code class="kd">private</code> <code class="n">List</code><code class="o">&lt;</code><code class="n">Rental</code><code class="o">&gt;</code> <code class="n">rentals</code>
  <code class="o">=</code> <code class="k">new</code> <code class="n">ArrayList</code><code class="o">&lt;</code><code class="n">Rental</code><code class="o">&gt;();</code>

  <code class="kd">public</code> <code class="nf">Customer</code><code class="o">(</code><code class="n">String</code> <code class="n">name</code><code class="o">)</code> <code class="o">{</code>
    <code class="k">this</code><code class="o">.</code><code class="na">name</code> <code class="o">=</code> <code class="n">name</code><code class="o">;</code>
  <code class="o">}</code>

  <code class="kd">public</code> <code class="n">String</code> <code class="nf">getName</code><code class="o">()</code> <code class="o">{</code>
    <code class="k">return</code> <code class="n">name</code><code class="o">;</code>
  <code class="o">}</code>

  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">addRental</code><code class="o">(</code><code class="n">Rental</code> <code class="n">rental</code><code class="o">)</code> <code class="o">{</code>
    <code class="n">rentals</code><code class="o">.</code><code class="na">add</code><code class="o">(</code><code class="n">rental</code><code class="o">);</code>
  <code class="o">}</code>

  <code class="kd">public</code> <code class="n">String</code> <code class="nf">statement</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">String</code> <code class="n">result</code> <code class="o">=</code>
      <code class="s">"Rental record for "</code> <code class="o">+</code>
      <code class="n">getName</code><code class="o">()</code> <code class="o">+</code> <code class="s">"\n"</code><code class="o">;</code>
    <code class="k">for</code> <code class="o">(</code><code class="n">Rental</code> <code class="n">rental</code> <code class="o">:</code> <code class="n">rentals</code><code class="o">)</code>
      <code class="n">result</code> <code class="o">+=</code>
        <code class="s">"\t"</code> <code class="o">+</code> <code class="n">rental</code><code class="o">.</code><code class="na">getLineItem</code><code class="o">()</code> <code class="o">+</code> <code class="s">"\n"</code><code class="o">;</code>
    <code class="n">result</code> <code class="o">+=</code> <code class="s">"Amount owed is "</code> <code class="o">+</code>
      <code class="n">getTotalCharge</code><code class="o">()</code> <code class="o">+</code> <code class="s">"\n"</code> <code class="o">+</code>
      <code class="s">"You earned "</code> <code class="o">+</code> <code class="n">getTotalPoints</code><code class="o">()</code> <code class="o">+</code>
      <code class="s">" frequent renter points"</code><code class="o">;</code>
    <code class="k">return</code> <code class="n">result</code><code class="o">;</code>
  <code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre>  <code class="kd">public</code> <code class="n">String</code> <code class="nf">htmlStatement</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">String</code> <code class="n">result</code> <code class="o">=</code>
      <code class="s">"&lt;h1&gt;Rental record for &lt;em&gt;"</code> <code class="o">+</code>
      <code class="n">getName</code><code class="o">()</code> <code class="o">+</code> <code class="s">"&lt;/em&gt;&lt;/h1&gt;\n"</code><code class="o">;</code>
    <code class="k">for</code> <code class="o">(</code><code class="n">Rental</code> <code class="n">rental</code> <code class="o">:</code> <code class="n">rentals</code><code class="o">)</code>
      <code class="n">result</code> <code class="o">+=</code>
        <code class="s">"&lt;p&gt;"</code> <code class="o">+</code> <code class="n">rental</code><code class="o">.</code><code class="na">getLineItem</code><code class="o">()</code> <code class="o">+</code>
        <code class="s">"&lt;/p&gt;\n"</code><code class="o">;</code>
    <code class="n">result</code> <code class="o">+=</code>
      <code class="s">"&lt;p&gt;Amount owed is &lt;em&gt;"</code> <code class="o">+</code>
      <code class="n">getTotalCharge</code><code class="o">()</code> <code class="o">+</code> <code class="s">"&lt;/em&gt;&lt;/p&gt;\n"</code> <code class="o">+</code>
      <code class="s">"&lt;p&gt;You earned &lt;em&gt;"</code> <code class="o">+</code>
      <code class="n">getTotalPoints</code><code class="o">()</code> <code class="o">+</code>
      <code class="s">" frequent renter points&lt;/em&gt;&lt;/p&gt;"</code><code class="o">;</code>
    <code class="k">return</code> <code class="n">result</code><code class="o">;</code>

  <code class="o">}</code>

  <code class="kd">public</code> <code class="kt">double</code> <code class="nf">getTotalCharge</code><code class="o">()</code> <code class="o">{</code>
    <code class="kt">double</code> <code class="n">total</code> <code class="o">=</code> <code class="mi">0</code><code class="o">;</code>
    <code class="k">for</code> <code class="o">(</code><code class="n">Rental</code> <code class="n">rental</code> <code class="o">:</code> <code class="n">rentals</code><code class="o">)</code>
      <code class="n">total</code> <code class="o">+=</code> <code class="n">rental</code><code class="o">.</code><code class="na">getCharge</code><code class="o">();</code>
    <code class="k">return</code> <code class="n">total</code><code class="o">;</code>
  <code class="o">}</code>

  <code class="kd">public</code> <code class="kt">int</code> <code class="nf">getTotalPoints</code><code class="o">()</code> <code class="o">{</code>
    <code class="kt">int</code> <code class="n">total</code> <code class="o">=</code> <code class="mi">0</code><code class="o">;</code>
    <code class="k">for</code> <code class="o">(</code><code class="n">Rental</code> <code class="n">rental</code> <code class="o">:</code> <code class="n">rentals</code><code class="o">)</code>
      <code class="n">total</code> <code class="o">+=</code> <code class="n">rental</code><code class="o">.</code><code class="na">getPoints</code><code class="o">();</code>
    <code class="k">return</code> <code class="n">total</code><code class="o">;</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">MovieTest</code> <code class="o">{</code>
  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">getChargeForChildrens</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mf">1.5</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">CHILDREN</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">getCharge</code><code class="o">(</code><code class="mi">1</code><code class="o">),</code>
      <code class="mi">0</code><code class="o">);</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mf">1.5</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">CHILDREN</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">getCharge</code><code class="o">(</code><code class="mi">2</code><code class="o">),</code>
      <code class="mi">0</code><code class="o">);</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mf">1.5</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">CHILDREN</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">getCharge</code><code class="o">(</code><code class="mi">3</code><code class="o">),</code>
      <code class="mi">0</code><code class="o">);</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mf">3.0</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">CHILDREN</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">getCharge</code><code class="o">(</code><code class="mi">4</code><code class="o">),</code>
      <code class="mi">0</code><code class="o">);</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mf">4.5</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">CHILDREN</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">getCharge</code><code class="o">(</code><code class="mi">5</code><code class="o">),</code>
      <code class="mi">0</code><code class="o">);</code>
  <code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre>  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">getChargeForNewRelease</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mf">3.0</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">NEW_RELEASE</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">getCharge</code><code class="o">(</code><code class="mi">1</code><code class="o">),</code>
      <code class="mi">0</code><code class="o">);</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mf">6.0</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">NEW_RELEASE</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">getCharge</code><code class="o">(</code><code class="mi">2</code><code class="o">),</code>
      <code class="mi">0</code><code class="o">);</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mf">9.0</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">NEW_RELEASE</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">getCharge</code><code class="o">(</code><code class="mi">3</code><code class="o">),</code>
      <code class="mi">0</code><code class="o">);</code>
  <code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre>  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">getChargeForRegular</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mf">2.0</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">REGULAR</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">getCharge</code><code class="o">(</code><code class="mi">1</code><code class="o">),</code>
      <code class="mi">0</code><code class="o">);</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mf">2.0</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">REGULAR</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">getCharge</code><code class="o">(</code><code class="mi">2</code><code class="o">),</code>
      <code class="mi">0</code><code class="o">);</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mf">3.5</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">REGULAR</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">getCharge</code><code class="o">(</code><code class="mi">3</code><code class="o">),</code>
      <code class="mi">0</code><code class="o">);</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mf">5.0</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">REGULAR</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">getCharge</code><code class="o">(</code><code class="mi">4</code><code class="o">),</code>
      <code class="mi">0</code><code class="o">);</code>
  <code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre>  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">getPointsForChildrens</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mi">1</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">CHILDREN</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">getPoints</code><code class="o">(</code><code class="mi">1</code><code class="o">));</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mi">1</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">CHILDREN</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">getPoints</code><code class="o">(</code><code class="mi">2</code><code class="o">));</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">getPointsForNewRelease</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mi">1</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">NEW_RELEASE</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">getPoints</code><code class="o">(</code><code class="mi">1</code><code class="o">));</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mi">2</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">NEW_RELEASE</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">getPoints</code><code class="o">(</code><code class="mi">2</code><code class="o">));</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mi">2</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">NEW_RELEASE</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">getPoints</code><code class="o">(</code><code class="mi">3</code><code class="o">));</code>
  <code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre>  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">getPointsForRegular</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mi">1</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">REGULAR</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">getPoints</code><code class="o">(</code><code class="mi">1</code><code class="o">));</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mi">1</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">REGULAR</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">getPoints</code><code class="o">(</code><code class="mi">2</code><code class="o">));</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="o">(</code><code class="n">expected</code><code class="o">=</code><code class="n">IllegalArgumentException</code><code class="o">.</code><code class="na">class</code><code class="o">)</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">invalidTitle</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">UNKNOWN</code><code class="o">).</code><code class="na">build</code><code class="o">();</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">Movie</code> <code class="o">{</code>

  <code class="kd">public</code> <code class="kd">enum</code> <code class="n">Type</code> <code class="o">{</code>
    <code class="n">REGULAR</code><code class="o">,</code> <code class="n">NEW_RELEASE</code><code class="o">,</code> <code class="n">CHILDREN</code><code class="o">,</code> <code class="n">UNKNOWN</code><code class="o">;</code>
  <code class="o">}</code>

  <code class="kd">private</code> <code class="n">String</code> <code class="n">title</code><code class="o">;</code>
  <code class="n">Price</code> <code class="n">price</code><code class="o">;</code>

  <code class="kd">public</code> <code class="nf">Movie</code><code class="o">(</code>
    <code class="n">String</code> <code class="n">title</code><code class="o">,</code> <code class="n">Movie</code><code class="o">.</code><code class="na">Type</code> <code class="n">priceCode</code><code class="o">)</code> <code class="o">{</code>
    <code class="k">this</code><code class="o">.</code><code class="na">title</code> <code class="o">=</code> <code class="n">title</code><code class="o">;</code>
    <code class="n">setPriceCode</code><code class="o">(</code><code class="n">priceCode</code><code class="o">);</code>
  <code class="o">}</code>

  <code class="kd">public</code> <code class="n">String</code> <code class="nf">getTitle</code><code class="o">()</code> <code class="o">{</code>
    <code class="k">return</code> <code class="n">title</code><code class="o">;</code>
  <code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre>  <code class="kd">private</code> <code class="kt">void</code> <code class="nf">setPriceCode</code><code class="o">(</code>
    <code class="n">Movie</code><code class="o">.</code><code class="na">Type</code> <code class="n">priceCode</code><code class="o">)</code> <code class="o">{</code>
    <code class="k">switch</code> <code class="o">(</code><code class="n">priceCode</code><code class="o">)</code> <code class="o">{</code>
    <code class="k">case</code> <code class="nl">CHILDREN:</code>
      <code class="n">price</code> <code class="o">=</code> <code class="k">new</code> <code class="n">ChildrensPrice</code><code class="o">();</code>
      <code class="k">break</code><code class="o">;</code>
    <code class="k">case</code> <code class="nl">NEW_RELEASE:</code>
      <code class="n">price</code> <code class="o">=</code> <code class="k">new</code> <code class="n">NewReleasePrice</code><code class="o">();</code>
      <code class="k">break</code><code class="o">;</code>
    <code class="k">case</code> <code class="nl">REGULAR:</code>
      <code class="n">price</code> <code class="o">=</code> <code class="k">new</code> <code class="n">RegularPrice</code><code class="o">();</code>
      <code class="k">break</code><code class="o">;</code>
    <code class="k">default</code><code class="o">:</code>
      <code class="k">throw</code> <code class="k">new</code> <code class="nf">IllegalArgumentException</code><code class="o">(</code>
        <code class="s">"invalid price code"</code><code class="o">);</code>
    <code class="o">}</code>
  <code class="o">}</code>

  <code class="kd">public</code> <code class="kt">double</code> <code class="nf">getCharge</code><code class="o">(</code><code class="kt">int</code> <code class="n">daysRented</code><code class="o">)</code> <code class="o">{</code>
    <code class="k">return</code> <code class="n">price</code><code class="o">.</code><code class="na">getCharge</code><code class="o">(</code><code class="n">daysRented</code><code class="o">);</code>
  <code class="o">}</code>

  <code class="kd">public</code> <code class="kt">int</code> <code class="nf">getPoints</code><code class="o">(</code><code class="kt">int</code> <code class="n">daysRented</code><code class="o">)</code> <code class="o">{</code>
    <code class="k">return</code> <code class="n">price</code><code class="o">.</code><code class="na">getPoints</code><code class="o">(</code><code class="n">daysRented</code><code class="o">);</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">RentalTest</code> <code class="o">{</code>
  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code>
  <code class="nf">isStartedIfInStoreStateBased</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">Movie</code> <code class="n">movie</code> <code class="o">=</code> <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">build</code><code class="o">();</code>
    <code class="n">Rental</code> <code class="n">rental</code> <code class="o">=</code>
      <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">movie</code><code class="o">).</code><code class="na">build</code><code class="o">();</code>
    <code class="n">Store</code> <code class="n">store</code> <code class="o">=</code> <code class="n">a</code><code class="o">.</code><code class="na">store</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">movie</code><code class="o">).</code><code class="na">build</code><code class="o">();</code>
    <code class="n">rental</code><code class="o">.</code><code class="na">start</code><code class="o">(</code><code class="n">store</code><code class="o">);</code>
    <code class="n">assertTrue</code><code class="o">(</code><code class="n">rental</code><code class="o">.</code><code class="na">isStarted</code><code class="o">());</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mi">0</code><code class="o">,</code> <code class="n">store</code><code class="o">.</code><code class="na">getAvailability</code><code class="o">(</code><code class="n">movie</code><code class="o">));</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code>
  <code class="nf">doesNotStartIfNotAvailableStateBased</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">Movie</code> <code class="n">movie</code> <code class="o">=</code> <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">build</code><code class="o">();</code>
    <code class="n">Rental</code> <code class="n">rental</code> <code class="o">=</code> <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">.</code><code class="na">build</code><code class="o">();</code>
    <code class="n">Store</code> <code class="n">store</code> <code class="o">=</code> <code class="n">a</code><code class="o">.</code><code class="na">store</code><code class="o">.</code><code class="na">build</code><code class="o">();</code>
    <code class="n">rental</code><code class="o">.</code><code class="na">start</code><code class="o">(</code><code class="n">store</code><code class="o">);</code>
    <code class="n">assertFalse</code><code class="o">(</code><code class="n">rental</code><code class="o">.</code><code class="na">isStarted</code><code class="o">());</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mi">0</code><code class="o">,</code> <code class="n">store</code><code class="o">.</code><code class="na">getAvailability</code><code class="o">(</code><code class="n">movie</code><code class="o">));</code>
  <code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre>  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code>
  <code class="nf">isStartedIfInStoreInteractionBased</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">Movie</code> <code class="n">movie</code> <code class="o">=</code> <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">build</code><code class="o">();</code>
    <code class="n">Rental</code> <code class="n">rental</code> <code class="o">=</code>
      <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">movie</code><code class="o">).</code><code class="na">build</code><code class="o">();</code>
    <code class="n">Store</code> <code class="n">store</code> <code class="o">=</code> <code class="n">mock</code><code class="o">(</code><code class="n">Store</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">when</code><code class="o">(</code><code class="n">store</code><code class="o">.</code><code class="na">getAvailability</code><code class="o">(</code><code class="n">movie</code><code class="o">))</code>
      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="mi">1</code><code class="o">);</code>
    <code class="n">rental</code><code class="o">.</code><code class="na">start</code><code class="o">(</code><code class="n">store</code><code class="o">);</code>
    <code class="n">assertTrue</code><code class="o">(</code><code class="n">rental</code><code class="o">.</code><code class="na">isStarted</code><code class="o">());</code>
    <code class="n">verify</code><code class="o">(</code><code class="n">store</code><code class="o">).</code><code class="na">remove</code><code class="o">(</code><code class="n">movie</code><code class="o">);</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code>
  <code class="nf">notStartedIfUnavailableInteractionBased</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">Rental</code> <code class="n">rental</code> <code class="o">=</code> <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">.</code><code class="na">build</code><code class="o">();</code>
    <code class="n">Store</code> <code class="n">store</code> <code class="o">=</code> <code class="n">mock</code><code class="o">(</code><code class="n">Store</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">rental</code><code class="o">.</code><code class="na">start</code><code class="o">(</code><code class="n">store</code><code class="o">);</code>
    <code class="n">assertFalse</code><code class="o">(</code><code class="n">rental</code><code class="o">.</code><code class="na">isStarted</code><code class="o">());</code>
    <code class="n">verify</code><code class="o">(</code>
      <code class="n">store</code><code class="o">,</code> <code class="n">never</code><code class="o">()).</code><code class="na">remove</code><code class="o">(</code>
        <code class="n">any</code><code class="o">(</code><code class="n">Movie</code><code class="o">.</code><code class="na">class</code><code class="o">));</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">Rental</code> <code class="o">{</code>

  <code class="n">Movie</code> <code class="n">movie</code><code class="o">;</code>
  <code class="kd">private</code> <code class="kt">int</code> <code class="n">daysRented</code><code class="o">;</code>
  <code class="kd">private</code> <code class="kt">boolean</code> <code class="n">started</code><code class="o">;</code>

  <code class="kd">public</code> <code class="nf">Rental</code><code class="o">(</code>
    <code class="n">Movie</code> <code class="n">movie</code><code class="o">,</code> <code class="kt">int</code> <code class="n">daysRented</code><code class="o">)</code> <code class="o">{</code>
    <code class="k">this</code><code class="o">.</code><code class="na">movie</code> <code class="o">=</code> <code class="n">movie</code><code class="o">;</code>
    <code class="k">this</code><code class="o">.</code><code class="na">daysRented</code> <code class="o">=</code> <code class="n">daysRented</code><code class="o">;</code>
  <code class="o">}</code>

  <code class="kd">public</code> <code class="n">Movie</code> <code class="nf">getMovie</code><code class="o">()</code> <code class="o">{</code>
    <code class="k">return</code> <code class="n">movie</code><code class="o">;</code>
  <code class="o">}</code>

  <code class="kd">public</code> <code class="kt">int</code> <code class="nf">getDaysRented</code><code class="o">()</code> <code class="o">{</code>
    <code class="k">return</code> <code class="n">daysRented</code><code class="o">;</code>
  <code class="o">}</code>

  <code class="kd">public</code> <code class="kt">double</code> <code class="nf">getCharge</code><code class="o">()</code> <code class="o">{</code>
    <code class="k">return</code> <code class="n">movie</code><code class="o">.</code><code class="na">getCharge</code><code class="o">(</code><code class="n">daysRented</code><code class="o">);</code>
  <code class="o">}</code>

  <code class="kd">public</code> <code class="kt">int</code> <code class="nf">getPoints</code><code class="o">()</code> <code class="o">{</code>
    <code class="k">return</code> <code class="n">movie</code><code class="o">.</code><code class="na">getPoints</code><code class="o">(</code><code class="n">daysRented</code><code class="o">);</code>
  <code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre>  <code class="kd">public</code> <code class="n">String</code> <code class="nf">getLineItem</code><code class="o">()</code> <code class="o">{</code>
    <code class="k">return</code>
      <code class="n">movie</code><code class="o">.</code><code class="na">getTitle</code><code class="o">()</code> <code class="o">+</code> <code class="s">" "</code> <code class="o">+</code> <code class="n">getCharge</code><code class="o">();</code>
  <code class="o">}</code>

  <code class="kd">public</code> <code class="kt">boolean</code> <code class="nf">isStarted</code><code class="o">()</code> <code class="o">{</code>
    <code class="k">return</code> <code class="n">started</code><code class="o">;</code>
  <code class="o">}</code>

  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">start</code><code class="o">(</code><code class="n">Store</code> <code class="n">store</code><code class="o">)</code> <code class="o">{</code>
    <code class="k">if</code> <code class="o">(</code><code class="n">store</code><code class="o">.</code><code class="na">getAvailability</code><code class="o">(</code><code class="n">movie</code><code class="o">)</code> <code class="o">&gt;</code> <code class="mi">0</code><code class="o">)</code> <code class="o">{</code>
      <code class="n">store</code><code class="o">.</code><code class="na">remove</code><code class="o">(</code><code class="n">movie</code><code class="o">);</code>
      <code class="k">this</code><code class="o">.</code><code class="na">started</code> <code class="o">=</code> <code class="kc">true</code><code class="o">;</code>
    <code class="o">}</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">Store</code> <code class="o">{</code>
  <code class="kd">private</code> <code class="n">Map</code><code class="o">&lt;</code><code class="n">Movie</code><code class="o">,</code> <code class="n">Integer</code><code class="o">&gt;</code> <code class="n">movies</code><code class="o">;</code>

  <code class="kd">public</code> <code class="nf">Store</code><code class="o">(</code><code class="n">Map</code><code class="o">&lt;</code><code class="n">Movie</code><code class="o">,</code> <code class="n">Integer</code><code class="o">&gt;</code> <code class="n">movies</code><code class="o">)</code> <code class="o">{</code>
    <code class="k">this</code><code class="o">.</code><code class="na">movies</code> <code class="o">=</code> <code class="n">movies</code><code class="o">;</code>
  <code class="o">}</code>

  <code class="kd">public</code> <code class="kt">int</code> <code class="nf">getAvailability</code><code class="o">(</code><code class="n">Movie</code> <code class="n">movie</code><code class="o">)</code> <code class="o">{</code>
    <code class="k">if</code> <code class="o">(</code><code class="kc">null</code> <code class="o">==</code> <code class="n">movies</code><code class="o">.</code><code class="na">get</code><code class="o">(</code><code class="n">movie</code><code class="o">))</code>
      <code class="k">return</code> <code class="mi">0</code><code class="o">;</code>
    <code class="k">return</code> <code class="n">movies</code><code class="o">.</code><code class="na">get</code><code class="o">(</code><code class="n">movie</code><code class="o">);</code>
  <code class="o">}</code>

  <code class="kd">public</code> <code class="kt">boolean</code> <code class="nf">getAvailability</code><code class="o">(</code>
    <code class="n">Movie</code> <code class="n">movie</code><code class="o">,</code> <code class="kt">int</code> <code class="n">quantity</code><code class="o">)</code> <code class="o">{</code>
    <code class="k">if</code> <code class="o">(</code><code class="kc">null</code> <code class="o">==</code> <code class="n">movies</code><code class="o">.</code><code class="na">get</code><code class="o">(</code><code class="n">movie</code><code class="o">))</code>
      <code class="k">return</code> <code class="kc">false</code><code class="o">;</code>
    <code class="k">return</code> <code class="n">movies</code><code class="o">.</code><code class="na">get</code><code class="o">(</code><code class="n">movie</code><code class="o">)</code> <code class="o">&gt;=</code> <code class="n">quantity</code><code class="o">;</code>
  <code class="o">}</code>

  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">remove</code><code class="o">(</code><code class="n">Movie</code> <code class="n">movie</code><code class="o">)</code> <code class="o">{</code>
    <code class="k">if</code> <code class="o">(</code><code class="kc">null</code> <code class="o">==</code> <code class="n">movies</code><code class="o">.</code><code class="na">get</code><code class="o">(</code><code class="n">movie</code><code class="o">))</code>
      <code class="k">return</code><code class="o">;</code>
    <code class="n">Integer</code> <code class="n">count</code> <code class="o">=</code> <code class="n">movies</code><code class="o">.</code><code class="na">get</code><code class="o">(</code><code class="n">movie</code><code class="o">);</code>
    <code class="n">movies</code><code class="o">.</code><code class="na">put</code><code class="o">(</code><code class="n">movie</code><code class="o">,</code> <code class="o">--</code><code class="n">count</code><code class="o">);</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">MovieTest</code> <code class="o">{</code>
  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">getChargeForChildrens</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mf">1.5</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">CHILDREN</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">getCharge</code><code class="o">(</code><code class="mi">1</code><code class="o">),</code>
      <code class="mi">0</code><code class="o">);</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mf">1.5</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">CHILDREN</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">getCharge</code><code class="o">(</code><code class="mi">2</code><code class="o">),</code>
      <code class="mi">0</code><code class="o">);</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mf">1.5</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">CHILDREN</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">getCharge</code><code class="o">(</code><code class="mi">3</code><code class="o">),</code>
      <code class="mi">0</code><code class="o">);</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mf">3.0</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">CHILDREN</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">getCharge</code><code class="o">(</code><code class="mi">4</code><code class="o">),</code>
      <code class="mi">0</code><code class="o">);</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mf">4.5</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">CHILDREN</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">getCharge</code><code class="o">(</code><code class="mi">5</code><code class="o">),</code>
      <code class="mi">0</code><code class="o">);</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="n">JUnit</code> <code class="n">version</code> <code class="mf">4.11</code>
<code class="o">.</code><code class="na">E</code>
<code class="n">There</code> <code class="n">was</code> <code class="mi">1</code> <code class="nl">failure:</code>
<code class="mi">1</code><code class="o">)</code> <code class="n">getChargeForChildrens</code><code class="o">(</code><code class="n">solitary</code><code class="o">.</code><code class="na">MovieTest</code><code class="o">)</code>
<code class="n">java</code><code class="o">.</code><code class="na">lang</code><code class="o">.</code><code class="na">AssertionError</code><code class="o">:</code> <code class="nl">expected:</code><code class="o">&lt;</code><code class="mf">1.5</code><code class="o">&gt;</code> <code class="n">but</code> <code class="nl">was:</code><code class="err">\</code>
<code class="o">&lt;</code><code class="mf">3.0</code><code class="o">&gt;</code>

<code class="n">FAILURES</code><code class="o">!!!</code>
<code class="n">Tests</code> <code class="nl">run:</code> <code class="mi">1</code><code class="o">,</code>  <code class="nl">Failures:</code> <code class="mi">1</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">ChildrensPrice</code> <code class="kd">extends</code> <code class="n">Price</code> <code class="o">{</code>

  <code class="nd">@Override</code>
  <code class="kd">public</code> <code class="kt">double</code> <code class="nf">getCharge</code><code class="o">(</code><code class="kt">int</code> <code class="n">daysRented</code><code class="o">)</code> <code class="o">{</code>
    <code class="kt">double</code> <code class="n">amount</code> <code class="o">=</code> <code class="mf">1.5</code><code class="o">;</code>
<code class="uil">    <code class="k">if</code> <code class="o">(</code><code class="n">daysRented</code> <code class="o">&gt;</code> <code class="mi">2</code><code class="o">)</code> <code class="c1">// *was 3*</code>
</code><code class="uil">      <code class="n">amount</code> <code class="o">+=</code> <code class="o">(</code><code class="n">daysRented</code> <code class="o">-</code> <code class="mi">2</code><code class="o">)</code> <code class="o">*</code> <code class="mf">1.5</code><code class="o">;</code>
</code>    <code class="k">return</code> <code class="n">amount</code><code class="o">;</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="n">JUnit</code> <code class="n">version</code> <code class="mf">4.11</code>
<code class="o">...</code><code class="na">E</code><code class="o">.</code><code class="na">E</code><code class="o">.</code><code class="na">E</code>
<code class="n">There</code> <code class="n">were</code> <code class="mi">3</code> <code class="nl">failures:</code>
<code class="mi">1</code><code class="o">)</code> <code class="n">getChargeForChildrens3Day</code><code class="o">(</code><code class="n">solitary</code><code class="o">.</code><code class="na">MovieTest</code><code class="o">)</code>
<code class="n">java</code><code class="o">.</code><code class="na">lang</code><code class="o">.</code><code class="na">AssertionError</code><code class="o">:</code> <code class="nl">expected:</code><code class="o">&lt;</code><code class="mf">1.5</code><code class="o">&gt;</code> <code class="n">but</code> <code class="nl">was:</code><code class="err">\</code>
<code class="o">&lt;</code><code class="mf">3.0</code><code class="o">&gt;</code>
<code class="mi">2</code><code class="o">)</code> <code class="n">getChargeForChildrens4Day</code><code class="o">(</code><code class="n">solitary</code><code class="o">.</code><code class="na">MovieTest</code><code class="o">)</code>
<code class="n">java</code><code class="o">.</code><code class="na">lang</code><code class="o">.</code><code class="na">AssertionError</code><code class="o">:</code> <code class="nl">expected:</code><code class="o">&lt;</code><code class="mf">3.0</code><code class="o">&gt;</code> <code class="n">but</code> <code class="nl">was:</code><code class="err">\</code>
<code class="o">&lt;</code><code class="mf">4.5</code><code class="o">&gt;</code>
<code class="mi">3</code><code class="o">)</code> <code class="n">getChargeForChildrens5Day</code><code class="o">(</code><code class="n">solitary</code><code class="o">.</code><code class="na">MovieTest</code><code class="o">)</code>
<code class="n">java</code><code class="o">.</code><code class="na">lang</code><code class="o">.</code><code class="na">AssertionError</code><code class="o">:</code> <code class="nl">expected:</code><code class="o">&lt;</code><code class="mf">4.5</code><code class="o">&gt;</code> <code class="n">but</code> <code class="nl">was:</code><code class="err">\</code>
<code class="o">&lt;</code><code class="mf">6.0</code><code class="o">&gt;</code>

<code class="n">FAILURES</code><code class="o">!!!</code>
<code class="n">Tests</code> <code class="nl">run:</code> <code class="mi">5</code><code class="o">,</code>  <code class="nl">Failures:</code> <code class="mi">3</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">MovieTest</code> <code class="o">{</code>
  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">getChargeForChildrens1Day</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mf">1.5</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">CHILDREN</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">getCharge</code><code class="o">(</code><code class="mi">1</code><code class="o">),</code>
      <code class="mi">0</code><code class="o">);</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">getChargeForChildrens2Day</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mf">1.5</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">CHILDREN</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">getCharge</code><code class="o">(</code><code class="mi">2</code><code class="o">),</code>
      <code class="mi">0</code><code class="o">);</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">getChargeForChildrens3Day</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mf">1.5</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">CHILDREN</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">getCharge</code><code class="o">(</code><code class="mi">3</code><code class="o">),</code>
      <code class="mi">0</code><code class="o">);</code>
  <code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre>  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">getChargeForChildrens4Day</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mf">3.0</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">CHILDREN</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">getCharge</code><code class="o">(</code><code class="mi">4</code><code class="o">),</code>
      <code class="mi">0</code><code class="o">);</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">getChargeForChildrens5Day</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mf">4.5</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">CHILDREN</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">getCharge</code><code class="o">(</code><code class="mi">5</code><code class="o">),</code>
      <code class="mi">0</code><code class="o">);</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">RentalTest</code> <code class="o">{</code>
  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">rentalIsStartedIfInStore</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">Movie</code> <code class="n">movie</code> <code class="o">=</code> <code class="n">mock</code><code class="o">(</code><code class="n">Movie</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">Rental</code> <code class="n">rental</code> <code class="o">=</code>
      <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">movie</code><code class="o">).</code><code class="na">build</code><code class="o">();</code>
    <code class="n">Store</code> <code class="n">store</code> <code class="o">=</code> <code class="n">mock</code><code class="o">(</code><code class="n">Store</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">when</code><code class="o">(</code><code class="n">store</code><code class="o">.</code><code class="na">getAvailability</code><code class="o">(</code><code class="n">movie</code><code class="o">))</code>
      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="mi">1</code><code class="o">);</code>
    <code class="n">rental</code><code class="o">.</code><code class="na">start</code><code class="o">(</code><code class="n">store</code><code class="o">);</code>
    <code class="n">assertTrue</code><code class="o">(</code><code class="n">rental</code><code class="o">.</code><code class="na">isStarted</code><code class="o">());</code>
    <code class="n">verify</code><code class="o">(</code><code class="n">store</code><code class="o">).</code><code class="na">remove</code><code class="o">(</code><code class="n">movie</code><code class="o">);</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="n">JUnit</code> <code class="n">version</code> <code class="mf">4.11</code>
<code class="o">.</code><code class="na">E</code>
<code class="n">There</code> <code class="n">was</code> <code class="mi">1</code> <code class="nl">failure:</code>
<code class="mi">1</code><code class="o">)</code> <code class="n">rentalIsStartedIfInStore</code><code class="o">(</code><code class="n">solitary</code><code class="o">.</code><code class="na">RentalTest</code><code class="o">)</code>
<code class="n">java</code><code class="o">.</code><code class="na">lang</code><code class="o">.</code><code class="na">AssertionError</code>

<code class="n">FAILURES</code><code class="o">!!!</code>
<code class="n">Tests</code> <code class="nl">run:</code> <code class="mi">1</code><code class="o">,</code>  <code class="nl">Failures:</code> <code class="mi">1</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">RentalTest</code> <code class="o">{</code>
  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">rentalIsStartedIfInStore</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">Movie</code> <code class="n">movie</code> <code class="o">=</code> <code class="n">mock</code><code class="o">(</code><code class="n">Movie</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">Rental</code> <code class="n">rental</code> <code class="o">=</code>
      <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">movie</code><code class="o">).</code><code class="na">build</code><code class="o">();</code>
    <code class="n">Store</code> <code class="n">store</code> <code class="o">=</code> <code class="n">mock</code><code class="o">(</code><code class="n">Store</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
<code class="uil">    <code class="n">when</code><code class="o">(</code><code class="n">store</code><code class="o">.</code><code class="na">getAvailability</code><code class="o">(</code><code class="n">movie</code><code class="o">,</code> <code class="mi">1</code><code class="o">))</code>
</code><code class="uil">      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="kc">true</code><code class="o">);</code>
</code>    <code class="n">rental</code><code class="o">.</code><code class="na">start</code><code class="o">(</code><code class="n">store</code><code class="o">);</code>
    <code class="n">assertTrue</code><code class="o">(</code><code class="n">rental</code><code class="o">.</code><code class="na">isStarted</code><code class="o">());</code>
    <code class="n">verify</code><code class="o">(</code><code class="n">store</code><code class="o">).</code><code class="na">remove</code><code class="o">(</code><code class="n">movie</code><code class="o">);</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">RentalTest</code> <code class="o">{</code>
  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">rentalIsStartedIfInStore</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">Rental</code> <code class="n">rental</code> <code class="o">=</code> <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">.</code><code class="na">build</code><code class="o">();</code>
    <code class="n">Store</code> <code class="n">store</code> <code class="o">=</code> <code class="n">mock</code><code class="o">(</code><code class="n">Store</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">when</code><code class="o">(</code><code class="n">store</code>
         <code class="o">.</code><code class="na">getAvailability</code><code class="o">(</code><code class="n">any</code><code class="o">(</code><code class="n">Movie</code><code class="o">.</code><code class="na">class</code><code class="o">)))</code>
      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="mi">1</code><code class="o">);</code>
    <code class="n">rental</code><code class="o">.</code><code class="na">start</code><code class="o">(</code><code class="n">store</code><code class="o">);</code>
    <code class="n">assertTrue</code><code class="o">(</code><code class="n">rental</code><code class="o">.</code><code class="na">isStarted</code><code class="o">());</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">StoreTest</code> <code class="o">{</code>
  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">storeWithNoAvailability</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">Store</code> <code class="n">store</code> <code class="o">=</code> <code class="n">a</code><code class="o">.</code><code class="na">store</code><code class="o">.</code><code class="na">build</code><code class="o">();</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mi">0</code><code class="o">,</code>
      <code class="n">store</code><code class="o">.</code><code class="na">getAvailability</code><code class="o">(</code>
        <code class="n">mock</code><code class="o">(</code><code class="n">Movie</code><code class="o">.</code><code class="na">class</code><code class="o">)));</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">storeWithAvailability</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">Movie</code> <code class="n">movie</code> <code class="o">=</code> <code class="n">mock</code><code class="o">(</code><code class="n">Movie</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">Store</code> <code class="n">store</code> <code class="o">=</code>
      <code class="n">a</code><code class="o">.</code><code class="na">store</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">movie</code><code class="o">,</code> <code class="n">movie</code><code class="o">).</code><code class="na">build</code><code class="o">();</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mi">2</code><code class="o">,</code> <code class="n">store</code><code class="o">.</code><code class="na">getAvailability</code><code class="o">(</code><code class="n">movie</code><code class="o">));</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code>
  <code class="nf">storeWithRemovedAvailability</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">Movie</code> <code class="n">movie</code> <code class="o">=</code> <code class="n">mock</code><code class="o">(</code><code class="n">Movie</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">Store</code> <code class="n">store</code> <code class="o">=</code>
      <code class="n">a</code><code class="o">.</code><code class="na">store</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">movie</code><code class="o">,</code> <code class="n">movie</code><code class="o">).</code><code class="na">build</code><code class="o">();</code>
    <code class="n">store</code><code class="o">.</code><code class="na">remove</code><code class="o">(</code><code class="n">movie</code><code class="o">);</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mi">1</code><code class="o">,</code> <code class="n">store</code><code class="o">.</code><code class="na">getAvailability</code><code class="o">(</code><code class="n">movie</code><code class="o">));</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">RentalTest</code> <code class="o">{</code>
  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code>
  <code class="nf">storeAvailabilityIsModifiedOnRental</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">Movie</code> <code class="n">movie</code> <code class="o">=</code> <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">build</code><code class="o">();</code>
    <code class="n">Rental</code> <code class="n">rental</code> <code class="o">=</code>
      <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">movie</code><code class="o">).</code><code class="na">build</code><code class="o">();</code>
    <code class="n">Store</code> <code class="n">store</code> <code class="o">=</code>
      <code class="n">a</code><code class="o">.</code><code class="na">store</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">movie</code><code class="o">,</code> <code class="n">movie</code><code class="o">).</code><code class="na">build</code><code class="o">();</code>
    <code class="n">rental</code><code class="o">.</code><code class="na">start</code><code class="o">(</code><code class="n">store</code><code class="o">);</code>
    <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">.</code><code class="na">build</code><code class="o">().</code><code class="na">start</code><code class="o">(</code><code class="n">store</code><code class="o">);</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mi">1</code><code class="o">,</code> <code class="n">store</code><code class="o">.</code><code class="na">getAvailability</code><code class="o">(</code><code class="n">movie</code><code class="o">));</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">Customer</code> <code class="o">{</code>

  <code class="kd">private</code> <code class="n">String</code> <code class="n">name</code><code class="o">;</code>
  <code class="kd">private</code> <code class="n">List</code><code class="o">&lt;</code><code class="n">Rental</code><code class="o">&gt;</code> <code class="n">rentals</code> <code class="o">=</code>
    <code class="k">new</code> <code class="n">ArrayList</code><code class="o">&lt;</code><code class="n">Rental</code><code class="o">&gt;();</code>

  <code class="kd">public</code> <code class="nf">Customer</code><code class="o">(</code><code class="n">String</code> <code class="n">name</code><code class="o">)</code> <code class="o">{</code>
    <code class="k">this</code><code class="o">.</code><code class="na">name</code> <code class="o">=</code> <code class="n">name</code><code class="o">;</code>
  <code class="o">}</code>

  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">addRental</code><code class="o">(</code><code class="n">Rental</code> <code class="n">rental</code><code class="o">)</code> <code class="o">{</code>
    <code class="n">rentals</code><code class="o">.</code><code class="na">add</code><code class="o">(</code><code class="n">rental</code><code class="o">);</code>
  <code class="o">}</code>

<code class="uil">  <code class="kd">public</code> <code class="n">String</code> <code class="nf">recentRentals</code><code class="o">()</code> <code class="o">{</code>
</code><code class="uil">    <code class="n">String</code> <code class="n">result</code> <code class="o">=</code> <code class="s">"Recent rentals:"</code><code class="o">;</code>
</code><code class="uil">    <code class="k">for</code> <code class="o">(</code><code class="kt">int</code> <code class="n">i</code><code class="o">=</code><code class="mi">0</code><code class="o">;</code>
</code><code class="uil">         <code class="n">i</code> <code class="o">&lt;</code> <code class="n">rentals</code><code class="o">.</code><code class="na">size</code><code class="o">()</code> <code class="o">&amp;&amp;</code> <code class="n">i</code> <code class="o">&lt;</code> <code class="mi">3</code><code class="o">;</code>
</code><code class="uil">         <code class="n">i</code><code class="o">++)</code> <code class="o">{</code>
</code><code class="uil">      <code class="n">result</code> <code class="o">+=</code> <code class="s">"\n"</code> <code class="o">+</code>
</code><code class="uil">        <code class="n">rentals</code><code class="o">.</code><code class="na">get</code><code class="o">(</code><code class="n">i</code><code class="o">).</code><code class="na">getMovie</code><code class="o">(</code>
</code><code class="uil">          <code class="kc">true</code><code class="o">).</code><code class="na">getTitle</code><code class="o">(</code>
</code><code class="uil">            <code class="s">"%s starring %s %s"</code><code class="o">,</code> <code class="mi">2</code><code class="o">);</code>
</code><code class="uil">    <code class="o">}</code>
</code><code class="uil">    <code class="k">return</code> <code class="n">result</code><code class="o">;</code>
</code><code class="uil">  <code class="o">}</code>
</code><code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">CustomerTest</code> <code class="o">{</code>
  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">recentRentalsWith2Rentals</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">Movie</code> <code class="n">godfather</code> <code class="o">=</code> <code class="n">mock</code><code class="o">(</code><code class="n">Movie</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">when</code><code class="o">(</code><code class="n">godfather</code>
         <code class="o">.</code><code class="na">getTitle</code><code class="o">(</code><code class="s">"%s starring %s %s"</code><code class="o">,</code> <code class="mi">2</code><code class="o">))</code>
      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="s">"Godfather 4"</code><code class="o">);</code>
    <code class="n">Rental</code> <code class="n">godfatherRental</code> <code class="o">=</code>
      <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">when</code><code class="o">(</code><code class="n">godfatherRental</code><code class="o">.</code><code class="na">getMovie</code><code class="o">(</code><code class="kc">true</code><code class="o">))</code>
      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="n">godfather</code><code class="o">);</code>
    <code class="n">Movie</code> <code class="n">lionKing</code> <code class="o">=</code> <code class="n">mock</code><code class="o">(</code><code class="n">Movie</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">when</code><code class="o">(</code><code class="n">lionKing</code>
         <code class="o">.</code><code class="na">getTitle</code><code class="o">(</code><code class="s">"%s starring %s %s"</code><code class="o">,</code> <code class="mi">2</code><code class="o">))</code>
      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="s">"Lion King"</code><code class="o">);</code>
    <code class="n">Rental</code> <code class="n">lionKingRental</code> <code class="o">=</code>
      <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">when</code><code class="o">(</code><code class="n">lionKingRental</code><code class="o">.</code><code class="na">getMovie</code><code class="o">(</code><code class="kc">true</code><code class="o">))</code>
      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="n">lionKing</code><code class="o">);</code>

    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="s">"Recent rentals:\nGodfather 4\n"</code> <code class="o">+</code>
      <code class="s">"Lion King"</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">godfatherRental</code><code class="o">,</code> <code class="n">lionKingRental</code><code class="o">)</code>
      <code class="o">.</code><code class="na">build</code><code class="o">().</code><code class="na">recentRentals</code><code class="o">());</code>
  <code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre>  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">recentRentalsWith3Rentals</code><code class="o">()</code> <code class="o">{</code>
    <code class="c1">// same structure as above, with</code>
    <code class="c1">// 8 more lines of mocking code,</code>
    <code class="c1">// 25% longer expected value, and</code>
    <code class="c1">// 2 lines of adding rentals to customer</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">recentRentalsWith4Rentals</code><code class="o">()</code> <code class="o">{</code>
    <code class="c1">// same structure as above, with</code>
    <code class="c1">// 16 more lines of mocking code,</code>
    <code class="c1">// 25% longer expected value, and</code>
    <code class="c1">// 2 lines of adding rentals to customer</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">CustomerTest</code> <code class="o">{</code>
  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">recentRentalsWith2Rentals</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">Movie</code> <code class="n">godfather</code> <code class="o">=</code> <code class="n">mock</code><code class="o">(</code><code class="n">Movie</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">when</code><code class="o">(</code>
      <code class="n">godfather</code><code class="o">.</code><code class="na">getTitle</code><code class="o">(</code>
<code class="uil">        <code class="n">anyString</code><code class="o">(),</code> <code class="n">anyInt</code><code class="o">()))</code>
</code>      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="s">"Godfather 4"</code><code class="o">);</code>
    <code class="n">Rental</code> <code class="n">godfatherRental</code> <code class="o">=</code>
      <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">when</code><code class="o">(</code>
<code class="uil">      <code class="n">godfatherRental</code><code class="o">.</code><code class="na">getMovie</code><code class="o">(</code><code class="n">anyBoolean</code><code class="o">()))</code>
</code>      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="n">godfather</code><code class="o">);</code>
    <code class="n">Movie</code> <code class="n">lionKing</code> <code class="o">=</code> <code class="n">mock</code><code class="o">(</code><code class="n">Movie</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">when</code><code class="o">(</code>
      <code class="n">lionKing</code><code class="o">.</code><code class="na">getTitle</code><code class="o">(</code>
<code class="uil">        <code class="n">anyString</code><code class="o">(),</code> <code class="n">anyInt</code><code class="o">()))</code>
</code>      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="s">"Lion King"</code><code class="o">);</code>
    <code class="n">Rental</code> <code class="n">lionKingRental</code> <code class="o">=</code>
      <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">when</code><code class="o">(</code>
<code class="uil">      <code class="n">lionKingRental</code><code class="o">.</code><code class="na">getMovie</code><code class="o">(</code><code class="n">anyBoolean</code><code class="o">()))</code>
</code>      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="n">lionKing</code><code class="o">);</code>

    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="s">"Recent rentals:\nGodfather 4\n"</code> <code class="o">+</code>
      <code class="s">"Lion King"</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">godfatherRental</code><code class="o">,</code> <code class="n">lionKingRental</code><code class="o">)</code>
      <code class="o">.</code><code class="na">build</code><code class="o">().</code><code class="na">recentRentals</code><code class="o">());</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">CustomerTest</code> <code class="o">{</code>
  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">recentRentalsWith2Rentals</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">Movie</code> <code class="n">godfather</code> <code class="o">=</code> <code class="n">mock</code><code class="o">(</code><code class="n">Movie</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
<code class="uil">    <code class="n">Rental</code> <code class="n">godfatherRental</code> <code class="o">=</code>
</code><code class="uil">      <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
</code>    <code class="n">when</code><code class="o">(</code>
      <code class="n">godfatherRental</code><code class="o">.</code><code class="na">getMovie</code><code class="o">(</code><code class="n">anyBoolean</code><code class="o">()))</code>
      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="n">godfather</code><code class="o">);</code>
    <code class="n">Movie</code> <code class="n">lionKing</code> <code class="o">=</code> <code class="n">mock</code><code class="o">(</code><code class="n">Movie</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
<code class="uil">    <code class="n">Rental</code> <code class="n">lionKingRental</code> <code class="o">=</code>
</code><code class="uil">      <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
</code>    <code class="n">when</code><code class="o">(</code>
      <code class="n">lionKingRental</code><code class="o">.</code><code class="na">getMovie</code><code class="o">(</code><code class="n">anyBoolean</code><code class="o">()))</code>
      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="n">lionKing</code><code class="o">);</code>

    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="s">"Recent rentals:\nnull\nnull"</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">godfatherRental</code><code class="o">,</code> <code class="n">lionKingRental</code><code class="o">)</code>
      <code class="o">.</code><code class="na">build</code><code class="o">().</code><code class="na">recentRentals</code><code class="o">());</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">CustomerTest</code> <code class="o">{</code>
  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">recentRentalsWith2Rentals</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">Movie</code> <code class="n">movie</code> <code class="o">=</code> <code class="n">mock</code><code class="o">(</code><code class="n">Movie</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">Rental</code> <code class="n">rental</code> <code class="o">=</code> <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">when</code><code class="o">(</code><code class="n">rental</code><code class="o">.</code><code class="na">getMovie</code><code class="o">(</code><code class="n">anyBoolean</code><code class="o">()))</code>
      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="n">movie</code><code class="o">);</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="s">"Recent rentals:\nnull\nnull"</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">rental</code><code class="o">,</code> <code class="n">rental</code><code class="o">).</code><code class="na">build</code><code class="o">()</code>
      <code class="o">.</code><code class="na">recentRentals</code><code class="o">());</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">CustomerTest</code> <code class="o">{</code>
  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">recentRentalsWith2Rentals</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">Rental</code> <code class="n">rental</code> <code class="o">=</code> <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="s">"Recent rentals:\nnull\nnull"</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">rental</code><code class="o">,</code> <code class="n">rental</code><code class="o">).</code><code class="na">build</code><code class="o">()</code>
      <code class="o">.</code><code class="na">recentRentals</code><code class="o">());</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">Customer</code> <code class="o">{</code>

  <code class="kd">private</code> <code class="n">String</code> <code class="n">name</code><code class="o">;</code>
  <code class="kd">private</code> <code class="n">List</code><code class="o">&lt;</code><code class="n">Rental</code><code class="o">&gt;</code> <code class="n">rentals</code> <code class="o">=</code>
    <code class="k">new</code> <code class="n">ArrayList</code><code class="o">&lt;</code><code class="n">Rental</code><code class="o">&gt;();</code>

  <code class="kd">public</code> <code class="nf">Customer</code><code class="o">(</code><code class="n">String</code> <code class="n">name</code><code class="o">)</code> <code class="o">{</code>
    <code class="k">this</code><code class="o">.</code><code class="na">name</code> <code class="o">=</code> <code class="n">name</code><code class="o">;</code>
  <code class="o">}</code>

  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">addRental</code><code class="o">(</code><code class="n">Rental</code> <code class="n">rental</code><code class="o">)</code> <code class="o">{</code>
    <code class="n">rentals</code><code class="o">.</code><code class="na">add</code><code class="o">(</code><code class="n">rental</code><code class="o">);</code>
  <code class="o">}</code>

  <code class="kd">public</code> <code class="n">String</code> <code class="nf">recentRentals</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">String</code> <code class="n">result</code> <code class="o">=</code> <code class="s">"Recent rentals:"</code><code class="o">;</code>
    <code class="k">for</code> <code class="o">(</code><code class="kt">int</code> <code class="n">i</code><code class="o">=</code><code class="mi">0</code><code class="o">;</code>
         <code class="n">i</code> <code class="o">&lt;</code> <code class="n">rentals</code><code class="o">.</code><code class="na">size</code><code class="o">()</code> <code class="o">&amp;&amp;</code> <code class="n">i</code> <code class="o">&lt;</code> <code class="mi">3</code><code class="o">;</code>
         <code class="n">i</code><code class="o">++)</code> <code class="o">{</code>
      <code class="n">result</code> <code class="o">+=</code>
<code class="uil">        <code class="s">"\n"</code> <code class="o">+</code> <code class="n">rentals</code><code class="o">.</code><code class="na">get</code><code class="o">(</code><code class="n">i</code><code class="o">).</code><code class="na">getTitle</code><code class="o">();</code>
</code>    <code class="o">}</code>
    <code class="k">return</code> <code class="n">result</code><code class="o">;</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">CustomerTest</code> <code class="o">{</code>
  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">recentRentals0Rentals</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="s">"Recent rentals:"</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">build</code><code class="o">().</code><code class="na">recentRentals</code><code class="o">());</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">recentRentals1Rental</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="s">"Recent rentals:\nnull"</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">)).</code><code class="na">build</code><code class="o">()</code>
      <code class="o">.</code><code class="na">recentRentals</code><code class="o">());</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">recentRentals2Rental</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="s">"Recent rentals:\nnull\nnull"</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">),</code>
        <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">)).</code><code class="na">build</code><code class="o">()</code>
      <code class="o">.</code><code class="na">recentRentals</code><code class="o">());</code>
  <code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre>  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">recentRentals3Rental</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="s">"Recent rentals:\nnull\nnull\nnull"</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">),</code>
        <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">),</code>
        <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">)).</code><code class="na">build</code><code class="o">()</code>
      <code class="o">.</code><code class="na">recentRentals</code><code class="o">());</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">recentRentals4Rental</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="s">"Recent rentals:\nnull\nnull\nnull"</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">),</code>
        <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">),</code>
        <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">),</code>
        <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">)).</code><code class="na">build</code><code class="o">()</code>
      <code class="o">.</code><code class="na">recentRentals</code><code class="o">());</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">CustomerTest</code> <code class="o">{</code>
  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code>
  <code class="nf">recentRentalsWith3OrderedRentals</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="s">"Recent rentals:"</code><code class="o">+</code>
      <code class="s">"\nGodfather 4\nLion King\nScarface"</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="s">"Godfather 4"</code><code class="o">)),</code>
        <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="s">"Lion King"</code><code class="o">)),</code>
        <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="s">"Scarface"</code><code class="o">)),</code>
        <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="s">"Notebook"</code><code class="o">)))</code>
      <code class="o">.</code><code class="na">build</code><code class="o">().</code><code class="na">recentRentals</code><code class="o">());</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">CustomerTest</code> <code class="o">{</code>
  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">recentRentalsWith4Rentals</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">Movie</code> <code class="n">godfather</code> <code class="o">=</code> <code class="n">mock</code><code class="o">(</code><code class="n">Movie</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">when</code><code class="o">(</code><code class="n">godfather</code>
         <code class="o">.</code><code class="na">getTitle</code><code class="o">(</code><code class="s">"%s starring %s %s"</code><code class="o">,</code> <code class="mi">2</code><code class="o">))</code>
      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="s">"Godfather 4"</code><code class="o">);</code>
    <code class="n">Rental</code> <code class="n">godfatherRental</code> <code class="o">=</code>
      <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">when</code><code class="o">(</code><code class="n">godfatherRental</code><code class="o">.</code><code class="na">getMovie</code><code class="o">(</code><code class="kc">true</code><code class="o">))</code>
      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="n">godfather</code><code class="o">);</code>
    <code class="n">Movie</code> <code class="n">lionKing</code> <code class="o">=</code> <code class="n">mock</code><code class="o">(</code><code class="n">Movie</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">when</code><code class="o">(</code><code class="n">lionKing</code>
         <code class="o">.</code><code class="na">getTitle</code><code class="o">(</code><code class="s">"%s starring %s %s"</code><code class="o">,</code> <code class="mi">2</code><code class="o">))</code>
      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="s">"Lion King"</code><code class="o">);</code>
    <code class="n">Rental</code> <code class="n">lionKingRental</code> <code class="o">=</code>
      <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">when</code><code class="o">(</code><code class="n">lionKingRental</code><code class="o">.</code><code class="na">getMovie</code><code class="o">(</code><code class="kc">true</code><code class="o">))</code>
      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="n">lionKing</code><code class="o">);</code>
    <code class="n">Movie</code> <code class="n">scarface</code> <code class="o">=</code> <code class="n">mock</code><code class="o">(</code><code class="n">Movie</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">when</code><code class="o">(</code><code class="n">scarface</code>
         <code class="o">.</code><code class="na">getTitle</code><code class="o">(</code><code class="s">"%s starring %s %s"</code><code class="o">,</code> <code class="mi">2</code><code class="o">))</code>
      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="s">"Scarface"</code><code class="o">);</code>
    <code class="n">Rental</code> <code class="n">scarfaceRental</code> <code class="o">=</code>
      <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">when</code><code class="o">(</code><code class="n">scarfaceRental</code><code class="o">.</code><code class="na">getMovie</code><code class="o">(</code><code class="kc">true</code><code class="o">))</code>
      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="n">scarface</code><code class="o">);</code>
    <code class="n">Movie</code> <code class="n">notebook</code> <code class="o">=</code> <code class="n">mock</code><code class="o">(</code><code class="n">Movie</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">when</code><code class="o">(</code><code class="n">notebook</code>
         <code class="o">.</code><code class="na">getTitle</code><code class="o">(</code><code class="s">"%s starring %s %s"</code><code class="o">,</code> <code class="mi">2</code><code class="o">))</code>
      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="s">"Notebook"</code><code class="o">);</code>
    <code class="n">Rental</code> <code class="n">notebookRental</code> <code class="o">=</code>
      <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">when</code><code class="o">(</code><code class="n">notebookRental</code><code class="o">.</code><code class="na">getMovie</code><code class="o">(</code><code class="kc">true</code><code class="o">))</code>
      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="n">notebook</code><code class="o">);</code>

    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="s">"Recent rentals:"</code><code class="o">+</code>
      <code class="s">"\nGodfather 4\nLion King"</code> <code class="o">+</code>
      <code class="s">"\nScarface"</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">godfatherRental</code><code class="o">,</code> <code class="n">lionKingRental</code><code class="o">,</code>
        <code class="n">scarfaceRental</code><code class="o">,</code> <code class="n">notebookRental</code><code class="o">)</code>
      <code class="o">.</code><code class="na">build</code><code class="o">().</code><code class="na">recentRentals</code><code class="o">());</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">CustomerTest</code> <code class="o">{</code>
  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code>
  <code class="nf">recentRentalsWith3OrderedRentals</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="s">"Recent rentals:"</code><code class="o">+</code>
      <code class="s">"\nGodfather 4\nLion King\nScarface"</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="s">"Godfather 4"</code><code class="o">)),</code>
        <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="s">"Lion King"</code><code class="o">)),</code>
        <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="s">"Scarface"</code><code class="o">)),</code>
        <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="s">"Notebook"</code><code class="o">)))</code>
      <code class="o">.</code><code class="na">build</code><code class="o">().</code><code class="na">recentRentals</code><code class="o">());</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">CustomerTest</code> <code class="o">{</code>
  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">recentRentals0Rentals</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="s">"Recent rentals:"</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">build</code><code class="o">().</code><code class="na">recentRentals</code><code class="o">());</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">recentRentals1Rental</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="s">"Recent rentals:\nnull"</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">)).</code><code class="na">build</code><code class="o">()</code>
      <code class="o">.</code><code class="na">recentRentals</code><code class="o">());</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">recentRentals2Rental</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="s">"Recent rentals:\nnull\nnull"</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">),</code>
        <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">)).</code><code class="na">build</code><code class="o">()</code>
      <code class="o">.</code><code class="na">recentRentals</code><code class="o">());</code>
  <code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre>  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">recentRentals3Rental</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="s">"Recent rentals:\nnull\nnull\nnull"</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">),</code>
        <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">),</code>
        <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">)).</code><code class="na">build</code><code class="o">()</code>
      <code class="o">.</code><code class="na">recentRentals</code><code class="o">());</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">recentRentals4Rental</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="s">"Recent rentals:\nnull\nnull\nnull"</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">),</code>
        <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">),</code>
        <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">),</code>
        <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">)).</code><code class="na">build</code><code class="o">()</code>
      <code class="o">.</code><code class="na">recentRentals</code><code class="o">());</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">MovieTest</code> <code class="o">{</code>
  <code class="nd">@Test</code>
  <code class="o">(</code><code class="n">expected</code><code class="o">=</code><code class="n">IllegalArgumentException</code><code class="o">.</code><code class="na">class</code><code class="o">)</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">invalidTitle</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">UNKNOWN</code><code class="o">).</code><code class="na">build</code><code class="o">();</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">MovieTest</code> <code class="o">{</code>
  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">invalidTitle</code><code class="o">()</code> <code class="o">{</code>
    <code class="k">try</code> <code class="o">{</code>
      <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">UNKNOWN</code><code class="o">).</code><code class="na">build</code><code class="o">();</code>
      <code class="n">fail</code><code class="o">();</code>
    <code class="o">}</code> <code class="k">catch</code> <code class="o">(</code><code class="n">Exception</code> <code class="n">ex</code><code class="o">)</code> <code class="o">{</code>
      <code class="n">assertEquals</code><code class="o">(</code>
        <code class="n">IllegalArgumentException</code><code class="o">.</code><code class="na">class</code><code class="o">,</code>
        <code class="n">ex</code><code class="o">.</code><code class="na">getClass</code><code class="o">());</code>
    <code class="o">}</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">MovieTest</code> <code class="o">{</code>
  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">invalidTitle</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">Exception</code> <code class="n">e</code> <code class="o">=</code> <code class="kc">null</code><code class="o">;</code>
    <code class="k">try</code> <code class="o">{</code>
      <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">UNKNOWN</code><code class="o">).</code><code class="na">build</code><code class="o">();</code>
    <code class="o">}</code> <code class="k">catch</code> <code class="o">(</code><code class="n">Exception</code> <code class="n">ex</code><code class="o">)</code> <code class="o">{</code>
      <code class="n">e</code> <code class="o">=</code> <code class="n">ex</code><code class="o">;</code>
    <code class="o">}</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="n">IllegalArgumentException</code><code class="o">.</code><code class="na">class</code><code class="o">,</code>
      <code class="n">e</code><code class="o">.</code><code class="na">getClass</code><code class="o">());</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">MovieTest</code> <code class="o">{</code>
  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">invalidTitle</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">Runnable</code> <code class="n">runnable</code> <code class="o">=</code> <code class="k">new</code> <code class="n">Runnable</code><code class="o">()</code> <code class="o">{</code>
        <code class="kd">public</code> <code class="kt">void</code> <code class="nf">run</code><code class="o">()</code> <code class="o">{</code>
          <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">UNKNOWN</code><code class="o">).</code><code class="na">build</code><code class="o">();</code>
        <code class="o">}</code>
      <code class="o">};</code>
    <code class="n">assertThrows</code><code class="o">(</code>
      <code class="n">IllegalArgumentException</code><code class="o">.</code><code class="na">class</code><code class="o">,</code>
      <code class="n">runnable</code><code class="o">);</code>
  <code class="o">}</code>

  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">assertThrows</code><code class="o">(</code>
    <code class="n">Class</code> <code class="n">ex</code><code class="o">,</code> <code class="n">Runnable</code> <code class="n">runnable</code><code class="o">)</code> <code class="o">{</code>
    <code class="n">Exception</code> <code class="n">exThrown</code> <code class="o">=</code> <code class="kc">null</code><code class="o">;</code>
    <code class="k">try</code> <code class="o">{</code>
      <code class="n">runnable</code><code class="o">.</code><code class="na">run</code><code class="o">();</code>
    <code class="o">}</code> <code class="k">catch</code> <code class="o">(</code><code class="n">Exception</code> <code class="n">exThrownActual</code><code class="o">)</code> <code class="o">{</code>
      <code class="n">exThrown</code> <code class="o">=</code> <code class="n">exThrownActual</code><code class="o">;</code>
    <code class="o">}</code>
    <code class="k">if</code> <code class="o">(</code><code class="kc">null</code> <code class="o">==</code> <code class="n">exThrown</code><code class="o">)</code>
      <code class="n">fail</code><code class="o">(</code><code class="s">"No exception thrown"</code><code class="o">);</code>
    <code class="k">else</code>
      <code class="nf">assertEquals</code><code class="o">(</code><code class="n">ex</code><code class="o">,</code> <code class="n">exThrown</code><code class="o">.</code><code class="na">getClass</code><code class="o">());</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">MovieTest</code> <code class="o">{</code>
  <code class="n">Mockery</code> <code class="n">context</code> <code class="o">=</code> <code class="k">new</code> <code class="n">Mockery</code><code class="o">();</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">getPointsForDays</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">Movie</code> <code class="n">movie</code> <code class="o">=</code> <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">build</code><code class="o">();</code>
    <code class="n">assertEquals</code><code class="o">(</code><code class="mi">1</code><code class="o">,</code> <code class="n">movie</code><code class="o">.</code><code class="na">getPoints</code><code class="o">(</code><code class="mi">2</code><code class="o">));</code>
    <code class="n">assertEquals</code><code class="o">(</code><code class="mi">1</code><code class="o">,</code> <code class="n">movie</code><code class="o">.</code><code class="na">getPoints</code><code class="o">(</code><code class="mi">3</code><code class="o">));</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="o">(</code><code class="n">expected</code><code class="o">=</code><code class="n">IllegalArgumentException</code><code class="o">.</code><code class="na">class</code><code class="o">)</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">invalidTitle</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">UNKNOWN</code><code class="o">).</code><code class="na">build</code><code class="o">();</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">getPriceFromPriceInstance</code><code class="o">()</code> <code class="o">{</code>
    <code class="kd">final</code> <code class="n">Price</code> <code class="n">price</code> <code class="o">=</code>
      <code class="n">context</code><code class="o">.</code><code class="na">mock</code><code class="o">(</code><code class="n">Price</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">Movie</code> <code class="n">movie</code> <code class="o">=</code> <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">build</code><code class="o">();</code>
    <code class="n">movie</code><code class="o">.</code><code class="na">setPrice</code><code class="o">(</code><code class="n">price</code><code class="o">);</code>

    <code class="n">context</code><code class="o">.</code><code class="na">checking</code><code class="o">(</code><code class="k">new</code> <code class="n">Expectations</code><code class="o">()</code> <code class="o">{{</code>
      <code class="n">oneOf</code><code class="o">(</code><code class="n">price</code><code class="o">).</code><code class="na">getCharge</code><code class="o">(</code><code class="mi">3</code><code class="o">);</code>
    <code class="o">}});</code>

    <code class="n">movie</code><code class="o">.</code><code class="na">getCharge</code><code class="o">(</code><code class="mi">3</code><code class="o">);</code>
    <code class="n">context</code><code class="o">.</code><code class="na">assertIsSatisfied</code><code class="o">();</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">MovieTest</code> <code class="o">{</code>
  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">getPoints2Days</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mi">2</code><code class="o">,</code> <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">build</code><code class="o">().</code><code class="na">getPoints</code><code class="o">(</code><code class="mi">2</code><code class="o">));</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">getPoints3Days</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mi">2</code><code class="o">,</code> <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">build</code><code class="o">().</code><code class="na">getPoints</code><code class="o">(</code><code class="mi">3</code><code class="o">));</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">invalidTitle</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">Runnable</code> <code class="n">runnable</code> <code class="o">=</code> <code class="k">new</code> <code class="n">Runnable</code><code class="o">()</code> <code class="o">{</code>
        <code class="kd">public</code> <code class="kt">void</code> <code class="nf">run</code><code class="o">()</code> <code class="o">{</code>
          <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">UNKNOWN</code><code class="o">).</code><code class="na">build</code><code class="o">();</code>
        <code class="o">}</code>
      <code class="o">};</code>
    <code class="n">assertThrows</code><code class="o">(</code>
      <code class="n">IllegalArgumentException</code><code class="o">.</code><code class="na">class</code><code class="o">,</code>
      <code class="n">runnable</code><code class="o">);</code>
  <code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre>  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">getPriceFromPriceInstance</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">Price</code> <code class="n">price</code> <code class="o">=</code> <code class="n">mock</code><code class="o">(</code><code class="n">Price</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">Movie</code> <code class="n">movie</code> <code class="o">=</code> <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">build</code><code class="o">();</code>
    <code class="n">movie</code><code class="o">.</code><code class="na">setPrice</code><code class="o">(</code><code class="n">price</code><code class="o">);</code>
    <code class="n">movie</code><code class="o">.</code><code class="na">getCharge</code><code class="o">(</code><code class="mi">3</code><code class="o">);</code>
    <code class="n">verify</code><code class="o">(</code><code class="n">price</code><code class="o">).</code><code class="na">getCharge</code><code class="o">(</code><code class="mi">3</code><code class="o">);</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">RegularPriceTest</code> <code class="o">{</code>
  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">chargeWithStaticVal</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="n">basePrice</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">regularPrice</code><code class="o">.</code><code class="na">build</code><code class="o">().</code><code class="na">getCharge</code><code class="o">(</code><code class="mi">2</code><code class="o">),</code>
      <code class="mi">0</code><code class="o">);</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">chargeWithLocalVal</code><code class="o">()</code> <code class="o">{</code>
    <code class="kt">int</code> <code class="n">daysRented</code> <code class="o">=</code> <code class="mi">4</code><code class="o">;</code>
    <code class="kt">double</code> <code class="n">charge</code> <code class="o">=</code>
      <code class="n">basePrice</code> <code class="o">+</code> <code class="o">(</code>
        <code class="n">daysRented</code> <code class="o">-</code> <code class="mi">2</code><code class="o">)</code> <code class="o">*</code> <code class="n">multiplier</code><code class="o">;</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="n">charge</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">regularPrice</code><code class="o">.</code><code class="na">build</code><code class="o">().</code><code class="na">getCharge</code><code class="o">(</code>
        <code class="n">daysRented</code><code class="o">),</code>
      <code class="mi">0</code><code class="o">);</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">chargeWithLiteral</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mf">5.0</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">regularPrice</code><code class="o">.</code><code class="na">build</code><code class="o">().</code><code class="na">getCharge</code><code class="o">(</code><code class="mi">4</code><code class="o">),</code>
      <code class="mi">0</code><code class="o">);</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">MovieTest</code> <code class="o">{</code>
  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">compareDates</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">Movie</code> <code class="n">godfather</code> <code class="o">=</code>
      <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="k">new</code> <code class="nf">Date</code><code class="o">(</code><code class="mi">70261200000L</code><code class="o">)).</code><code class="na">build</code><code class="o">();</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="s">"1972-03-24"</code><code class="o">,</code>
      <code class="k">new</code> <code class="nf">SimpleDateFormat</code><code class="o">(</code>
        <code class="s">"yyyy-MM-dd"</code><code class="o">).</code><code class="na">format</code><code class="o">(</code>
          <code class="n">godfather</code><code class="o">.</code><code class="na">releaseDate</code><code class="o">()));</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">CustomerTest</code> <code class="o">{</code>
  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">statementFor1Rental</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">Rental</code> <code class="n">rental</code> <code class="o">=</code> <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">Customer</code> <code class="n">customer</code> <code class="o">=</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">rental</code><code class="o">).</code><code class="na">build</code><code class="o">();</code>

    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="n">expStatement</code><code class="o">(</code>
        <code class="s">"Rental record for %s\n%sAmount "</code> <code class="o">+</code>
        <code class="s">"owed is %s\n"</code> <code class="o">+</code>
        <code class="s">"You earned %s frequent "</code> <code class="o">+</code>
        <code class="s">"renter points"</code><code class="o">,</code>
        <code class="n">customer</code><code class="o">,</code>
        <code class="n">rentalInfo</code><code class="o">(</code>
          <code class="s">"\t"</code><code class="o">,</code> <code class="s">""</code><code class="o">,</code> <code class="k">new</code> <code class="n">Rental</code><code class="o">[]</code> <code class="o">{</code><code class="n">rental</code><code class="o">})),</code>
      <code class="n">customer</code><code class="o">.</code><code class="na">statement</code><code class="o">());</code>
  <code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre>  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">statementFor2Rentals</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">Rental</code> <code class="n">godfather</code> <code class="o">=</code> <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">Rental</code> <code class="n">scarface</code> <code class="o">=</code> <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">Customer</code> <code class="n">customer</code> <code class="o">=</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">godfather</code><code class="o">,</code> <code class="n">scarface</code><code class="o">).</code><code class="na">build</code><code class="o">();</code>

    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="n">expStatement</code><code class="o">(</code>
        <code class="s">"Rental record for %s\n%sAmount "</code> <code class="o">+</code>
        <code class="s">"owed is %s\n"</code> <code class="o">+</code>
        <code class="s">"You earned %s frequent "</code> <code class="o">+</code>
        <code class="s">"renter points"</code><code class="o">,</code>
        <code class="n">customer</code><code class="o">,</code>
        <code class="n">rentalInfo</code><code class="o">(</code>
          <code class="s">"\t"</code><code class="o">,</code> <code class="s">""</code><code class="o">,</code> <code class="k">new</code> <code class="n">Rental</code><code class="o">[]</code> <code class="o">{</code>
            <code class="n">godfather</code><code class="o">,</code> <code class="n">scarface</code><code class="o">})),</code>
      <code class="n">customer</code><code class="o">.</code><code class="na">statement</code><code class="o">());</code>
  <code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre>  <code class="kd">public</code> <code class="kd">static</code> <code class="n">String</code> <code class="nf">rentalInfo</code><code class="o">(</code>
    <code class="n">String</code> <code class="n">startsWith</code><code class="o">,</code>
    <code class="n">String</code> <code class="n">endsWith</code><code class="o">,</code>
    <code class="n">Rental</code><code class="o">[]</code> <code class="n">rentals</code><code class="o">)</code> <code class="o">{</code>
    <code class="n">String</code> <code class="n">result</code> <code class="o">=</code> <code class="s">""</code><code class="o">;</code>
    <code class="k">for</code> <code class="o">(</code><code class="n">Rental</code> <code class="n">rental</code> <code class="o">:</code> <code class="n">rentals</code><code class="o">)</code>
      <code class="n">result</code> <code class="o">+=</code> <code class="n">String</code><code class="o">.</code><code class="na">format</code><code class="o">(</code>
        <code class="s">"%s%s%s\n"</code><code class="o">,</code>
        <code class="n">startsWith</code><code class="o">,</code>
        <code class="n">rental</code><code class="o">.</code><code class="na">getLineItem</code><code class="o">(),</code>
        <code class="n">endsWith</code><code class="o">);</code>
    <code class="k">return</code> <code class="n">result</code><code class="o">;</code>
  <code class="o">}</code>

  <code class="kd">public</code> <code class="kd">static</code> <code class="n">String</code> <code class="nf">expStatement</code><code class="o">(</code>
    <code class="n">String</code> <code class="n">formatStr</code><code class="o">,</code>
    <code class="n">Customer</code> <code class="n">customer</code><code class="o">,</code>
    <code class="n">String</code> <code class="n">rentalInfo</code><code class="o">)</code> <code class="o">{</code>
    <code class="k">return</code> <code class="n">String</code><code class="o">.</code><code class="na">format</code><code class="o">(</code>
      <code class="n">formatStr</code><code class="o">,</code>
      <code class="n">customer</code><code class="o">.</code><code class="na">getName</code><code class="o">(),</code>
      <code class="n">rentalInfo</code><code class="o">,</code>
      <code class="n">customer</code><code class="o">.</code><code class="na">getTotalCharge</code><code class="o">(),</code>
      <code class="n">customer</code><code class="o">.</code><code class="na">getTotalPoints</code><code class="o">());</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">CustomerTest</code> <code class="o">{</code>
  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">statementFor1Rental</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">Customer</code> <code class="n">customer</code> <code class="o">=</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">)).</code><code class="na">build</code><code class="o">();</code>

    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="s">"Rental record for Jim\n"</code> <code class="o">+</code>
      <code class="s">"\tnull\n"</code> <code class="o">+</code>
      <code class="s">"Amount owed is 0.0\n"</code> <code class="o">+</code>
      <code class="s">"You earned 0 frequent renter points"</code><code class="o">,</code>
      <code class="n">customer</code><code class="o">.</code><code class="na">statement</code><code class="o">());</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">statementFor2Rentals</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">Customer</code> <code class="n">customer</code> <code class="o">=</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">),</code>
        <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">)).</code><code class="na">build</code><code class="o">();</code>

    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="s">"Rental record for Jim\n"</code><code class="o">+</code>
      <code class="s">"\tnull\n"</code> <code class="o">+</code>
      <code class="s">"\tnull\n"</code> <code class="o">+</code>
      <code class="s">"Amount owed is 0.0\n"</code> <code class="o">+</code>
      <code class="s">"You earned 0 frequent renter points"</code><code class="o">,</code>
      <code class="n">customer</code><code class="o">.</code><code class="na">statement</code><code class="o">());</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">RentalTest</code> <code class="o">{</code>
  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code>
  <code class="nf">storeMockNeverReceivesRemove</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">Movie</code> <code class="n">movie</code> <code class="o">=</code> <code class="n">mock</code><code class="o">(</code><code class="n">Movie</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">Rental</code> <code class="n">rental</code> <code class="o">=</code>
      <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">movie</code><code class="o">).</code><code class="na">build</code><code class="o">();</code>
    <code class="n">Store</code> <code class="n">store</code> <code class="o">=</code> <code class="n">mock</code><code class="o">(</code><code class="n">Store</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">when</code><code class="o">(</code>
      <code class="n">store</code><code class="o">.</code><code class="na">getAvailability</code><code class="o">(</code>
        <code class="n">any</code><code class="o">(</code><code class="n">Movie</code><code class="o">.</code><code class="na">class</code><code class="o">)))</code>
      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="mi">0</code><code class="o">);</code>
    <code class="n">rental</code><code class="o">.</code><code class="na">start</code><code class="o">(</code><code class="n">store</code><code class="o">);</code>
    <code class="n">verify</code><code class="o">(</code><code class="n">store</code><code class="o">,</code> <code class="n">never</code><code class="o">()).</code><code class="na">remove</code><code class="o">(</code><code class="n">movie</code><code class="o">);</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">failOnStoreRemove</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">Movie</code> <code class="n">movie</code> <code class="o">=</code> <code class="n">mock</code><code class="o">(</code><code class="n">Movie</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">Rental</code> <code class="n">rental</code> <code class="o">=</code>
      <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">movie</code><code class="o">).</code><code class="na">build</code><code class="o">();</code>
    <code class="n">Store</code> <code class="n">store</code> <code class="o">=</code> <code class="k">new</code> <code class="n">Store</code><code class="o">(</code>
      <code class="k">new</code> <code class="n">HashMap</code><code class="o">&lt;</code><code class="n">Movie</code><code class="o">,</code><code class="n">Integer</code><code class="o">&gt;())</code> <code class="o">{</code>
        <code class="kd">public</code> <code class="kt">void</code> <code class="nf">remove</code><code class="o">(</code><code class="n">Movie</code> <code class="n">movie</code><code class="o">)</code> <code class="o">{</code>
          <code class="n">fail</code><code class="o">();</code>
        <code class="o">}</code>
      <code class="o">};</code>
    <code class="n">rental</code><code class="o">.</code><code class="na">start</code><code class="o">(</code><code class="n">store</code><code class="o">);</code>
  <code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre>  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">storeShouldNeverRemove</code><code class="o">()</code> <code class="o">{</code>
    <code class="kd">final</code> <code class="kt">boolean</code><code class="o">[]</code> <code class="n">removeCalled</code> <code class="o">=</code> <code class="o">{</code> <code class="kc">false</code> <code class="o">};</code>
    <code class="n">Movie</code> <code class="n">movie</code> <code class="o">=</code> <code class="n">mock</code><code class="o">(</code><code class="n">Movie</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">Rental</code> <code class="n">rental</code> <code class="o">=</code>
      <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">movie</code><code class="o">).</code><code class="na">build</code><code class="o">();</code>
    <code class="n">Store</code> <code class="n">store</code> <code class="o">=</code> <code class="k">new</code> <code class="n">Store</code><code class="o">(</code>
      <code class="k">new</code> <code class="n">HashMap</code><code class="o">&lt;</code><code class="n">Movie</code><code class="o">,</code><code class="n">Integer</code><code class="o">&gt;())</code> <code class="o">{</code>
        <code class="kd">public</code> <code class="kt">void</code> <code class="nf">remove</code><code class="o">(</code><code class="n">Movie</code> <code class="n">movie</code><code class="o">)</code> <code class="o">{</code>
          <code class="n">removeCalled</code><code class="o">[</code><code class="mi">0</code><code class="o">]</code> <code class="o">=</code> <code class="kc">true</code><code class="o">;</code>
        <code class="o">}</code>
      <code class="o">};</code>
    <code class="n">rental</code><code class="o">.</code><code class="na">start</code><code class="o">(</code><code class="n">store</code><code class="o">);</code>
    <code class="n">assertFalse</code><code class="o">(</code><code class="n">removeCalled</code><code class="o">[</code><code class="mi">0</code><code class="o">]);</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">RentalTest</code> <code class="o">{</code>
  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">verifyStoreInteractions</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">Movie</code> <code class="n">movie</code> <code class="o">=</code> <code class="n">mock</code><code class="o">(</code><code class="n">Movie</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">Rental</code> <code class="n">rental</code> <code class="o">=</code>
      <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">movie</code><code class="o">).</code><code class="na">build</code><code class="o">();</code>
    <code class="n">Store</code> <code class="n">store</code> <code class="o">=</code> <code class="n">mock</code><code class="o">(</code><code class="n">Store</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">rental</code><code class="o">.</code><code class="na">start</code><code class="o">(</code><code class="n">store</code><code class="o">);</code>
    <code class="n">verify</code><code class="o">(</code><code class="n">store</code><code class="o">).</code><code class="na">getAvailability</code><code class="o">(</code><code class="n">movie</code><code class="o">);</code>
    <code class="n">verifyNoMoreInteractions</code><code class="o">(</code><code class="n">store</code><code class="o">);</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">RentalTest</code> <code class="o">{</code>
  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code>
  <code class="nf">storeAvailabilityIsModifiedOnRental</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">Movie</code> <code class="n">movie</code> <code class="o">=</code> <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">build</code><code class="o">();</code>
    <code class="n">Rental</code> <code class="n">rental</code> <code class="o">=</code>
      <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">movie</code><code class="o">).</code><code class="na">build</code><code class="o">();</code>
    <code class="n">Store</code> <code class="n">store</code> <code class="o">=</code>
      <code class="n">a</code><code class="o">.</code><code class="na">store</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">movie</code><code class="o">,</code> <code class="n">movie</code><code class="o">).</code><code class="na">build</code><code class="o">();</code>
    <code class="n">rental</code><code class="o">.</code><code class="na">start</code><code class="o">(</code><code class="n">store</code><code class="o">);</code>
    <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">.</code><code class="na">build</code><code class="o">().</code><code class="na">start</code><code class="o">(</code><code class="n">store</code><code class="o">);</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mi">1</code><code class="o">,</code> <code class="n">store</code><code class="o">.</code><code class="na">getAvailability</code><code class="o">(</code><code class="n">movie</code><code class="o">));</code>
  <code class="o">}</code>

<code class="uil">  <code class="nd">@Test</code>
</code><code class="uil">  <code class="kd">public</code> <code class="kt">void</code>
</code><code class="uil">  <code class="nf">storeAvailabilityIsUnmodified</code><code class="o">()</code> <code class="o">{</code>
</code><code class="uil">    <code class="n">Movie</code> <code class="n">movie</code> <code class="o">=</code> <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">build</code><code class="o">();</code>
</code><code class="uil">    <code class="n">Rental</code> <code class="n">rental</code> <code class="o">=</code>
</code><code class="uil">      <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">movie</code><code class="o">).</code><code class="na">build</code><code class="o">();</code>
</code><code class="uil">    <code class="n">Store</code> <code class="n">store</code> <code class="o">=</code> <code class="n">a</code><code class="o">.</code><code class="na">store</code><code class="o">.</code><code class="na">build</code><code class="o">();</code>
</code><code class="uil">    <code class="n">rental</code><code class="o">.</code><code class="na">start</code><code class="o">(</code><code class="n">store</code><code class="o">);</code>
</code><code class="uil">    <code class="n">assertEquals</code><code class="o">(</code>
</code><code class="uil">      <code class="mi">0</code><code class="o">,</code> <code class="n">store</code><code class="o">.</code><code class="na">getAvailability</code><code class="o">(</code><code class="n">movie</code><code class="o">));</code>
</code><code class="uil">  <code class="o">}</code>
</code><code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">RentalTest</code> <code class="kd">extends</code> <code class="n">Store</code> <code class="o">{</code>
  <code class="kd">public</code> <code class="kd">static</code> <code class="n">Movie</code> <code class="n">movie</code> <code class="o">=</code>
    <code class="n">mock</code><code class="o">(</code><code class="n">Movie</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
  <code class="kd">private</code> <code class="kt">boolean</code> <code class="n">removeCalled</code><code class="o">;</code>

  <code class="kd">public</code> <code class="nf">RentalTest</code><code class="o">()</code> <code class="o">{</code>
    <code class="kd">super</code><code class="o">(</code><code class="k">new</code> <code class="n">HashMap</code><code class="o">&lt;</code><code class="n">Movie</code><code class="o">,</code> <code class="n">Integer</code><code class="o">&gt;()</code> <code class="o">{{</code>
          <code class="k">this</code><code class="o">.</code><code class="na">put</code><code class="o">(</code><code class="n">movie</code><code class="o">,</code> <code class="mi">2</code><code class="o">);</code>
        <code class="o">}});</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">removeIsCalled</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">Rental</code> <code class="n">rental</code> <code class="o">=</code>
      <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">movie</code><code class="o">).</code><code class="na">build</code><code class="o">();</code>
    <code class="n">rental</code><code class="o">.</code><code class="na">start</code><code class="o">(</code><code class="k">this</code><code class="o">);</code>
    <code class="n">assertEquals</code><code class="o">(</code><code class="kc">true</code><code class="o">,</code> <code class="n">removeCalled</code><code class="o">);</code>
  <code class="o">}</code>

  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">remove</code><code class="o">(</code><code class="n">Movie</code> <code class="n">movie</code><code class="o">)</code> <code class="o">{</code>
    <code class="kd">super</code><code class="o">.</code><code class="na">remove</code><code class="o">(</code><code class="n">movie</code><code class="o">);</code>
    <code class="n">removeCalled</code> <code class="o">=</code> <code class="kc">true</code><code class="o">;</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">RentalTest</code> <code class="o">{</code>
  <code class="nd">@Test</code><code class="o">(</code><code class="n">expected</code><code class="o">=</code><code class="n">RuntimeException</code><code class="o">.</code><code class="na">class</code><code class="o">)</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">removeIsCalled</code><code class="o">()</code> <code class="o">{</code>
    <code class="kd">final</code> <code class="n">Movie</code> <code class="n">movie</code> <code class="o">=</code> <code class="n">mock</code><code class="o">(</code><code class="n">Movie</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">Rental</code> <code class="n">rental</code> <code class="o">=</code>
      <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">movie</code><code class="o">).</code><code class="na">build</code><code class="o">();</code>
    <code class="n">HashMap</code><code class="o">&lt;</code><code class="n">Movie</code><code class="o">,</code> <code class="n">Integer</code><code class="o">&gt;</code> <code class="n">movieMap</code> <code class="o">=</code>
      <code class="k">new</code> <code class="n">HashMap</code><code class="o">&lt;</code><code class="n">Movie</code><code class="o">,</code> <code class="n">Integer</code><code class="o">&gt;()</code> <code class="o">{{</code>
        <code class="k">this</code><code class="o">.</code><code class="na">put</code><code class="o">(</code><code class="n">movie</code><code class="o">,</code> <code class="mi">2</code><code class="o">);</code>
      <code class="o">}};</code>
    <code class="n">Store</code> <code class="n">store</code> <code class="o">=</code>
      <code class="k">new</code> <code class="nf">Store</code><code class="o">(</code><code class="n">movieMap</code><code class="o">)</code> <code class="o">{</code>
        <code class="kd">public</code> <code class="kt">void</code> <code class="nf">remove</code><code class="o">(</code><code class="n">Movie</code> <code class="n">movie</code><code class="o">)</code> <code class="o">{</code>
          <code class="k">throw</code> <code class="k">new</code>
            <code class="nf">RuntimeException</code><code class="o">(</code><code class="s">"success"</code><code class="o">);</code>
        <code class="o">}</code>
      <code class="o">};</code>
    <code class="n">rental</code><code class="o">.</code><code class="na">start</code><code class="o">(</code><code class="n">store</code><code class="o">);</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">CustomerTest</code> <code class="o">{</code>
  <code class="n">Rental</code> <code class="n">godfatherRental</code><code class="o">;</code>
  <code class="n">Rental</code> <code class="n">lionKingRental</code><code class="o">;</code>
  <code class="n">Rental</code> <code class="n">scarfaceRental</code><code class="o">;</code>
  <code class="n">Rental</code> <code class="n">notebookRental</code><code class="o">;</code>
  <code class="n">Customer</code> <code class="n">twoRentals</code><code class="o">;</code>
  <code class="n">Customer</code> <code class="n">fourRentals</code><code class="o">;</code>

<code class="uil">  <code class="nd">@Before</code>
</code><code class="uil">  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">init</code><code class="o">()</code> <code class="o">{</code>
</code><code class="uil">    <code class="n">godfatherRental</code> <code class="o">=</code> <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
</code><code class="uil">    <code class="n">when</code><code class="o">(</code><code class="n">godfatherRental</code><code class="o">.</code><code class="na">getTitle</code><code class="o">())</code>
</code><code class="uil">      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="s">"Godfather 4"</code><code class="o">);</code>
</code><code class="uil">    <code class="n">when</code><code class="o">(</code><code class="n">godfatherRental</code><code class="o">.</code><code class="na">getCharge</code><code class="o">())</code>
</code><code class="uil">      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="mf">3.0</code><code class="o">);</code>
</code><code class="uil">    <code class="n">when</code><code class="o">(</code><code class="n">godfatherRental</code><code class="o">.</code><code class="na">getPoints</code><code class="o">())</code>
</code><code class="uil">      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="mi">2</code><code class="o">);</code>
</code><code class="uil">    <code class="n">lionKingRental</code> <code class="o">=</code> <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
</code><code class="uil">    <code class="n">when</code><code class="o">(</code><code class="n">lionKingRental</code><code class="o">.</code><code class="na">getTitle</code><code class="o">())</code>
</code><code class="uil">      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="s">"Lion King"</code><code class="o">);</code>
</code><code class="uil">    <code class="n">when</code><code class="o">(</code><code class="n">lionKingRental</code><code class="o">.</code><code class="na">getCharge</code><code class="o">())</code>
</code><code class="uil">      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="mf">2.0</code><code class="o">);</code>
</code><code class="uil">    <code class="n">when</code><code class="o">(</code><code class="n">lionKingRental</code><code class="o">.</code><code class="na">getPoints</code><code class="o">())</code>
</code><code class="uil">      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="mi">1</code><code class="o">);</code>
</code><code class="uil">    <code class="n">scarfaceRental</code> <code class="o">=</code> <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
</code><code class="uil">    <code class="n">when</code><code class="o">(</code><code class="n">scarfaceRental</code><code class="o">.</code><code class="na">getTitle</code><code class="o">())</code>
</code><code class="uil">      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="s">"Scarface"</code><code class="o">);</code>
</code><code class="uil">    <code class="n">when</code><code class="o">(</code><code class="n">scarfaceRental</code><code class="o">.</code><code class="na">getCharge</code><code class="o">())</code>
</code><code class="uil">      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="mf">1.0</code><code class="o">);</code>
</code><code class="uil">    <code class="n">when</code><code class="o">(</code><code class="n">scarfaceRental</code><code class="o">.</code><code class="na">getPoints</code><code class="o">())</code>
</code><code class="uil">      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="mi">1</code><code class="o">);</code>
</code><code class="uil">    <code class="n">notebookRental</code> <code class="o">=</code> <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
</code><code class="uil">    <code class="n">when</code><code class="o">(</code><code class="n">notebookRental</code><code class="o">.</code><code class="na">getTitle</code><code class="o">())</code>
</code><code class="uil">      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="s">"Notebook"</code><code class="o">);</code>
</code><code class="uil">    <code class="n">when</code><code class="o">(</code><code class="n">notebookRental</code><code class="o">.</code><code class="na">getCharge</code><code class="o">())</code>
</code><code class="uil">      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="mf">6.0</code><code class="o">);</code>
</code><code class="uil">    <code class="n">when</code><code class="o">(</code><code class="n">notebookRental</code><code class="o">.</code><code class="na">getPoints</code><code class="o">())</code>
</code><code class="uil">      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="mi">1</code><code class="o">);</code>
</code><code class="uil">
</code><code class="uil">    <code class="n">twoRentals</code> <code class="o">=</code>
</code><code class="uil">      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
</code><code class="uil">        <code class="n">godfatherRental</code><code class="o">,</code> <code class="n">lionKingRental</code><code class="o">)</code>
</code><code class="uil">      <code class="o">.</code><code class="na">build</code><code class="o">();</code>
</code><code class="uil">
</code><code class="uil">    <code class="n">fourRentals</code> <code class="o">=</code>
</code><code class="uil">      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
</code><code class="uil">        <code class="n">godfatherRental</code><code class="o">,</code> <code class="n">lionKingRental</code><code class="o">,</code>
</code><code class="uil">        <code class="n">scarfaceRental</code><code class="o">,</code> <code class="n">notebookRental</code><code class="o">)</code>
</code><code class="uil">      <code class="o">.</code><code class="na">build</code><code class="o">();</code>
</code><code class="uil">  <code class="o">}</code>
</code></pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre>  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">recentRentalsWith2Rentals</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="s">"Recent rentals:"</code><code class="o">+</code>
      <code class="s">"\nGodfather 4\nLion King"</code><code class="o">,</code>
      <code class="n">twoRentals</code><code class="o">.</code><code class="na">recentRentals</code><code class="o">());</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">recentRentalsWith4Rentals</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="s">"Recent rentals:"</code><code class="o">+</code>
      <code class="s">"\nGodfather 4\nLion King\nScarface"</code><code class="o">,</code>
      <code class="n">fourRentals</code><code class="o">.</code><code class="na">recentRentals</code><code class="o">());</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
<code class="uil">  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">totalChargeWith2Rentals</code><code class="o">()</code> <code class="o">{</code>
</code><code class="uil">    <code class="n">assertEquals</code><code class="o">(</code>
</code><code class="uil">      <code class="mf">5.0</code><code class="o">,</code>
</code><code class="uil">      <code class="n">twoRentals</code><code class="o">.</code><code class="na">getTotalCharge</code><code class="o">(),</code>
</code><code class="uil">      <code class="mi">0</code><code class="o">);</code>
</code><code class="uil">  <code class="o">}</code>
</code><code class="uil">
</code>  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">totalChargeWith4Rentals</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mf">12.0</code><code class="o">,</code>
      <code class="n">fourRentals</code><code class="o">.</code><code class="na">getTotalCharge</code><code class="o">(),</code>
      <code class="mi">0</code><code class="o">);</code>
  <code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre>  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">totalPointsWith2Rentals</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mi">3</code><code class="o">,</code>
      <code class="n">twoRentals</code><code class="o">.</code><code class="na">getTotalPoints</code><code class="o">());</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">totalPointsWith4Rentals</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mi">5</code><code class="o">,</code>
      <code class="n">fourRentals</code><code class="o">.</code><code class="na">getTotalPoints</code><code class="o">());</code>
  <code class="o">}</code>

<code class="uil">  <code class="nd">@Test</code>
</code><code class="uil">  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">getName</code><code class="o">()</code> <code class="o">{</code>
</code><code class="uil">    <code class="n">assertEquals</code><code class="o">(</code>
</code><code class="uil">      <code class="s">"Jim"</code><code class="o">,</code> <code class="n">twoRentals</code><code class="o">.</code><code class="na">getName</code><code class="o">());</code>
</code><code class="uil">  <code class="o">}</code>
</code><code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">CustomerTest</code> <code class="o">{</code>
  <code class="n">Rental</code> <code class="n">godfatherRental</code><code class="o">;</code>
  <code class="n">Rental</code> <code class="n">lionKingRental</code><code class="o">;</code>
  <code class="n">Rental</code> <code class="n">scarfaceRental</code><code class="o">;</code>
  <code class="n">Rental</code> <code class="n">notebookRental</code><code class="o">;</code>
  <code class="n">Customer</code> <code class="n">twoRentals</code><code class="o">;</code>
  <code class="n">Customer</code> <code class="n">fourRentals</code><code class="o">;</code>

<code class="uil">  <code class="nd">@Before</code>
</code><code class="uil">  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">init</code><code class="o">()</code> <code class="o">{</code>
</code><code class="uil">    <code class="n">godfatherRental</code> <code class="o">=</code> <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
</code><code class="uil">    <code class="n">when</code><code class="o">(</code><code class="n">godfatherRental</code><code class="o">.</code><code class="na">getTitle</code><code class="o">())</code>
</code><code class="uil">      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="s">"Godfather 4"</code><code class="o">);</code>
</code><code class="uil">    <code class="n">when</code><code class="o">(</code><code class="n">godfatherRental</code><code class="o">.</code><code class="na">getCharge</code><code class="o">())</code>
</code><code class="uil">      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="mf">3.0</code><code class="o">);</code>
</code><code class="uil">    <code class="n">when</code><code class="o">(</code><code class="n">godfatherRental</code><code class="o">.</code><code class="na">getPoints</code><code class="o">())</code>
</code><code class="uil">      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="mi">2</code><code class="o">);</code>
</code><code class="uil">    <code class="n">lionKingRental</code> <code class="o">=</code> <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
</code><code class="uil">    <code class="n">when</code><code class="o">(</code><code class="n">lionKingRental</code><code class="o">.</code><code class="na">getTitle</code><code class="o">())</code>
</code><code class="uil">      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="s">"Lion King"</code><code class="o">);</code>
</code><code class="uil">    <code class="n">when</code><code class="o">(</code><code class="n">lionKingRental</code><code class="o">.</code><code class="na">getCharge</code><code class="o">())</code>
</code><code class="uil">      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="mf">2.0</code><code class="o">);</code>
</code><code class="uil">    <code class="n">when</code><code class="o">(</code><code class="n">lionKingRental</code><code class="o">.</code><code class="na">getPoints</code><code class="o">())</code>
</code><code class="uil">      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="mi">1</code><code class="o">);</code>
</code><code class="uil">    <code class="n">scarfaceRental</code> <code class="o">=</code> <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
</code><code class="uil">    <code class="n">when</code><code class="o">(</code><code class="n">scarfaceRental</code><code class="o">.</code><code class="na">getTitle</code><code class="o">())</code>
</code><code class="uil">      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="s">"Scarface"</code><code class="o">);</code>
</code><code class="uil">    <code class="n">when</code><code class="o">(</code><code class="n">scarfaceRental</code><code class="o">.</code><code class="na">getCharge</code><code class="o">())</code>
</code><code class="uil">      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="mf">1.0</code><code class="o">);</code>
</code><code class="uil">    <code class="n">when</code><code class="o">(</code><code class="n">scarfaceRental</code><code class="o">.</code><code class="na">getPoints</code><code class="o">())</code>
</code><code class="uil">      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="mi">1</code><code class="o">);</code>
</code><code class="uil">    <code class="n">notebookRental</code> <code class="o">=</code> <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
</code><code class="uil">    <code class="n">when</code><code class="o">(</code><code class="n">notebookRental</code><code class="o">.</code><code class="na">getTitle</code><code class="o">())</code>
</code><code class="uil">      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="s">"Notebook"</code><code class="o">);</code>
</code><code class="uil">    <code class="n">when</code><code class="o">(</code><code class="n">notebookRental</code><code class="o">.</code><code class="na">getCharge</code><code class="o">())</code>
</code><code class="uil">      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="mf">6.0</code><code class="o">);</code>
</code><code class="uil">    <code class="n">when</code><code class="o">(</code><code class="n">notebookRental</code><code class="o">.</code><code class="na">getPoints</code><code class="o">())</code>
</code><code class="uil">      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="mi">1</code><code class="o">);</code>
</code><code class="uil">
</code><code class="uil">    <code class="n">twoRentals</code> <code class="o">=</code>
</code><code class="uil">      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
</code><code class="uil">        <code class="n">godfatherRental</code><code class="o">,</code> <code class="n">lionKingRental</code><code class="o">)</code>
</code><code class="uil">      <code class="o">.</code><code class="na">build</code><code class="o">();</code>
</code><code class="uil">
</code><code class="uil">    <code class="n">fourRentals</code> <code class="o">=</code>
</code><code class="uil">      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
</code><code class="uil">        <code class="n">godfatherRental</code><code class="o">,</code> <code class="n">lionKingRental</code><code class="o">,</code>
</code><code class="uil">        <code class="n">scarfaceRental</code><code class="o">,</code> <code class="n">notebookRental</code><code class="o">)</code>
</code><code class="uil">      <code class="o">.</code><code class="na">build</code><code class="o">();</code>
</code><code class="uil">  <code class="o">}</code>
</code></pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre>  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">recentRentalsWith2Rentals</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="s">"Recent rentals:"</code><code class="o">+</code>
      <code class="s">"\nGodfather 4\nLion King"</code><code class="o">,</code>
      <code class="n">twoRentals</code><code class="o">.</code><code class="na">recentRentals</code><code class="o">());</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">recentRentalsWith4Rentals</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="s">"Recent rentals:"</code><code class="o">+</code>
      <code class="s">"\nGodfather 4\nLion King\nScarface"</code><code class="o">,</code>
      <code class="n">fourRentals</code><code class="o">.</code><code class="na">recentRentals</code><code class="o">());</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
<code class="uil">  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">totalChargeWith2Rentals</code><code class="o">()</code> <code class="o">{</code>
</code><code class="uil">    <code class="n">assertEquals</code><code class="o">(</code>
</code><code class="uil">      <code class="mf">5.0</code><code class="o">,</code>
</code><code class="uil">      <code class="n">twoRentals</code><code class="o">.</code><code class="na">getTotalCharge</code><code class="o">(),</code>
</code><code class="uil">      <code class="mi">0</code><code class="o">);</code>
</code><code class="uil">  <code class="o">}</code>
</code><code class="uil">
</code>  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">totalChargeWith4Rentals</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mf">12.0</code><code class="o">,</code>
      <code class="n">fourRentals</code><code class="o">.</code><code class="na">getTotalCharge</code><code class="o">(),</code>
      <code class="mi">0</code><code class="o">);</code>
  <code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre>  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">totalPointsWith2Rentals</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mi">3</code><code class="o">,</code>
      <code class="n">twoRentals</code><code class="o">.</code><code class="na">getTotalPoints</code><code class="o">());</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">totalPointsWith4Rentals</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mi">5</code><code class="o">,</code>
      <code class="n">fourRentals</code><code class="o">.</code><code class="na">getTotalPoints</code><code class="o">());</code>
  <code class="o">}</code>

<code class="uil">  <code class="nd">@Test</code>
</code><code class="uil">  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">getName</code><code class="o">()</code> <code class="o">{</code>
</code><code class="uil">    <code class="n">assertEquals</code><code class="o">(</code>
</code><code class="uil">      <code class="s">"Jim"</code><code class="o">,</code> <code class="n">twoRentals</code><code class="o">.</code><code class="na">getName</code><code class="o">());</code>
</code><code class="uil">  <code class="o">}</code>
</code><code class="o">}</code>
</pre></div>

</div><div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">CustomerTest</code> <code class="o">{</code>
  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">recentRentalsWith2Rentals</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">Rental</code> <code class="n">godfatherRental</code> <code class="o">=</code>
      <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">when</code><code class="o">(</code><code class="n">godfatherRental</code><code class="o">.</code><code class="na">getTitle</code><code class="o">())</code>
      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="s">"Godfather 4"</code><code class="o">);</code>
    <code class="n">Rental</code> <code class="n">lionKingRental</code> <code class="o">=</code>
      <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">when</code><code class="o">(</code><code class="n">lionKingRental</code><code class="o">.</code><code class="na">getTitle</code><code class="o">())</code>
      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="s">"Lion King"</code><code class="o">);</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="s">"Recent rentals:"</code><code class="o">+</code>
      <code class="s">"\nGodfather 4\nLion King"</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">godfatherRental</code><code class="o">,</code> <code class="n">lionKingRental</code><code class="o">)</code>
      <code class="o">.</code><code class="na">build</code><code class="o">().</code><code class="na">recentRentals</code><code class="o">());</code>
  <code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre>  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">recentRentalsWith4Rentals</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">Rental</code> <code class="n">godfatherRental</code> <code class="o">=</code>
      <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">when</code><code class="o">(</code><code class="n">godfatherRental</code><code class="o">.</code><code class="na">getTitle</code><code class="o">())</code>
      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="s">"Godfather 4"</code><code class="o">);</code>
    <code class="n">Rental</code> <code class="n">lionKingRental</code> <code class="o">=</code>
      <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">when</code><code class="o">(</code><code class="n">lionKingRental</code><code class="o">.</code><code class="na">getTitle</code><code class="o">())</code>
      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="s">"Lion King"</code><code class="o">);</code>
    <code class="n">Rental</code> <code class="n">scarfaceRental</code> <code class="o">=</code>
      <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">when</code><code class="o">(</code><code class="n">scarfaceRental</code><code class="o">.</code><code class="na">getTitle</code><code class="o">())</code>
      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="s">"Scarface"</code><code class="o">);</code>
    <code class="n">Rental</code> <code class="n">notebookRental</code> <code class="o">=</code>
      <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">when</code><code class="o">(</code><code class="n">notebookRental</code><code class="o">.</code><code class="na">getTitle</code><code class="o">())</code>
      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="s">"Notebook"</code><code class="o">);</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="s">"Recent rentals:"</code><code class="o">+</code>
      <code class="s">"\nGodfather 4\nLion King\nScarface"</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">godfatherRental</code><code class="o">,</code> <code class="n">lionKingRental</code><code class="o">,</code>
        <code class="n">scarfaceRental</code><code class="o">,</code> <code class="n">notebookRental</code><code class="o">)</code>
      <code class="o">.</code><code class="na">build</code><code class="o">().</code><code class="na">recentRentals</code><code class="o">());</code>
  <code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="uil">  <code class="nd">@Test</code>
</code><code class="uil">  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">totalChargeWith2Rentals</code><code class="o">()</code> <code class="o">{</code>
</code><code class="uil">    <code class="n">Rental</code> <code class="n">godfatherRental</code> <code class="o">=</code>
</code><code class="uil">      <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
</code><code class="uil">    <code class="n">when</code><code class="o">(</code><code class="n">godfatherRental</code><code class="o">.</code><code class="na">getCharge</code><code class="o">())</code>
</code><code class="uil">      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="mf">3.0</code><code class="o">);</code>
</code><code class="uil">    <code class="n">Rental</code> <code class="n">lionKingRental</code> <code class="o">=</code>
</code><code class="uil">      <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
</code><code class="uil">    <code class="n">when</code><code class="o">(</code><code class="n">lionKingRental</code><code class="o">.</code><code class="na">getCharge</code><code class="o">())</code>
</code><code class="uil">      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="mf">2.0</code><code class="o">);</code>
</code><code class="uil">    <code class="n">assertEquals</code><code class="o">(</code>
</code><code class="uil">      <code class="mf">5.0</code><code class="o">,</code>
</code><code class="uil">      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
</code><code class="uil">        <code class="n">godfatherRental</code><code class="o">,</code> <code class="n">lionKingRental</code><code class="o">)</code>
</code><code class="uil">      <code class="o">.</code><code class="na">build</code><code class="o">().</code><code class="na">getTotalCharge</code><code class="o">(),</code>
</code><code class="uil">      <code class="mi">0</code><code class="o">);</code>
</code><code class="uil">  <code class="o">}</code>
</code></pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre>  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">totalChargeWith4Rentals</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">Rental</code> <code class="n">godfatherRental</code> <code class="o">=</code>
      <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">when</code><code class="o">(</code><code class="n">godfatherRental</code><code class="o">.</code><code class="na">getCharge</code><code class="o">())</code>
      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="mf">3.0</code><code class="o">);</code>
    <code class="n">Rental</code> <code class="n">lionKingRental</code> <code class="o">=</code>
      <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">when</code><code class="o">(</code><code class="n">lionKingRental</code><code class="o">.</code><code class="na">getCharge</code><code class="o">())</code>
      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="mf">2.0</code><code class="o">);</code>
    <code class="n">Rental</code> <code class="n">scarfaceRental</code> <code class="o">=</code>
      <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">when</code><code class="o">(</code><code class="n">scarfaceRental</code><code class="o">.</code><code class="na">getCharge</code><code class="o">())</code>
      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="mf">1.0</code><code class="o">);</code>
    <code class="n">Rental</code> <code class="n">notebookRental</code> <code class="o">=</code>
      <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">when</code><code class="o">(</code><code class="n">notebookRental</code><code class="o">.</code><code class="na">getCharge</code><code class="o">())</code>
      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="mf">6.0</code><code class="o">);</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mf">12.0</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">godfatherRental</code><code class="o">,</code> <code class="n">lionKingRental</code><code class="o">,</code>
        <code class="n">scarfaceRental</code><code class="o">,</code> <code class="n">notebookRental</code><code class="o">)</code>
      <code class="o">.</code><code class="na">build</code><code class="o">().</code><code class="na">getTotalCharge</code><code class="o">(),</code>
      <code class="mi">0</code><code class="o">);</code>
  <code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre>  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">totalPointsWith2Rentals</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">Rental</code> <code class="n">godfatherRental</code> <code class="o">=</code>
      <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">when</code><code class="o">(</code><code class="n">godfatherRental</code><code class="o">.</code><code class="na">getPoints</code><code class="o">())</code>
      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="mi">2</code><code class="o">);</code>
    <code class="n">Rental</code> <code class="n">lionKingRental</code> <code class="o">=</code>
      <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">when</code><code class="o">(</code><code class="n">lionKingRental</code><code class="o">.</code><code class="na">getPoints</code><code class="o">())</code>
      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="mi">1</code><code class="o">);</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mi">3</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">godfatherRental</code><code class="o">,</code> <code class="n">lionKingRental</code><code class="o">)</code>
      <code class="o">.</code><code class="na">build</code><code class="o">().</code><code class="na">getTotalPoints</code><code class="o">());</code>
  <code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre>  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">totalPointsWith4Rentals</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">Rental</code> <code class="n">godfatherRental</code> <code class="o">=</code>
      <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">when</code><code class="o">(</code><code class="n">godfatherRental</code><code class="o">.</code><code class="na">getPoints</code><code class="o">())</code>
      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="mi">2</code><code class="o">);</code>
    <code class="n">Rental</code> <code class="n">lionKingRental</code> <code class="o">=</code>
      <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">when</code><code class="o">(</code><code class="n">lionKingRental</code><code class="o">.</code><code class="na">getPoints</code><code class="o">())</code>
      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="mi">1</code><code class="o">);</code>
    <code class="n">Rental</code> <code class="n">scarfaceRental</code> <code class="o">=</code>
      <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">when</code><code class="o">(</code><code class="n">scarfaceRental</code><code class="o">.</code><code class="na">getPoints</code><code class="o">())</code>
      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="mi">1</code><code class="o">);</code>
    <code class="n">Rental</code> <code class="n">notebookRental</code> <code class="o">=</code>
      <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">when</code><code class="o">(</code><code class="n">notebookRental</code><code class="o">.</code><code class="na">getPoints</code><code class="o">())</code>
      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="mi">1</code><code class="o">);</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mi">5</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">godfatherRental</code><code class="o">,</code> <code class="n">lionKingRental</code><code class="o">,</code>
        <code class="n">scarfaceRental</code><code class="o">,</code> <code class="n">notebookRental</code><code class="o">)</code>
      <code class="o">.</code><code class="na">build</code><code class="o">().</code><code class="na">getTotalPoints</code><code class="o">());</code>
  <code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="uil">  <code class="nd">@Test</code>
</code><code class="uil">  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">getName</code><code class="o">()</code> <code class="o">{</code>
</code><code class="uil">    <code class="n">assertEquals</code><code class="o">(</code>
</code><code class="uil">      <code class="s">"Jim"</code><code class="o">,</code>
</code><code class="uil">      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">build</code><code class="o">().</code><code class="na">getName</code><code class="o">());</code>
</code><code class="uil">  <code class="o">}</code>
</code><code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">PidWriter</code> <code class="o">{</code>
  <code class="kd">public</code> <code class="kd">static</code> <code class="kt">void</code> <code class="nf">writePid</code><code class="o">(</code>
    <code class="n">String</code> <code class="n">filename</code><code class="o">,</code>
    <code class="n">RuntimeMXBean</code> <code class="n">bean</code><code class="o">)</code> <code class="o">{</code>
    <code class="k">try</code> <code class="o">{</code>
      <code class="n">writePidtoFile</code><code class="o">(</code><code class="n">filename</code><code class="o">,</code> <code class="n">bean</code><code class="o">);</code>
    <code class="o">}</code> <code class="k">catch</code> <code class="o">(</code><code class="n">IOException</code> <code class="n">e</code><code class="o">)</code> <code class="o">{</code>
      <code class="k">throw</code> <code class="k">new</code> <code class="nf">RuntimeException</code><code class="o">(</code><code class="n">e</code><code class="o">);</code>
    <code class="o">}</code>
  <code class="o">}</code>

  <code class="kd">private</code> <code class="kd">static</code> <code class="kt">void</code> <code class="nf">writePidtoFile</code><code class="o">(</code>
    <code class="n">String</code> <code class="n">filename</code><code class="o">,</code>
    <code class="n">RuntimeMXBean</code> <code class="n">bean</code><code class="o">)</code> <code class="kd">throws</code> <code class="n">IOException</code> <code class="o">{</code>
    <code class="n">FileWriter</code> <code class="n">writer</code> <code class="o">=</code>
      <code class="k">new</code> <code class="nf">FileWriter</code><code class="o">(</code><code class="n">filename</code><code class="o">);</code>
    <code class="k">try</code> <code class="o">{</code>
      <code class="n">String</code> <code class="n">runtimeName</code> <code class="o">=</code> <code class="n">bean</code><code class="o">.</code><code class="na">getName</code><code class="o">();</code>
      <code class="n">writer</code><code class="o">.</code><code class="na">write</code><code class="o">(</code>
        <code class="n">runtimeName</code><code class="o">.</code><code class="na">substring</code><code class="o">(</code>
          <code class="mi">0</code><code class="o">,</code> <code class="n">runtimeName</code><code class="o">.</code><code class="na">indexOf</code><code class="o">(</code><code class="sc">'@'</code><code class="o">)));</code>
    <code class="o">}</code>
    <code class="k">finally</code> <code class="o">{</code>
      <code class="n">writer</code><code class="o">.</code><code class="na">close</code><code class="o">();</code>
    <code class="o">}</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">PidWriterTest</code> <code class="o">{</code>
  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">writePid</code><code class="o">()</code> <code class="kd">throws</code> <code class="n">Exception</code> <code class="o">{</code>
    <code class="n">RuntimeMXBean</code> <code class="n">bean</code> <code class="o">=</code>
      <code class="n">mock</code><code class="o">(</code><code class="n">RuntimeMXBean</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">when</code><code class="o">(</code><code class="n">bean</code><code class="o">.</code><code class="na">getName</code><code class="o">()).</code><code class="na">thenReturn</code><code class="o">(</code><code class="s">"12@X"</code><code class="o">);</code>
    <code class="n">PidWriter</code><code class="o">.</code><code class="na">writePid</code><code class="o">(</code>
      <code class="s">"/tmp/sample.pid"</code><code class="o">,</code> <code class="n">bean</code><code class="o">);</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="s">"12"</code><code class="o">,</code>
      <code class="n">Files</code><code class="o">.</code><code class="na">readAllLines</code><code class="o">(</code>
        <code class="n">Paths</code><code class="o">.</code><code class="na">get</code><code class="o">(</code><code class="s">"/tmp/sample.pid"</code><code class="o">),</code>
        <code class="n">Charset</code><code class="o">.</code><code class="na">defaultCharset</code><code class="o">()).</code><code class="na">get</code><code class="o">(</code><code class="mi">0</code><code class="o">));</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">FileWriterGateway</code>
  <code class="kd">extends</code> <code class="n">FileWriter</code> <code class="o">{</code>

  <code class="kd">public</code> <code class="kd">static</code> <code class="kt">boolean</code> <code class="n">disallowAccess</code> <code class="o">=</code>
    <code class="kc">false</code><code class="o">;</code>

  <code class="kd">public</code> <code class="nf">FileWriterGateway</code><code class="o">(</code>
    <code class="n">String</code> <code class="n">filename</code><code class="o">)</code> <code class="kd">throws</code> <code class="n">IOException</code> <code class="o">{</code>
    <code class="kd">super</code><code class="o">(</code><code class="n">filename</code><code class="o">);</code>
    <code class="k">if</code> <code class="o">(</code><code class="n">disallowAccess</code><code class="o">)</code> <code class="o">{</code>
      <code class="k">throw</code> <code class="k">new</code> <code class="nf">RuntimeException</code><code class="o">(</code>
        <code class="s">"access disallowed"</code><code class="o">);</code>
    <code class="o">}</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">PidWriter</code> <code class="o">{</code>
  <code class="kd">public</code> <code class="kd">static</code> <code class="kt">void</code> <code class="nf">writePid</code><code class="o">(</code>
    <code class="n">String</code> <code class="n">filename</code><code class="o">,</code>
    <code class="n">RuntimeMXBean</code> <code class="n">bean</code><code class="o">)</code> <code class="o">{</code>
    <code class="k">try</code> <code class="o">{</code>
      <code class="n">writePidtoFile</code><code class="o">(</code><code class="n">filename</code><code class="o">,</code> <code class="n">bean</code><code class="o">);</code>
    <code class="o">}</code> <code class="k">catch</code> <code class="o">(</code><code class="n">IOException</code> <code class="n">e</code><code class="o">)</code> <code class="o">{</code>
      <code class="k">throw</code> <code class="k">new</code> <code class="nf">RuntimeException</code><code class="o">(</code><code class="n">e</code><code class="o">);</code>
    <code class="o">}</code>
  <code class="o">}</code>

  <code class="kd">private</code> <code class="kd">static</code> <code class="kt">void</code> <code class="nf">writePidtoFile</code><code class="o">(</code>
    <code class="n">String</code> <code class="n">filename</code><code class="o">,</code>
    <code class="n">RuntimeMXBean</code> <code class="n">bean</code><code class="o">)</code> <code class="kd">throws</code> <code class="n">IOException</code> <code class="o">{</code>
<code class="uil">    <code class="n">FileWriterGateway</code> <code class="n">writer</code> <code class="o">=</code>
</code><code class="uil">      <code class="k">new</code> <code class="nf">FileWriterGateway</code><code class="o">(</code><code class="n">filename</code><code class="o">);</code>
</code>    <code class="k">try</code> <code class="o">{</code>
      <code class="n">String</code> <code class="n">runtimeName</code> <code class="o">=</code> <code class="n">bean</code><code class="o">.</code><code class="na">getName</code><code class="o">();</code>
      <code class="n">writer</code><code class="o">.</code><code class="na">write</code><code class="o">(</code>
        <code class="n">runtimeName</code><code class="o">.</code><code class="na">substring</code><code class="o">(</code>
          <code class="mi">0</code><code class="o">,</code> <code class="n">runtimeName</code><code class="o">.</code><code class="na">indexOf</code><code class="o">(</code><code class="sc">'@'</code><code class="o">)));</code>
    <code class="o">}</code>
    <code class="k">finally</code> <code class="o">{</code>
      <code class="n">writer</code><code class="o">.</code><code class="na">close</code><code class="o">();</code>
    <code class="o">}</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">PidWriterTest</code> <code class="kd">extends</code> <code class="n">Solitary</code> <code class="o">{</code>
  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">writePid</code><code class="o">()</code> <code class="kd">throws</code> <code class="n">Exception</code> <code class="o">{</code>
    <code class="n">RuntimeMXBean</code> <code class="n">bean</code> <code class="o">=</code>
      <code class="n">mock</code><code class="o">(</code><code class="n">RuntimeMXBean</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">when</code><code class="o">(</code><code class="n">bean</code><code class="o">.</code><code class="na">getName</code><code class="o">()).</code><code class="na">thenReturn</code><code class="o">(</code><code class="s">"12@X"</code><code class="o">);</code>
    <code class="n">PidWriter</code><code class="o">.</code><code class="na">writePid</code><code class="o">(</code>
      <code class="s">"/tmp/sample.pid"</code><code class="o">,</code> <code class="n">bean</code><code class="o">);</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="s">"12"</code><code class="o">,</code>
      <code class="n">Files</code><code class="o">.</code><code class="na">readAllLines</code><code class="o">(</code>
        <code class="n">Paths</code><code class="o">.</code><code class="na">get</code><code class="o">(</code><code class="s">"/tmp/sample.pid"</code><code class="o">),</code>
        <code class="n">Charset</code><code class="o">.</code><code class="na">defaultCharset</code><code class="o">()).</code><code class="na">get</code><code class="o">(</code><code class="mi">0</code><code class="o">));</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="n">JUnit</code> <code class="n">version</code> <code class="mf">4.11</code>
<code class="o">.</code><code class="na">E</code>
<code class="n">There</code> <code class="n">was</code> <code class="mi">1</code> <code class="nl">failure:</code>
<code class="mi">1</code><code class="o">)</code> <code class="n">writePid</code><code class="o">(</code><code class="n">PidWriterTest</code><code class="o">)</code>
<code class="n">java</code><code class="o">.</code><code class="na">lang</code><code class="o">.</code><code class="na">RuntimeException</code><code class="o">:</code> <code class="n">access</code> <code class="n">disallowed</code>

<code class="n">FAILURES</code><code class="o">!!!</code>
<code class="n">Tests</code> <code class="nl">run:</code> <code class="mi">1</code><code class="o">,</code>  <code class="nl">Failures:</code> <code class="mi">1</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">Solitary</code> <code class="o">{</code>
  <code class="nd">@Before</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">setup</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">FileWriterGateway</code><code class="o">.</code><code class="na">disallowAccess</code> <code class="o">=</code> <code class="kc">true</code><code class="o">;</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">PidWriterTest</code> <code class="kd">extends</code> <code class="n">Solitary</code> <code class="o">{</code>
  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">writePid</code><code class="o">()</code> <code class="kd">throws</code> <code class="n">Exception</code> <code class="o">{</code>
    <code class="n">RuntimeMXBean</code> <code class="n">bean</code> <code class="o">=</code>
      <code class="n">mock</code><code class="o">(</code><code class="n">RuntimeMXBean</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">when</code><code class="o">(</code><code class="n">bean</code><code class="o">.</code><code class="na">getName</code><code class="o">()).</code><code class="na">thenReturn</code><code class="o">(</code><code class="s">"12@X"</code><code class="o">);</code>
    <code class="n">FileWriterGateway</code> <code class="n">facade</code> <code class="o">=</code>
      <code class="n">mock</code><code class="o">(</code><code class="n">FileWriterGateway</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">PidWriter</code><code class="o">.</code><code class="na">writePid</code><code class="o">(</code><code class="n">facade</code><code class="o">,</code> <code class="n">bean</code><code class="o">);</code>
    <code class="n">verify</code><code class="o">(</code><code class="n">facade</code><code class="o">).</code><code class="na">write</code><code class="o">(</code><code class="s">"12"</code><code class="o">);</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">PidWriter</code> <code class="o">{</code>
  <code class="kd">public</code> <code class="kd">static</code> <code class="kt">void</code> <code class="nf">writePid</code><code class="o">(</code>
    <code class="n">String</code> <code class="n">filename</code><code class="o">,</code>
    <code class="n">RuntimeMXBean</code> <code class="n">bean</code><code class="o">)</code> <code class="o">{</code>
    <code class="k">try</code> <code class="o">{</code>
      <code class="n">FileWriterGateway</code> <code class="n">writer</code> <code class="o">=</code>
        <code class="k">new</code> <code class="nf">FileWriterGateway</code><code class="o">(</code><code class="n">filename</code><code class="o">);</code>
      <code class="n">writePid</code><code class="o">(</code><code class="n">writer</code><code class="o">,</code> <code class="n">bean</code><code class="o">);</code>
    <code class="o">}</code> <code class="k">catch</code> <code class="o">(</code><code class="n">IOException</code> <code class="n">e</code><code class="o">)</code> <code class="o">{</code>
      <code class="k">throw</code> <code class="k">new</code> <code class="nf">RuntimeException</code><code class="o">(</code><code class="n">e</code><code class="o">);</code>
    <code class="o">}</code>
  <code class="o">}</code>

<code class="uil">  <code class="kd">public</code> <code class="kd">static</code> <code class="kt">void</code> <code class="nf">writePid</code><code class="o">(</code>
</code><code class="uil">    <code class="n">FileWriterGateway</code> <code class="n">facade</code><code class="o">,</code>
</code><code class="uil">    <code class="n">RuntimeMXBean</code> <code class="n">bean</code><code class="o">)</code> <code class="o">{</code>
</code><code class="uil">    <code class="k">try</code> <code class="o">{</code>
</code><code class="uil">      <code class="n">writePidtoFile</code><code class="o">(</code><code class="n">facade</code><code class="o">,</code> <code class="n">bean</code><code class="o">);</code>
</code><code class="uil">    <code class="o">}</code> <code class="k">catch</code> <code class="o">(</code><code class="n">IOException</code> <code class="n">e</code><code class="o">)</code> <code class="o">{</code>
</code><code class="uil">      <code class="k">throw</code> <code class="k">new</code> <code class="nf">RuntimeException</code><code class="o">(</code><code class="n">e</code><code class="o">);</code>
</code><code class="uil">    <code class="o">}</code>
</code><code class="uil">  <code class="o">}</code>
</code></pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre>  <code class="kd">private</code> <code class="kd">static</code> <code class="kt">void</code> <code class="nf">writePidtoFile</code><code class="o">(</code>
    <code class="n">FileWriterGateway</code> <code class="n">facade</code><code class="o">,</code>
    <code class="n">RuntimeMXBean</code> <code class="n">bean</code><code class="o">)</code> <code class="kd">throws</code> <code class="n">IOException</code> <code class="o">{</code>
    <code class="k">try</code> <code class="o">{</code>
      <code class="n">String</code> <code class="n">runtimeName</code> <code class="o">=</code> <code class="n">bean</code><code class="o">.</code><code class="na">getName</code><code class="o">();</code>
      <code class="n">facade</code><code class="o">.</code><code class="na">write</code><code class="o">(</code>
        <code class="n">runtimeName</code><code class="o">.</code><code class="na">substring</code><code class="o">(</code>
          <code class="mi">0</code><code class="o">,</code> <code class="n">runtimeName</code><code class="o">.</code><code class="na">indexOf</code><code class="o">(</code><code class="sc">'@'</code><code class="o">)));</code>
    <code class="o">}</code> <code class="k">catch</code> <code class="o">(</code><code class="n">IOException</code> <code class="n">e</code><code class="o">)</code> <code class="o">{</code>
      <code class="k">throw</code> <code class="k">new</code> <code class="nf">RuntimeException</code><code class="o">(</code><code class="n">e</code><code class="o">);</code>
    <code class="o">}</code>
    <code class="k">finally</code> <code class="o">{</code>
      <code class="n">facade</code><code class="o">.</code><code class="na">close</code><code class="o">();</code>
    <code class="o">}</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">PidWriterTest</code> <code class="kd">extends</code> <code class="n">Sociable</code> <code class="o">{</code>
  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">writePid</code><code class="o">()</code> <code class="kd">throws</code> <code class="n">Exception</code> <code class="o">{</code>
    <code class="n">RuntimeMXBean</code> <code class="n">bean</code> <code class="o">=</code>
      <code class="n">mock</code><code class="o">(</code><code class="n">RuntimeMXBean</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">when</code><code class="o">(</code><code class="n">bean</code><code class="o">.</code><code class="na">getName</code><code class="o">()).</code><code class="na">thenReturn</code><code class="o">(</code><code class="s">"12@X"</code><code class="o">);</code>
    <code class="n">PidWriter</code><code class="o">.</code><code class="na">writePid</code><code class="o">(</code>
      <code class="s">"/tmp/wewut/sample.pid"</code><code class="o">,</code> <code class="n">bean</code><code class="o">);</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="s">"12"</code><code class="o">,</code>
      <code class="n">Files</code><code class="o">.</code><code class="na">readAllLines</code><code class="o">(</code>
        <code class="n">Paths</code><code class="o">.</code><code class="na">get</code><code class="o">(</code><code class="s">"/tmp/wewut/sample.pid"</code><code class="o">),</code>
        <code class="n">Charset</code><code class="o">.</code><code class="na">defaultCharset</code><code class="o">()).</code><code class="na">get</code><code class="o">(</code><code class="mi">0</code><code class="o">));</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">Sociable</code> <code class="o">{</code>
  <code class="nd">@Before</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">setup</code><code class="o">()</code>
    <code class="kd">throws</code> <code class="n">Exception</code> <code class="o">{</code>
    <code class="n">Process</code> <code class="n">p</code><code class="o">;</code>
    <code class="n">p</code> <code class="o">=</code> <code class="n">Runtime</code><code class="o">.</code><code class="na">getRuntime</code><code class="o">().</code><code class="na">exec</code><code class="o">(</code>
      <code class="s">"rm -rf /tmp/wewut"</code><code class="o">);</code>
    <code class="n">p</code><code class="o">.</code><code class="na">waitFor</code><code class="o">();</code>
    <code class="n">p</code> <code class="o">=</code> <code class="n">Runtime</code><code class="o">.</code><code class="na">getRuntime</code><code class="o">().</code><code class="na">exec</code><code class="o">(</code>
      <code class="s">"mkdir -p /tmp/wewut"</code><code class="o">);</code>
    <code class="n">p</code><code class="o">.</code><code class="na">waitFor</code><code class="o">();</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">Rental</code> <code class="o">{</code>

  <code class="n">Movie</code> <code class="n">movie</code><code class="o">;</code>
  <code class="kd">private</code> <code class="kt">int</code> <code class="n">daysRented</code><code class="o">;</code>
  <code class="kd">private</code> <code class="kt">boolean</code> <code class="n">started</code><code class="o">;</code>
<code class="uil">  <code class="kd">private</code> <code class="n">DateTime</code> <code class="n">creationDateTime</code><code class="o">;</code>
</code>
  <code class="kd">public</code> <code class="nf">Rental</code><code class="o">(</code>
    <code class="n">Movie</code> <code class="n">movie</code><code class="o">,</code>
    <code class="kt">int</code> <code class="n">daysRented</code><code class="o">,</code>
<code class="uil">    <code class="n">DateTime</code> <code class="n">creationDateTime</code><code class="o">)</code> <code class="o">{</code>
</code>    <code class="k">this</code><code class="o">.</code><code class="na">movie</code> <code class="o">=</code> <code class="n">movie</code><code class="o">;</code>
    <code class="k">this</code><code class="o">.</code><code class="na">daysRented</code> <code class="o">=</code> <code class="n">daysRented</code><code class="o">;</code>
<code class="uil">    <code class="k">this</code><code class="o">.</code><code class="na">creationDateTime</code> <code class="o">=</code> <code class="n">creationDateTime</code><code class="o">;</code>
</code>  <code class="o">}</code>

  <code class="kd">public</code> <code class="nf">Rental</code><code class="o">(</code><code class="n">Movie</code> <code class="n">movie</code><code class="o">,</code> <code class="kt">int</code> <code class="n">daysRented</code><code class="o">)</code> <code class="o">{</code>
<code class="uil">    <code class="k">this</code><code class="o">(</code><code class="n">movie</code><code class="o">,</code> <code class="n">daysRented</code><code class="o">,</code> <code class="k">new</code> <code class="n">DateTime</code><code class="o">());</code>
</code>  <code class="o">}</code>

<code class="uil">  <code class="kd">public</code> <code class="n">DateTime</code> <code class="nf">getCreationDateTime</code><code class="o">()</code> <code class="o">{</code>
</code><code class="uil">    <code class="k">return</code> <code class="n">creationDateTime</code><code class="o">;</code>
</code><code class="uil">  <code class="o">}</code>
</code><code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">RentalTest</code> <code class="o">{</code>
  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">creationDateTimeNow</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">DateTimeUtils</code><code class="o">.</code><code class="na">setCurrentMillisFixed</code><code class="o">(</code><code class="mi">1000</code><code class="o">);</code>
    <code class="n">Rental</code> <code class="n">rental</code> <code class="o">=</code> <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">.</code><code class="na">build</code><code class="o">();</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mi">1000</code><code class="o">,</code>
      <code class="n">rental</code><code class="o">.</code><code class="na">getCreationDateTime</code><code class="o">()</code>
      <code class="o">.</code><code class="na">getMillis</code><code class="o">());</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">creationDateTimeSet</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">Rental</code> <code class="n">rental</code> <code class="o">=</code>
      <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="k">new</code> <code class="nf">DateTime</code><code class="o">(</code><code class="mi">199</code><code class="o">)).</code><code class="na">build</code><code class="o">();</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mi">199</code><code class="o">,</code>
      <code class="n">rental</code><code class="o">.</code><code class="na">getCreationDateTime</code><code class="o">()</code>
      <code class="o">.</code><code class="na">getMillis</code><code class="o">());</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">RentalTest</code> <code class="o">{</code>
  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">creationDateTimeNow</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">DateTimeUtils</code><code class="o">.</code><code class="na">setCurrentMillisFixed</code><code class="o">(</code><code class="mi">1000</code><code class="o">);</code>
    <code class="n">Rental</code> <code class="n">rental</code> <code class="o">=</code> <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">.</code><code class="na">build</code><code class="o">();</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mi">1000</code><code class="o">,</code>
      <code class="n">rental</code><code class="o">.</code><code class="na">getCreationDateTime</code><code class="o">()</code>
      <code class="o">.</code><code class="na">getMillis</code><code class="o">());</code>
<code class="uil">    <code class="n">DateTimeUtils</code><code class="o">.</code><code class="na">setCurrentMillisSystem</code><code class="o">();</code>
</code>  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">creationDateTimeSet</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">Rental</code> <code class="n">rental</code> <code class="o">=</code>
      <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="k">new</code> <code class="nf">DateTime</code><code class="o">(</code><code class="mi">199</code><code class="o">)).</code><code class="na">build</code><code class="o">();</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mi">199</code><code class="o">,</code>
      <code class="n">rental</code><code class="o">.</code><code class="na">getCreationDateTime</code><code class="o">()</code>
      <code class="o">.</code><code class="na">getMillis</code><code class="o">());</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">Solitary</code> <code class="o">{</code>
  <code class="nd">@Before</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">setup</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">FileWriterGateway</code><code class="o">.</code><code class="na">disallowAccess</code> <code class="o">=</code> <code class="kc">true</code><code class="o">;</code>
    <code class="n">DateTimeUtils</code><code class="o">.</code><code class="na">setCurrentMillisFixed</code><code class="o">(</code><code class="mi">1000</code><code class="o">);</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">RentalTest</code> <code class="kd">extends</code> <code class="n">Solitary</code> <code class="o">{</code>
  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">creationDateTimeNow</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">Rental</code> <code class="n">rental</code> <code class="o">=</code> <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">.</code><code class="na">build</code><code class="o">();</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mi">1000</code><code class="o">,</code>
      <code class="n">rental</code><code class="o">.</code><code class="na">getCreationDateTime</code><code class="o">()</code>
      <code class="o">.</code><code class="na">getMillis</code><code class="o">());</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">creationDateTimeSet</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">Rental</code> <code class="n">rental</code> <code class="o">=</code>
      <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="k">new</code> <code class="nf">DateTime</code><code class="o">(</code><code class="mi">199</code><code class="o">)).</code><code class="na">build</code><code class="o">();</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mi">199</code><code class="o">,</code>
      <code class="n">rental</code><code class="o">.</code><code class="na">getCreationDateTime</code><code class="o">()</code>
      <code class="o">.</code><code class="na">getMillis</code><code class="o">());</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">CustomerTest</code> <code class="o">{</code>
  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">noRentalsStatement</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="s">"Rental record for Jim\nAmount owed "</code> <code class="o">+</code>
      <code class="s">"is 0.0\n"</code> <code class="o">+</code>
      <code class="s">"You earned 0 frequent renter points"</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">build</code><code class="o">().</code><code class="na">statement</code><code class="o">());</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">oneRentalStatement</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="s">"Rental record for Jim\n"</code> <code class="o">+</code>
      <code class="s">"\tGodfather 4 9.0\n"</code> <code class="o">+</code>
      <code class="s">"Amount owed is 9.0\n"</code> <code class="o">+</code>
      <code class="s">"You earned 2 frequent renter points"</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">statement</code><code class="o">());</code>
  <code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre>  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">twoRentalsStatement</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="s">"Rental record for Jim\n"</code> <code class="o">+</code>
      <code class="s">"\tGodfather 4 9.0\n"</code> <code class="o">+</code>
      <code class="s">"\tGodfather 4 9.0\n"</code> <code class="o">+</code>
      <code class="s">"Amount owed is 18.0\n"</code> <code class="o">+</code>
      <code class="s">"You earned 4 frequent renter points"</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">,</code> <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">).</code><code class="na">build</code><code class="o">()</code>
      <code class="o">.</code><code class="na">statement</code><code class="o">());</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">noRentalsGetTotalPoints</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mi">0</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">build</code><code class="o">().</code><code class="na">getTotalPoints</code><code class="o">());</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">oneRentalGetTotalPoints</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mi">2</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">getTotalPoints</code><code class="o">());</code>
  <code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre>  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">twoRentalsGetTotalPoints</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mi">4</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">,</code> <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">)</code>
      <code class="o">.</code><code class="na">build</code><code class="o">()</code>
      <code class="o">.</code><code class="na">getTotalPoints</code><code class="o">());</code>
  <code class="o">}</code>

  <code class="c1">// 3 tests for htmlStatement()</code>
  <code class="c1">// left to the imagination</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">RentalTest</code> <code class="o">{</code>
  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">getPointsFromMovie</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mi">2</code><code class="o">,</code> <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">.</code><code class="na">build</code><code class="o">().</code><code class="na">getPoints</code><code class="o">());</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">MovieTest</code> <code class="o">{</code>
  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">getPoints</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mi">2</code><code class="o">,</code> <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">build</code><code class="o">().</code><code class="na">getPoints</code><code class="o">(</code><code class="mi">2</code><code class="o">));</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="n">JUnit</code> <code class="n">version</code> <code class="mf">4.11</code>
<code class="o">...</code><code class="na">E</code><code class="o">.</code><code class="na">E</code><code class="o">.</code><code class="na">E</code><code class="o">.</code><code class="na">E</code>
<code class="n">There</code> <code class="n">were</code> <code class="mi">4</code> <code class="nl">failures:</code>
<code class="mi">1</code><code class="o">)</code> <code class="n">twoRentalsStatement</code><code class="o">(</code><code class="n">sociable</code><code class="o">.</code><code class="na">CustomerTest</code><code class="o">)</code>
<code class="n">org</code><code class="o">.</code><code class="na">junit</code><code class="o">.</code><code class="na">ComparisonFailure</code><code class="o">:</code> <code class="nl">expected:</code><code class="o">&lt;...</code> <code class="n">is</code> <code class="mf">18.0</code>
<code class="n">You</code> <code class="n">earned</code> <code class="o">[</code><code class="mi">4</code><code class="o">]</code> <code class="n">frequent</code> <code class="n">renter</code> <code class="n">poi</code><code class="o">...&gt;</code> <code class="n">but</code> <code class="nl">was:</code><code class="o">&lt;.</code><code class="err">\</code>
<code class="o">..</code> <code class="n">is</code> <code class="mf">18.0</code>
<code class="n">You</code> <code class="n">earned</code> <code class="o">[</code><code class="mi">6</code><code class="o">]</code> <code class="n">frequent</code> <code class="n">renter</code> <code class="n">poi</code><code class="o">...&gt;</code>
<code class="mi">2</code><code class="o">)</code> <code class="n">oneRentalGetTotalPoints</code><code class="o">(</code><code class="n">sociable</code><code class="o">.</code><code class="na">CustomerTest</code><code class="o">)</code>
<code class="n">java</code><code class="o">.</code><code class="na">lang</code><code class="o">.</code><code class="na">AssertionError</code><code class="o">:</code> <code class="nl">expected:</code><code class="o">&lt;</code><code class="mi">2</code><code class="o">&gt;</code> <code class="n">but</code> <code class="nl">was:</code><code class="o">&lt;</code><code class="mi">3</code><code class="o">&gt;</code>
<code class="mi">3</code><code class="o">)</code> <code class="n">oneRentalStatement</code><code class="o">(</code><code class="n">sociable</code><code class="o">.</code><code class="na">CustomerTest</code><code class="o">)</code>
<code class="n">org</code><code class="o">.</code><code class="na">junit</code><code class="o">.</code><code class="na">ComparisonFailure</code><code class="o">:</code> <code class="nl">expected:</code><code class="o">&lt;...</code><code class="na">d</code> <code class="n">is</code> <code class="mf">9.0</code>
<code class="n">You</code> <code class="n">earned</code> <code class="o">[</code><code class="mi">2</code><code class="o">]</code> <code class="n">frequent</code> <code class="n">renter</code> <code class="n">poi</code><code class="o">...&gt;</code> <code class="n">but</code> <code class="nl">was:</code><code class="o">&lt;.</code><code class="err">\</code>
<code class="o">..</code><code class="na">d</code> <code class="n">is</code> <code class="mf">9.0</code>
<code class="n">You</code> <code class="n">earned</code> <code class="o">[</code><code class="mi">3</code><code class="o">]</code> <code class="n">frequent</code> <code class="n">renter</code> <code class="n">poi</code><code class="o">...&gt;</code>
<code class="mi">4</code><code class="o">)</code> <code class="n">twoRentalsGetTotalPoints</code><code class="o">(</code><code class="n">sociable</code><code class="o">.</code><code class="na">CustomerTest</code><code class="o">)</code>
<code class="n">java</code><code class="o">.</code><code class="na">lang</code><code class="o">.</code><code class="na">AssertionError</code><code class="o">:</code> <code class="nl">expected:</code><code class="o">&lt;</code><code class="mi">4</code><code class="o">&gt;</code> <code class="n">but</code> <code class="nl">was:</code><code class="o">&lt;</code><code class="mi">6</code><code class="o">&gt;</code>

<code class="n">FAILURES</code><code class="o">!!!</code>
<code class="n">Tests</code> <code class="nl">run:</code> <code class="mi">6</code><code class="o">,</code>  <code class="nl">Failures:</code> <code class="mi">4</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="n">JUnit</code> <code class="n">version</code> <code class="mf">4.11</code>
<code class="o">.</code><code class="na">E</code>
<code class="n">There</code> <code class="n">was</code> <code class="mi">1</code> <code class="nl">failure:</code>
<code class="mi">1</code><code class="o">)</code> <code class="n">getPointsFromMovie</code><code class="o">(</code><code class="n">sociable</code><code class="o">.</code><code class="na">RentalTest</code><code class="o">)</code>
<code class="n">java</code><code class="o">.</code><code class="na">lang</code><code class="o">.</code><code class="na">AssertionError</code><code class="o">:</code> <code class="nl">expected:</code><code class="o">&lt;</code><code class="mi">2</code><code class="o">&gt;</code> <code class="n">but</code> <code class="nl">was:</code><code class="o">&lt;</code><code class="mi">3</code><code class="o">&gt;</code>

<code class="n">FAILURES</code><code class="o">!!!</code>
<code class="n">Tests</code> <code class="nl">run:</code> <code class="mi">1</code><code class="o">,</code>  <code class="nl">Failures:</code> <code class="mi">1</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="n">JUnit</code> <code class="n">version</code> <code class="mf">4.11</code>
<code class="o">.</code><code class="na">E</code>
<code class="n">There</code> <code class="n">was</code> <code class="mi">1</code> <code class="nl">failure:</code>
<code class="mi">1</code><code class="o">)</code> <code class="n">getPoints</code><code class="o">(</code><code class="n">sociable</code><code class="o">.</code><code class="na">MovieTest</code><code class="o">)</code>
<code class="n">java</code><code class="o">.</code><code class="na">lang</code><code class="o">.</code><code class="na">AssertionError</code><code class="o">:</code> <code class="nl">expected:</code><code class="o">&lt;</code><code class="mi">2</code><code class="o">&gt;</code> <code class="n">but</code> <code class="nl">was:</code><code class="o">&lt;</code><code class="mi">3</code><code class="o">&gt;</code>

<code class="n">FAILURES</code><code class="o">!!!</code>
<code class="n">Tests</code> <code class="nl">run:</code> <code class="mi">1</code><code class="o">,</code>  <code class="nl">Failures:</code> <code class="mi">1</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">NewReleasePrice</code> <code class="kd">extends</code> <code class="n">Price</code> <code class="o">{</code>

  <code class="nd">@Override</code>
  <code class="kd">public</code> <code class="kt">double</code> <code class="nf">getCharge</code><code class="o">(</code><code class="kt">int</code> <code class="n">daysRented</code><code class="o">)</code> <code class="o">{</code>
    <code class="k">return</code> <code class="n">daysRented</code> <code class="o">*</code> <code class="mi">3</code><code class="o">;</code>
  <code class="o">}</code>

  <code class="nd">@Override</code>
  <code class="kd">public</code> <code class="kt">int</code> <code class="nf">getPoints</code><code class="o">(</code><code class="kt">int</code> <code class="n">daysRented</code><code class="o">)</code> <code class="o">{</code>
    <code class="k">if</code> <code class="o">(</code><code class="n">daysRented</code> <code class="o">&gt;</code> <code class="mi">1</code><code class="o">)</code>
<code class="uil">      <code class="k">return</code> <code class="mi">3</code><code class="o">;</code> <code class="c1">// was 2</code>
</code>    <code class="k">return</code> <code class="mi">1</code><code class="o">;</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">CustomerTest</code> <code class="o">{</code>
  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">noRentalsStatement</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="s">"Rental record for Jim\nAmount owed "</code> <code class="o">+</code>
      <code class="s">"is 0.0\n"</code> <code class="o">+</code>
      <code class="s">"You earned 0 frequent renter points"</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">build</code><code class="o">().</code><code class="na">statement</code><code class="o">());</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">oneRentalStatement</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">Rental</code> <code class="n">rental</code> <code class="o">=</code> <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">when</code><code class="o">(</code><code class="n">rental</code><code class="o">.</code><code class="na">getLineItem</code><code class="o">())</code>
      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="s">"Godfather 4 9.0"</code><code class="o">);</code>
    <code class="n">when</code><code class="o">(</code><code class="n">rental</code><code class="o">.</code><code class="na">getCharge</code><code class="o">())</code>
      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="mf">9.0</code><code class="o">);</code>
    <code class="n">when</code><code class="o">(</code><code class="n">rental</code><code class="o">.</code><code class="na">getPoints</code><code class="o">())</code>
      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="mi">2</code><code class="o">);</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="s">"Rental record for Jim\n"</code> <code class="o">+</code>
      <code class="s">"\tGodfather 4 9.0\n"</code> <code class="o">+</code>
      <code class="s">"Amount owed is 9.0\n"</code> <code class="o">+</code>
      <code class="s">"You earned 2 frequent renter points"</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">rental</code><code class="o">).</code><code class="na">build</code><code class="o">()</code>
      <code class="o">.</code><code class="na">statement</code><code class="o">());</code>
  <code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre>  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">twoRentalsStatement</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">Rental</code> <code class="n">one</code> <code class="o">=</code> <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">when</code><code class="o">(</code><code class="n">one</code><code class="o">.</code><code class="na">getLineItem</code><code class="o">())</code>
      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="s">"Godfather 4 9.0"</code><code class="o">);</code>
    <code class="n">when</code><code class="o">(</code><code class="n">one</code><code class="o">.</code><code class="na">getCharge</code><code class="o">())</code>
      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="mf">9.0</code><code class="o">);</code>
    <code class="n">when</code><code class="o">(</code><code class="n">one</code><code class="o">.</code><code class="na">getPoints</code><code class="o">())</code>
      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="mi">2</code><code class="o">);</code>
    <code class="n">Rental</code> <code class="n">two</code> <code class="o">=</code> <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">when</code><code class="o">(</code><code class="n">two</code><code class="o">.</code><code class="na">getLineItem</code><code class="o">())</code>
      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="s">"Godfather 4 9.0"</code><code class="o">);</code>
    <code class="n">when</code><code class="o">(</code><code class="n">two</code><code class="o">.</code><code class="na">getCharge</code><code class="o">())</code>
      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="mf">9.0</code><code class="o">);</code>
    <code class="n">when</code><code class="o">(</code><code class="n">two</code><code class="o">.</code><code class="na">getPoints</code><code class="o">())</code>
      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="mi">2</code><code class="o">);</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="s">"Rental record for Jim\n"</code> <code class="o">+</code>
      <code class="s">"\tGodfather 4 9.0\n"</code> <code class="o">+</code>
      <code class="s">"\tGodfather 4 9.0\n"</code> <code class="o">+</code>
      <code class="s">"Amount owed is 18.0\n"</code> <code class="o">+</code>
      <code class="s">"You earned 4 frequent renter points"</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">one</code><code class="o">,</code> <code class="n">two</code><code class="o">).</code><code class="na">build</code><code class="o">()</code>
      <code class="o">.</code><code class="na">statement</code><code class="o">());</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">noRentalsGetTotalPoints</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mi">0</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">build</code><code class="o">().</code><code class="na">getTotalPoints</code><code class="o">());</code>
  <code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre>  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">oneRentalGetTotalPoints</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">Rental</code> <code class="n">rental</code> <code class="o">=</code> <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">when</code><code class="o">(</code><code class="n">rental</code><code class="o">.</code><code class="na">getPoints</code><code class="o">())</code>
      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="mi">2</code><code class="o">);</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mi">2</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">rental</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">getTotalPoints</code><code class="o">());</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">twoRentalsGetTotalPoints</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">Rental</code> <code class="n">one</code> <code class="o">=</code> <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">when</code><code class="o">(</code><code class="n">one</code><code class="o">.</code><code class="na">getPoints</code><code class="o">())</code>
      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="mi">2</code><code class="o">);</code>
    <code class="n">Rental</code> <code class="n">two</code> <code class="o">=</code> <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">when</code><code class="o">(</code><code class="n">two</code><code class="o">.</code><code class="na">getPoints</code><code class="o">())</code>
      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="mi">3</code><code class="o">);</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mi">5</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">one</code><code class="o">,</code> <code class="n">two</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">getTotalPoints</code><code class="o">());</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">RentalTest</code> <code class="o">{</code>
  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">getPointsFromMovie</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">Movie</code> <code class="n">movie</code> <code class="o">=</code> <code class="n">mock</code><code class="o">(</code><code class="n">Movie</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">when</code><code class="o">(</code><code class="n">movie</code><code class="o">.</code><code class="na">getPoints</code><code class="o">(</code><code class="mi">2</code><code class="o">))</code>
      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="mi">2</code><code class="o">);</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mi">2</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="mi">2</code><code class="o">).</code><code class="na">w</code><code class="o">(</code><code class="n">movie</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">getPoints</code><code class="o">());</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">Rental</code> <code class="o">{</code>

  <code class="n">Movie</code> <code class="n">movie</code><code class="o">;</code>
  <code class="kd">private</code> <code class="kt">int</code> <code class="n">daysRented</code><code class="o">;</code>
  <code class="kd">private</code> <code class="kt">boolean</code> <code class="n">started</code><code class="o">;</code>

  <code class="kd">public</code> <code class="nf">Rental</code><code class="o">(</code>
    <code class="n">Movie</code> <code class="n">movie</code><code class="o">,</code> <code class="kt">int</code> <code class="n">daysRented</code><code class="o">)</code> <code class="o">{</code>
    <code class="k">this</code><code class="o">.</code><code class="na">movie</code> <code class="o">=</code> <code class="n">movie</code><code class="o">;</code>
    <code class="k">this</code><code class="o">.</code><code class="na">daysRented</code> <code class="o">=</code> <code class="n">daysRented</code><code class="o">;</code>
  <code class="o">}</code>

  <code class="kd">public</code> <code class="kt">double</code> <code class="nf">getCharge</code><code class="o">()</code> <code class="o">{</code>
    <code class="k">return</code> <code class="n">movie</code><code class="o">.</code><code class="na">getCharge</code><code class="o">(</code><code class="n">daysRented</code><code class="o">);</code>
  <code class="o">}</code>

  <code class="kd">public</code> <code class="kt">int</code> <code class="nf">getPoints</code><code class="o">()</code> <code class="o">{</code>
    <code class="k">return</code>
      <code class="n">movie</code><code class="o">.</code><code class="na">getPoints</code><code class="o">(</code><code class="n">daysRented</code><code class="o">,</code> <code class="kc">false</code><code class="o">);</code>
  <code class="o">}</code>

<code class="uil">  <code class="kd">public</code> <code class="kt">int</code> <code class="nf">getPoints</code><code class="o">(</code><code class="kt">boolean</code> <code class="n">vipFlag</code><code class="o">)</code> <code class="o">{</code>
</code><code class="uil">    <code class="k">return</code>
</code><code class="uil">      <code class="n">movie</code><code class="o">.</code><code class="na">getPoints</code><code class="o">(</code><code class="n">daysRented</code><code class="o">,</code> <code class="n">vipFlag</code><code class="o">);</code>
</code><code class="uil">  <code class="o">}</code>
</code>
  <code class="kd">public</code> <code class="n">String</code> <code class="nf">getLineItem</code><code class="o">()</code> <code class="o">{</code>
    <code class="k">return</code>
      <code class="n">movie</code><code class="o">.</code><code class="na">getTitle</code><code class="o">()</code> <code class="o">+</code> <code class="s">" "</code> <code class="o">+</code> <code class="n">getCharge</code><code class="o">();</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="n">JUnit</code> <code class="n">version</code> <code class="mf">4.11</code>
<code class="o">...</code><code class="na">E</code><code class="o">.</code><code class="na">E</code><code class="o">.</code><code class="na">E</code><code class="o">.</code><code class="na">E</code>
<code class="n">There</code> <code class="n">were</code> <code class="mi">4</code> <code class="nl">failures:</code>
<code class="mi">1</code><code class="o">)</code> <code class="n">twoRentalsStatement</code><code class="o">(</code><code class="n">solitary</code><code class="o">.</code><code class="na">CustomerTest</code><code class="o">)</code>
<code class="n">org</code><code class="o">.</code><code class="na">junit</code><code class="o">.</code><code class="na">ComparisonFailure</code><code class="o">:</code> <code class="nl">expected:</code><code class="o">&lt;...</code> <code class="n">is</code> <code class="mf">18.0</code>
<code class="n">You</code> <code class="n">earned</code> <code class="o">[</code><code class="mi">4</code><code class="o">]</code> <code class="n">frequent</code> <code class="n">renter</code> <code class="n">poi</code><code class="o">...&gt;</code> <code class="n">but</code> <code class="nl">was:</code><code class="o">&lt;.</code><code class="err">\</code>
<code class="o">..</code> <code class="n">is</code> <code class="mf">18.0</code>
<code class="n">You</code> <code class="n">earned</code> <code class="o">[</code><code class="mi">0</code><code class="o">]</code> <code class="n">frequent</code> <code class="n">renter</code> <code class="n">poi</code><code class="o">...&gt;</code>
<code class="mi">2</code><code class="o">)</code> <code class="n">oneRentalGetTotalPoints</code><code class="o">(</code><code class="n">solitary</code><code class="o">.</code><code class="na">CustomerTest</code><code class="o">)</code>
<code class="n">java</code><code class="o">.</code><code class="na">lang</code><code class="o">.</code><code class="na">AssertionError</code><code class="o">:</code> <code class="nl">expected:</code><code class="o">&lt;</code><code class="mi">2</code><code class="o">&gt;</code> <code class="n">but</code> <code class="nl">was:</code><code class="o">&lt;</code><code class="mi">0</code><code class="o">&gt;</code>
<code class="mi">3</code><code class="o">)</code> <code class="n">oneRentalStatement</code><code class="o">(</code><code class="n">solitary</code><code class="o">.</code><code class="na">CustomerTest</code><code class="o">)</code>
<code class="n">org</code><code class="o">.</code><code class="na">junit</code><code class="o">.</code><code class="na">ComparisonFailure</code><code class="o">:</code> <code class="nl">expected:</code><code class="o">&lt;...</code><code class="na">d</code> <code class="n">is</code> <code class="mf">9.0</code>
<code class="n">You</code> <code class="n">earned</code> <code class="o">[</code><code class="mi">2</code><code class="o">]</code> <code class="n">frequent</code> <code class="n">renter</code> <code class="n">poi</code><code class="o">...&gt;</code> <code class="n">but</code> <code class="nl">was:</code><code class="o">&lt;.</code><code class="err">\</code>
<code class="o">..</code><code class="na">d</code> <code class="n">is</code> <code class="mf">9.0</code>
<code class="n">You</code> <code class="n">earned</code> <code class="o">[</code><code class="mi">0</code><code class="o">]</code> <code class="n">frequent</code> <code class="n">renter</code> <code class="n">poi</code><code class="o">...&gt;</code>
<code class="mi">4</code><code class="o">)</code> <code class="n">twoRentalsGetTotalPoints</code><code class="o">(</code><code class="n">solitary</code><code class="o">.</code><code class="na">CustomerTest</code><code class="o">)</code>
<code class="n">java</code><code class="o">.</code><code class="na">lang</code><code class="o">.</code><code class="na">AssertionError</code><code class="o">:</code> <code class="nl">expected:</code><code class="o">&lt;</code><code class="mi">5</code><code class="o">&gt;</code> <code class="n">but</code> <code class="nl">was:</code><code class="o">&lt;</code><code class="mi">0</code><code class="o">&gt;</code>

<code class="n">FAILURES</code><code class="o">!!!</code>
<code class="n">Tests</code> <code class="nl">run:</code> <code class="mi">6</code><code class="o">,</code>  <code class="nl">Failures:</code> <code class="mi">4</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">CustomerTest</code> <code class="o">{</code>
  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">noRentalsStatement</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="s">"Rental record for Jim\nAmount owed "</code> <code class="o">+</code>
      <code class="s">"is 0.0\n"</code> <code class="o">+</code>
      <code class="s">"You earned 0 frequent renter points"</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">build</code><code class="o">().</code><code class="na">statement</code><code class="o">());</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">oneRentalStatement</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">Rental</code> <code class="n">rental</code> <code class="o">=</code> <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="s">"Rental record for Jim\n\tnull\n"</code> <code class="o">+</code>
      <code class="s">"Amount owed is 0.0\n"</code> <code class="o">+</code>
      <code class="s">"You earned 0 frequent renter points"</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">rental</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">statement</code><code class="o">());</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">twoRentalsStatement</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">Rental</code> <code class="n">rental</code> <code class="o">=</code> <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="s">"Rental record for Jim\n\tnull\n"</code> <code class="o">+</code>
      <code class="s">"\tnull\nAmount owed is 0.0\n"</code> <code class="o">+</code>
      <code class="s">"You earned 0 frequent renter points"</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">rental</code><code class="o">,</code> <code class="n">rental</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">statement</code><code class="o">());</code>
  <code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre>  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">noRentalsGetTotalPoints</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mi">0</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">build</code><code class="o">().</code><code class="na">getTotalPoints</code><code class="o">());</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">oneRentalGetTotalPoints</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">Rental</code> <code class="n">rental</code> <code class="o">=</code> <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">when</code><code class="o">(</code><code class="n">rental</code><code class="o">.</code><code class="na">getPoints</code><code class="o">())</code>
      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="mi">2</code><code class="o">);</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mi">2</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">rental</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">getTotalPoints</code><code class="o">());</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">twoRentalsGetTotalPoints</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">Rental</code> <code class="n">one</code> <code class="o">=</code> <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">when</code><code class="o">(</code><code class="n">one</code><code class="o">.</code><code class="na">getPoints</code><code class="o">())</code>
      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="mi">2</code><code class="o">);</code>
    <code class="n">Rental</code> <code class="n">two</code> <code class="o">=</code> <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">when</code><code class="o">(</code><code class="n">two</code><code class="o">.</code><code class="na">getPoints</code><code class="o">())</code>
      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="mi">3</code><code class="o">);</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mi">5</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">one</code><code class="o">,</code> <code class="n">two</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">getTotalPoints</code><code class="o">());</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="n">JUnit</code> <code class="n">version</code> <code class="mf">4.11</code>
<code class="o">....</code><code class="na">E</code><code class="o">..</code><code class="na">E</code>
<code class="n">There</code> <code class="n">were</code> <code class="mi">2</code> <code class="nl">failures:</code>
<code class="mi">1</code><code class="o">)</code> <code class="n">oneRentalGetTotalPoints</code><code class="o">(</code><code class="n">solitary</code><code class="o">.</code><code class="na">CustomerTest</code><code class="o">)</code>
<code class="n">java</code><code class="o">.</code><code class="na">lang</code><code class="o">.</code><code class="na">AssertionError</code><code class="o">:</code> <code class="nl">expected:</code><code class="o">&lt;</code><code class="mi">2</code><code class="o">&gt;</code> <code class="n">but</code> <code class="nl">was:</code><code class="o">&lt;</code><code class="mi">0</code><code class="o">&gt;</code>
<code class="mi">2</code><code class="o">)</code> <code class="n">twoRentalsGetTotalPoints</code><code class="o">(</code><code class="n">solitary</code><code class="o">.</code><code class="na">CustomerTest</code><code class="o">)</code>
<code class="n">java</code><code class="o">.</code><code class="na">lang</code><code class="o">.</code><code class="na">AssertionError</code><code class="o">:</code> <code class="nl">expected:</code><code class="o">&lt;</code><code class="mi">5</code><code class="o">&gt;</code> <code class="n">but</code> <code class="nl">was:</code><code class="o">&lt;</code><code class="mi">0</code><code class="o">&gt;</code>

<code class="n">FAILURES</code><code class="o">!!!</code>
<code class="n">Tests</code> <code class="nl">run:</code> <code class="mi">6</code><code class="o">,</code>  <code class="nl">Failures:</code> <code class="mi">2</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">MovieTest</code> <code class="o">{</code>
  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">getChargeForChildrens</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mf">1.5</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">CHILDREN</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">getCharge</code><code class="o">(</code><code class="mi">1</code><code class="o">),</code>
      <code class="mi">0</code><code class="o">);</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mf">1.5</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">CHILDREN</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">getCharge</code><code class="o">(</code><code class="mi">2</code><code class="o">),</code>
      <code class="mi">0</code><code class="o">);</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mf">1.5</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">CHILDREN</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">getCharge</code><code class="o">(</code><code class="mi">3</code><code class="o">),</code>
      <code class="mi">0</code><code class="o">);</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mf">3.0</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">CHILDREN</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">getCharge</code><code class="o">(</code><code class="mi">4</code><code class="o">),</code>
      <code class="mi">0</code><code class="o">);</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mf">4.5</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">CHILDREN</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">getCharge</code><code class="o">(</code><code class="mi">5</code><code class="o">),</code>
      <code class="mi">0</code><code class="o">);</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">Movie</code> <code class="o">{</code>

  <code class="kd">public</code> <code class="kd">enum</code> <code class="n">Type</code> <code class="o">{</code>
    <code class="n">REGULAR</code><code class="o">,</code> <code class="n">NEW_RELEASE</code><code class="o">,</code> <code class="n">CHILDREN</code><code class="o">,</code> <code class="n">UNKNOWN</code><code class="o">;</code>
  <code class="o">}</code>

  <code class="kd">private</code> <code class="n">String</code> <code class="n">title</code><code class="o">;</code>
  <code class="n">Price</code> <code class="n">price</code><code class="o">;</code>

  <code class="kd">public</code> <code class="nf">Movie</code><code class="o">(</code>
    <code class="n">String</code> <code class="n">title</code><code class="o">,</code> <code class="n">Movie</code><code class="o">.</code><code class="na">Type</code> <code class="n">priceCode</code><code class="o">)</code> <code class="o">{</code>
    <code class="k">this</code><code class="o">.</code><code class="na">title</code> <code class="o">=</code> <code class="n">title</code><code class="o">;</code>
    <code class="n">setPriceCode</code><code class="o">(</code><code class="n">priceCode</code><code class="o">);</code>
  <code class="o">}</code>

  <code class="kd">public</code> <code class="n">String</code> <code class="nf">getTitle</code><code class="o">()</code> <code class="o">{</code>
    <code class="k">return</code> <code class="n">title</code><code class="o">;</code>
  <code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre>  <code class="kd">private</code> <code class="kt">void</code> <code class="nf">setPriceCode</code><code class="o">(</code>
    <code class="n">Movie</code><code class="o">.</code><code class="na">Type</code> <code class="n">priceCode</code><code class="o">)</code> <code class="o">{</code>
    <code class="k">switch</code> <code class="o">(</code><code class="n">priceCode</code><code class="o">)</code> <code class="o">{</code>
    <code class="k">case</code> <code class="nl">CHILDREN:</code>
      <code class="n">price</code> <code class="o">=</code> <code class="k">new</code> <code class="n">ChildrensPrice</code><code class="o">();</code>
      <code class="k">break</code><code class="o">;</code>
    <code class="k">case</code> <code class="nl">NEW_RELEASE:</code>
      <code class="n">price</code> <code class="o">=</code> <code class="k">new</code> <code class="n">NewReleasePrice</code><code class="o">();</code>
      <code class="k">break</code><code class="o">;</code>
    <code class="k">case</code> <code class="nl">REGULAR:</code>
      <code class="n">price</code> <code class="o">=</code> <code class="k">new</code> <code class="n">RegularPrice</code><code class="o">();</code>
      <code class="k">break</code><code class="o">;</code>
    <code class="k">default</code><code class="o">:</code>
      <code class="k">throw</code> <code class="k">new</code> <code class="nf">IllegalArgumentException</code><code class="o">(</code>
        <code class="s">"invalid price code"</code><code class="o">);</code>
    <code class="o">}</code>
  <code class="o">}</code>

  <code class="kd">public</code> <code class="kt">double</code> <code class="nf">getCharge</code><code class="o">(</code><code class="kt">int</code> <code class="n">daysRented</code><code class="o">)</code> <code class="o">{</code>
    <code class="k">return</code> <code class="n">price</code><code class="o">.</code><code class="na">getCharge</code><code class="o">(</code><code class="n">daysRented</code><code class="o">);</code>
  <code class="o">}</code>

  <code class="kd">public</code> <code class="kt">int</code> <code class="nf">getPoints</code><code class="o">(</code><code class="kt">int</code> <code class="n">daysRented</code><code class="o">)</code> <code class="o">{</code>
    <code class="k">return</code> <code class="n">price</code><code class="o">.</code><code class="na">getPoints</code><code class="o">(</code><code class="n">daysRented</code><code class="o">);</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">ChildrensPrice</code> <code class="kd">extends</code> <code class="n">Price</code> <code class="o">{</code>

  <code class="nd">@Override</code>
  <code class="kd">public</code> <code class="kt">double</code> <code class="nf">getCharge</code><code class="o">(</code><code class="kt">int</code> <code class="n">daysRented</code><code class="o">)</code> <code class="o">{</code>
    <code class="kt">double</code> <code class="n">amount</code> <code class="o">=</code> <code class="mf">1.5</code><code class="o">;</code>
<code class="uil">    <code class="k">if</code> <code class="o">(</code><code class="n">daysRented</code> <code class="o">&gt;</code> <code class="mi">2</code><code class="o">)</code> <code class="c1">// *was 3*</code>
</code><code class="uil">      <code class="n">amount</code> <code class="o">+=</code> <code class="o">(</code><code class="n">daysRented</code> <code class="o">-</code> <code class="mi">2</code><code class="o">)</code> <code class="o">*</code> <code class="mf">1.5</code><code class="o">;</code>
</code>    <code class="k">return</code> <code class="n">amount</code><code class="o">;</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">JavaTest</code> <code class="o">{</code>
  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">arrayListGet</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">ArrayList</code><code class="o">&lt;</code><code class="n">Integer</code><code class="o">&gt;</code> <code class="n">list</code> <code class="o">=</code>
      <code class="k">new</code> <code class="n">ArrayList</code><code class="o">&lt;</code><code class="n">Integer</code><code class="o">&gt;();</code>
    <code class="n">list</code><code class="o">.</code><code class="na">add</code><code class="o">(</code><code class="mi">1</code><code class="o">);</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="n">Integer</code><code class="o">.</code><code class="na">valueOf</code><code class="o">(</code><code class="mi">1</code><code class="o">),</code> <code class="n">list</code><code class="o">.</code><code class="na">get</code><code class="o">(</code><code class="mi">0</code><code class="o">));</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">hashMapGet</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">HashMap</code><code class="o">&lt;</code><code class="n">Integer</code><code class="o">,</code> <code class="n">String</code><code class="o">&gt;</code> <code class="n">map</code> <code class="o">=</code>
      <code class="k">new</code> <code class="n">HashMap</code><code class="o">&lt;</code><code class="n">Integer</code><code class="o">,</code> <code class="n">String</code><code class="o">&gt;();</code>
    <code class="n">map</code><code class="o">.</code><code class="na">put</code><code class="o">(</code><code class="mi">1</code><code class="o">,</code> <code class="s">"a str"</code><code class="o">);</code>
    <code class="n">assertEquals</code><code class="o">(</code><code class="s">"a str"</code><code class="o">,</code> <code class="n">map</code><code class="o">.</code><code class="na">get</code><code class="o">(</code><code class="mi">1</code><code class="o">));</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">throwCatch</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">Exception</code> <code class="n">ex</code> <code class="o">=</code> <code class="kc">null</code><code class="o">;</code>
    <code class="k">try</code> <code class="o">{</code>
      <code class="k">throw</code> <code class="k">new</code> <code class="nf">RuntimeException</code><code class="o">(</code><code class="s">"ex"</code><code class="o">);</code>
    <code class="o">}</code> <code class="k">catch</code> <code class="o">(</code><code class="n">Exception</code> <code class="n">eCaught</code><code class="o">)</code> <code class="o">{</code>
      <code class="n">ex</code> <code class="o">=</code> <code class="n">eCaught</code><code class="o">;</code>
    <code class="o">}</code>
    <code class="n">assertEquals</code><code class="o">(</code><code class="s">"ex"</code><code class="o">,</code> <code class="n">ex</code><code class="o">.</code><code class="na">getMessage</code><code class="o">());</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">JodaTest</code> <code class="o">{</code>
  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">parseStr</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mi">286347600000L</code><code class="o">,</code>
      <code class="n">DateTime</code><code class="o">.</code><code class="na">parse</code><code class="o">(</code>
        <code class="s">"1979-01-28"</code><code class="o">).</code><code class="na">getMillis</code><code class="o">());</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">Assert</code> <code class="o">{</code>
  <code class="kd">public</code> <code class="kd">static</code> <code class="kt">void</code> <code class="nf">assertThrows</code><code class="o">(</code>
    <code class="n">Class</code> <code class="n">ex</code><code class="o">,</code> <code class="n">Runnable</code> <code class="n">runnable</code><code class="o">)</code> <code class="o">{</code>
    <code class="n">Exception</code> <code class="n">exThrown</code> <code class="o">=</code> <code class="kc">null</code><code class="o">;</code>
    <code class="k">try</code> <code class="o">{</code>
      <code class="n">runnable</code><code class="o">.</code><code class="na">run</code><code class="o">();</code>
    <code class="o">}</code> <code class="k">catch</code> <code class="o">(</code><code class="n">Exception</code> <code class="n">exThrownActual</code><code class="o">)</code> <code class="o">{</code>
      <code class="n">exThrown</code> <code class="o">=</code> <code class="n">exThrownActual</code><code class="o">;</code>
    <code class="o">}</code>
    <code class="k">if</code> <code class="o">(</code><code class="kc">null</code> <code class="o">==</code> <code class="n">exThrown</code><code class="o">)</code>
      <code class="n">fail</code><code class="o">(</code><code class="s">"No exception thrown"</code><code class="o">);</code>
    <code class="k">else</code>
      <code class="nf">assertEquals</code><code class="o">(</code><code class="n">ex</code><code class="o">,</code> <code class="n">exThrown</code><code class="o">.</code><code class="na">getClass</code><code class="o">());</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">MovieTest</code> <code class="o">{</code>
  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">invalidTitleCustomAssertion</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertThrows</code><code class="o">(</code>
      <code class="n">IllegalArgumentException</code><code class="o">.</code><code class="na">class</code><code class="o">,</code>
      <code class="o">()</code> <code class="o">-&gt;</code> <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">UNKNOWN</code><code class="o">).</code><code class="na">build</code><code class="o">());</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">invalidTitleWithoutCA</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">Exception</code> <code class="n">e</code> <code class="o">=</code> <code class="kc">null</code><code class="o">;</code>
    <code class="k">try</code> <code class="o">{</code>
      <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">UNKNOWN</code><code class="o">).</code><code class="na">build</code><code class="o">();</code>
    <code class="o">}</code> <code class="k">catch</code> <code class="o">(</code><code class="n">Exception</code> <code class="n">ex</code><code class="o">)</code> <code class="o">{</code>
      <code class="n">e</code> <code class="o">=</code> <code class="n">ex</code><code class="o">;</code>
    <code class="o">}</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="n">IllegalArgumentException</code><code class="o">.</code><code class="na">class</code><code class="o">,</code>
      <code class="n">e</code><code class="o">.</code><code class="na">getClass</code><code class="o">());</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">AssertTest</code> <code class="o">{</code>
  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">failIfNoThrow</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">AssertionError</code> <code class="n">e</code> <code class="o">=</code> <code class="kc">null</code><code class="o">;</code>
    <code class="k">try</code> <code class="o">{</code>
      <code class="n">assertThrows</code><code class="o">(</code>
        <code class="n">IllegalArgumentException</code><code class="o">.</code><code class="na">class</code><code class="o">,</code>
        <code class="n">mock</code><code class="o">(</code><code class="n">Runnable</code><code class="o">.</code><code class="na">class</code><code class="o">));</code>
    <code class="o">}</code> <code class="k">catch</code> <code class="o">(</code><code class="n">AssertionError</code> <code class="n">ex</code><code class="o">)</code> <code class="o">{</code>
      <code class="n">e</code> <code class="o">=</code> <code class="n">ex</code><code class="o">;</code>
    <code class="o">}</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="n">AssertionError</code><code class="o">.</code><code class="na">class</code><code class="o">,</code>
      <code class="n">e</code><code class="o">.</code><code class="na">getClass</code><code class="o">());</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">failWithMessageIfNoThrow</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">AssertionError</code> <code class="n">e</code> <code class="o">=</code> <code class="kc">null</code><code class="o">;</code>
    <code class="k">try</code> <code class="o">{</code>
      <code class="n">assertThrows</code><code class="o">(</code>
        <code class="n">IllegalArgumentException</code><code class="o">.</code><code class="na">class</code><code class="o">,</code>
        <code class="n">mock</code><code class="o">(</code><code class="n">Runnable</code><code class="o">.</code><code class="na">class</code><code class="o">));</code>
    <code class="o">}</code> <code class="k">catch</code> <code class="o">(</code><code class="n">AssertionError</code> <code class="n">ex</code><code class="o">)</code> <code class="o">{</code>
      <code class="n">e</code> <code class="o">=</code> <code class="n">ex</code><code class="o">;</code>
    <code class="o">}</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="s">"No exception thrown"</code><code class="o">,</code>
      <code class="n">e</code><code class="o">.</code><code class="na">getMessage</code><code class="o">());</code>
  <code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre>  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">failIfClassMismatch</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">AssertionError</code> <code class="n">e</code> <code class="o">=</code> <code class="kc">null</code><code class="o">;</code>
    <code class="k">try</code> <code class="o">{</code>
      <code class="n">assertThrows</code><code class="o">(</code>
        <code class="n">IllegalArgumentException</code><code class="o">.</code><code class="na">class</code><code class="o">,</code>
        <code class="o">()</code> <code class="o">-&gt;</code> <code class="o">{</code>
          <code class="k">throw</code> <code class="k">new</code> <code class="nf">RuntimeException</code><code class="o">(</code><code class="s">""</code><code class="o">);});</code>
    <code class="o">}</code> <code class="k">catch</code> <code class="o">(</code><code class="n">AssertionError</code> <code class="n">ex</code><code class="o">)</code> <code class="o">{</code>
      <code class="n">e</code> <code class="o">=</code> <code class="n">ex</code><code class="o">;</code>
    <code class="o">}</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="n">AssertionError</code><code class="o">.</code><code class="na">class</code><code class="o">,</code>
      <code class="n">e</code><code class="o">.</code><code class="na">getClass</code><code class="o">());</code>
  <code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre>  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">failWithMessageIfClassWrong</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">AssertionError</code> <code class="n">e</code> <code class="o">=</code> <code class="kc">null</code><code class="o">;</code>
    <code class="k">try</code> <code class="o">{</code>
      <code class="n">assertThrows</code><code class="o">(</code>
        <code class="n">IllegalArgumentException</code><code class="o">.</code><code class="na">class</code><code class="o">,</code>
        <code class="o">()</code> <code class="o">-&gt;</code> <code class="o">{</code>
          <code class="k">throw</code> <code class="k">new</code> <code class="nf">RuntimeException</code><code class="o">(</code><code class="s">""</code><code class="o">);});</code>
    <code class="o">}</code> <code class="k">catch</code> <code class="o">(</code><code class="n">AssertionError</code> <code class="n">ex</code><code class="o">)</code> <code class="o">{</code>
      <code class="n">e</code> <code class="o">=</code> <code class="n">ex</code><code class="o">;</code>
    <code class="o">}</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="s">"expected:&lt;class java.lang."</code><code class="o">+</code>
      <code class="s">"IllegalArgumentException&gt; "</code><code class="o">+</code>
      <code class="s">"but was:&lt;class java.lang."</code><code class="o">+</code>
      <code class="s">"RuntimeException&gt;"</code><code class="o">,</code>
      <code class="n">e</code><code class="o">.</code><code class="na">getMessage</code><code class="o">());</code>
  <code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre>  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">passWithCorrectException</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">AssertionError</code> <code class="n">e</code> <code class="o">=</code> <code class="kc">null</code><code class="o">;</code>
    <code class="k">try</code> <code class="o">{</code>
      <code class="n">assertThrows</code><code class="o">(</code>
        <code class="n">RuntimeException</code><code class="o">.</code><code class="na">class</code><code class="o">,</code>
        <code class="o">()</code> <code class="o">-&gt;</code> <code class="o">{</code>
          <code class="k">throw</code> <code class="k">new</code> <code class="nf">RuntimeException</code><code class="o">(</code><code class="s">""</code><code class="o">);});</code>
    <code class="o">}</code> <code class="k">catch</code> <code class="o">(</code><code class="n">AssertionError</code> <code class="n">ex</code><code class="o">)</code> <code class="o">{</code>
      <code class="n">e</code> <code class="o">=</code> <code class="n">ex</code><code class="o">;</code>
    <code class="o">}</code>
    <code class="n">assertEquals</code><code class="o">(</code><code class="kc">null</code><code class="o">,</code> <code class="n">e</code><code class="o">);</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">MovieTest</code> <code class="o">{</code>
  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">compareDates</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">Movie</code> <code class="n">godfather</code> <code class="o">=</code>
      <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="k">new</code> <code class="nf">Date</code><code class="o">(</code><code class="mi">70261200000L</code><code class="o">)).</code><code class="na">build</code><code class="o">();</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="s">"1972-03-24"</code><code class="o">,</code>
      <code class="k">new</code> <code class="nf">SimpleDateFormat</code><code class="o">(</code>
        <code class="s">"yyyy-MM-dd"</code><code class="o">).</code><code class="na">format</code><code class="o">(</code>
          <code class="n">godfather</code><code class="o">.</code><code class="na">releaseDate</code><code class="o">()));</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">Assert</code> <code class="o">{</code>
  <code class="kd">public</code> <code class="kd">static</code> <code class="kt">void</code> <code class="nf">assertDateWithFormat</code><code class="o">(</code>
    <code class="n">String</code> <code class="n">expected</code><code class="o">,</code>
    <code class="n">String</code> <code class="n">format</code><code class="o">,</code>
    <code class="n">Date</code> <code class="n">dt</code><code class="o">)</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="n">expected</code><code class="o">,</code>
      <code class="k">new</code> <code class="nf">SimpleDateFormat</code><code class="o">(</code>
        <code class="n">format</code><code class="o">).</code><code class="na">format</code><code class="o">(</code><code class="n">dt</code><code class="o">));</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">MovieTest</code> <code class="o">{</code>
  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">compareDates</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">Movie</code> <code class="n">godfather</code> <code class="o">=</code>
      <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="k">new</code> <code class="nf">Date</code><code class="o">(</code><code class="mi">70261200000L</code><code class="o">)).</code><code class="na">build</code><code class="o">();</code>
    <code class="n">assertDateWithFormat</code><code class="o">(</code>
      <code class="s">"1972-03-24"</code><code class="o">,</code>
      <code class="s">"yyyy-MM-dd"</code><code class="o">,</code>
      <code class="n">godfather</code><code class="o">.</code><code class="na">releaseDate</code><code class="o">());</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">Money</code> <code class="o">{</code>
  <code class="kd">private</code> <code class="n">BigDecimal</code> <code class="n">val</code><code class="o">;</code>

  <code class="kd">public</code> <code class="nf">Money</code><code class="o">(</code><code class="kt">double</code> <code class="n">val</code><code class="o">)</code> <code class="o">{</code>
    <code class="k">this</code><code class="o">(</code><code class="n">BigDecimal</code><code class="o">.</code><code class="na">valueOf</code><code class="o">(</code><code class="n">val</code><code class="o">));</code>
  <code class="o">}</code>

  <code class="kd">public</code> <code class="nf">Money</code><code class="o">(</code><code class="n">BigDecimal</code> <code class="n">val</code><code class="o">)</code> <code class="o">{</code>
    <code class="k">this</code><code class="o">.</code><code class="na">val</code> <code class="o">=</code> <code class="n">val</code><code class="o">;</code>
  <code class="o">}</code>

  <code class="kd">public</code> <code class="n">Money</code> <code class="nf">add</code><code class="o">(</code><code class="kt">double</code> <code class="n">d</code><code class="o">)</code> <code class="o">{</code>
    <code class="k">return</code> <code class="k">new</code> <code class="nf">Money</code><code class="o">(</code>
      <code class="n">val</code><code class="o">.</code><code class="na">add</code><code class="o">(</code><code class="n">BigDecimal</code><code class="o">.</code><code class="na">valueOf</code><code class="o">(</code><code class="n">d</code><code class="o">)));</code>
  <code class="o">}</code>

  <code class="kd">public</code> <code class="n">Money</code> <code class="nf">add</code><code class="o">(</code><code class="n">Money</code> <code class="n">m</code><code class="o">)</code> <code class="o">{</code>
    <code class="k">return</code> <code class="k">new</code> <code class="nf">Money</code><code class="o">(</code><code class="n">val</code><code class="o">.</code><code class="na">add</code><code class="o">(</code><code class="n">m</code><code class="o">.</code><code class="na">val</code><code class="o">));</code>
  <code class="o">}</code>

  <code class="kd">public</code> <code class="kt">double</code> <code class="nf">toDouble</code><code class="o">()</code> <code class="o">{</code>
    <code class="k">return</code> <code class="n">val</code>
      <code class="o">.</code><code class="na">setScale</code><code class="o">(</code><code class="mi">2</code><code class="o">,</code> <code class="n">BigDecimal</code><code class="o">.</code><code class="na">ROUND_HALF_UP</code><code class="o">)</code>
      <code class="o">.</code><code class="na">doubleValue</code><code class="o">();</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">MoneyTest</code> <code class="o">{</code>
  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">doubleAddition</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mf">11.0</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">money</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="mf">1.0</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">add</code><code class="o">(</code>
        <code class="mf">10.0</code><code class="o">).</code><code class="na">toDouble</code><code class="o">(),</code>
      <code class="mi">0</code><code class="o">);</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">moneyAddition</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mf">11.0</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">money</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="mf">1.0</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">add</code><code class="o">(</code>
        <code class="n">a</code><code class="o">.</code><code class="na">money</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="mf">10.0</code><code class="o">).</code><code class="na">build</code><code class="o">()).</code><code class="na">toDouble</code><code class="o">(),</code>
      <code class="mi">0</code><code class="o">);</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">oneDecimalToDouble</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mf">1.0</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">money</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="mf">1.0</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">toDouble</code><code class="o">(),</code>
      <code class="mi">0</code><code class="o">);</code>
  <code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre>  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">twoDecimalToDouble</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mf">1.12</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">money</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="mf">1.12</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">toDouble</code><code class="o">(),</code>
      <code class="mi">0</code><code class="o">);</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">thrDecimalUpToDouble</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mf">1.12</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">money</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="mf">1.123</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">toDouble</code><code class="o">(),</code>
      <code class="mi">0</code><code class="o">);</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">thrDecimalDownToDouble</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mf">1.13</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">money</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="mf">1.125</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">toDouble</code><code class="o">(),</code>
      <code class="mi">0</code><code class="o">);</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">Movie</code> <code class="o">{</code>

  <code class="kd">public</code> <code class="kd">enum</code> <code class="n">Type</code> <code class="o">{</code>
    <code class="n">REGULAR</code><code class="o">,</code> <code class="n">NEW_RELEASE</code><code class="o">,</code> <code class="n">CHILDREN</code><code class="o">;</code>
  <code class="o">}</code>

  <code class="kd">private</code> <code class="n">String</code> <code class="n">title</code><code class="o">;</code>
  <code class="n">Price</code> <code class="n">price</code><code class="o">;</code>

  <code class="kd">public</code> <code class="nf">Movie</code><code class="o">(</code>
    <code class="n">String</code> <code class="n">title</code><code class="o">,</code> <code class="n">Movie</code><code class="o">.</code><code class="na">Type</code> <code class="n">priceCode</code><code class="o">)</code> <code class="o">{</code>
    <code class="k">this</code><code class="o">.</code><code class="na">title</code> <code class="o">=</code> <code class="n">title</code><code class="o">;</code>
    <code class="n">setPriceCode</code><code class="o">(</code><code class="n">priceCode</code><code class="o">);</code>
  <code class="o">}</code>

  <code class="kd">private</code> <code class="kt">void</code> <code class="nf">setPriceCode</code><code class="o">(</code>
    <code class="n">Movie</code><code class="o">.</code><code class="na">Type</code> <code class="n">priceCode</code><code class="o">)</code> <code class="o">{</code>
    <code class="k">switch</code> <code class="o">(</code><code class="n">priceCode</code><code class="o">)</code> <code class="o">{</code>
    <code class="k">case</code> <code class="nl">CHILDREN:</code>
      <code class="n">price</code> <code class="o">=</code> <code class="k">new</code> <code class="n">ChildrensPrice</code><code class="o">();</code>
      <code class="k">break</code><code class="o">;</code>
    <code class="k">case</code> <code class="nl">NEW_RELEASE:</code>
      <code class="n">price</code> <code class="o">=</code> <code class="k">new</code> <code class="n">NewReleasePrice</code><code class="o">();</code>
      <code class="k">break</code><code class="o">;</code>
    <code class="k">case</code> <code class="nl">REGULAR:</code>
      <code class="n">price</code> <code class="o">=</code> <code class="k">new</code> <code class="n">RegularPrice</code><code class="o">();</code>
      <code class="k">break</code><code class="o">;</code>
    <code class="o">}</code>
  <code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="uil">  <code class="kd">public</code> <code class="n">Money</code> <code class="nf">getCharge</code><code class="o">(</code><code class="kt">int</code> <code class="n">daysRented</code><code class="o">)</code> <code class="o">{</code>
</code><code class="uil">    <code class="k">return</code> <code class="n">price</code><code class="o">.</code><code class="na">getCharge</code><code class="o">(</code><code class="n">daysRented</code><code class="o">);</code>
</code><code class="uil">  <code class="o">}</code>
</code><code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">MovieTest</code> <code class="o">{</code>
  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">getChargeForChildrens1Day</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mf">1.5</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">CHILDREN</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">getCharge</code><code class="o">(</code>
<code class="uil">          <code class="mi">1</code><code class="o">).</code><code class="na">toDouble</code><code class="o">(),</code>
</code>      <code class="mi">0</code><code class="o">);</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">getChargeForChildrens2Day</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mf">1.5</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">CHILDREN</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">getCharge</code><code class="o">(</code>
<code class="uil">          <code class="mi">2</code><code class="o">).</code><code class="na">toDouble</code><code class="o">(),</code>
</code>      <code class="mi">0</code><code class="o">);</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">getChargeForChildrens3Day</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mf">1.5</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">CHILDREN</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">getCharge</code><code class="o">(</code>
<code class="uil">          <code class="mi">3</code><code class="o">).</code><code class="na">toDouble</code><code class="o">(),</code>
</code>      <code class="mi">0</code><code class="o">);</code>
  <code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre>  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">getChargeForChildrens4Day</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mf">3.0</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">CHILDREN</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">getCharge</code><code class="o">(</code>
<code class="uil">          <code class="mi">4</code><code class="o">).</code><code class="na">toDouble</code><code class="o">(),</code>
</code>      <code class="mi">0</code><code class="o">);</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">getChargeForChildrens5Day</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code>
      <code class="mf">4.5</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">CHILDREN</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">getCharge</code><code class="o">(</code>
<code class="uil">          <code class="mi">5</code><code class="o">).</code><code class="na">toDouble</code><code class="o">(),</code>
</code>      <code class="mi">0</code><code class="o">);</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="n">assertEquals</code><code class="o">(</code>
  <code class="n">doubleLiteral</code><code class="o">,</code>
  <code class="n">getSomeMoney</code><code class="o">().</code><code class="na">toDouble</code><code class="o">(),</code>
  <code class="mi">0</code><code class="o">)</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">Assert</code> <code class="o">{</code>
  <code class="kd">public</code> <code class="kd">static</code> <code class="kt">void</code> <code class="nf">assertMoney</code><code class="o">(</code>
    <code class="kt">double</code> <code class="n">d</code><code class="o">,</code> <code class="n">Money</code> <code class="n">m</code><code class="o">)</code> <code class="o">{</code>
    <code class="n">assertEquals</code><code class="o">(</code><code class="n">d</code><code class="o">,</code> <code class="n">m</code><code class="o">.</code><code class="na">toDouble</code><code class="o">(),</code> <code class="mi">0</code><code class="o">);</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">MoneyTest</code> <code class="o">{</code>
  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">doubleAddition</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertMoney</code><code class="o">(</code>
      <code class="mf">11.0</code><code class="o">,</code> <code class="n">a</code><code class="o">.</code><code class="na">money</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="mf">1.0</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">add</code><code class="o">(</code><code class="mf">10.0</code><code class="o">));</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">moneyAddition</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertMoney</code><code class="o">(</code>
      <code class="mf">11.0</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">money</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="mf">1.0</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">add</code><code class="o">(</code>
        <code class="n">a</code><code class="o">.</code><code class="na">money</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="mf">10.0</code><code class="o">).</code><code class="na">build</code><code class="o">()));</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">oneDecimalToDouble</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertMoney</code><code class="o">(</code>
      <code class="mf">1.0</code><code class="o">,</code> <code class="n">a</code><code class="o">.</code><code class="na">money</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="mf">1.0</code><code class="o">).</code><code class="na">build</code><code class="o">());</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">twoDecimalToDouble</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertMoney</code><code class="o">(</code>
      <code class="mf">1.12</code><code class="o">,</code> <code class="n">a</code><code class="o">.</code><code class="na">money</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="mf">1.12</code><code class="o">).</code><code class="na">build</code><code class="o">());</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">thrDecimalUpToDouble</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertMoney</code><code class="o">(</code>
      <code class="mf">1.12</code><code class="o">,</code> <code class="n">a</code><code class="o">.</code><code class="na">money</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="mf">1.123</code><code class="o">).</code><code class="na">build</code><code class="o">());</code>
  <code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre>  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">thrDecimalDownToDouble</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertMoney</code><code class="o">(</code>
      <code class="mf">1.13</code><code class="o">,</code> <code class="n">a</code><code class="o">.</code><code class="na">money</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="mf">1.125</code><code class="o">).</code><code class="na">build</code><code class="o">());</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">MovieTest</code> <code class="o">{</code>
  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">getChargeForChildrens1Day</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertMoney</code><code class="o">(</code>
      <code class="mf">1.5</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">CHILDREN</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">getCharge</code><code class="o">(</code><code class="mi">1</code><code class="o">));</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">getChargeForChildrens2Day</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertMoney</code><code class="o">(</code>
      <code class="mf">1.5</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">CHILDREN</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">getCharge</code><code class="o">(</code><code class="mi">2</code><code class="o">));</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">getChargeForChildrens3Day</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertMoney</code><code class="o">(</code>
      <code class="mf">1.5</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">CHILDREN</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">getCharge</code><code class="o">(</code><code class="mi">3</code><code class="o">));</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">getChargeForChildrens4Day</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertMoney</code><code class="o">(</code>
      <code class="mf">3.0</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">CHILDREN</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">getCharge</code><code class="o">(</code><code class="mi">4</code><code class="o">));</code>
  <code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre>  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">getChargeForChildrens5Day</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertMoney</code><code class="o">(</code>
      <code class="mf">4.5</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">movie</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">CHILDREN</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">getCharge</code><code class="o">(</code><code class="mi">5</code><code class="o">));</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">Rental</code> <code class="o">{</code>

  <code class="n">Movie</code> <code class="n">movie</code><code class="o">;</code>
  <code class="kd">private</code> <code class="kt">int</code> <code class="n">daysRented</code><code class="o">;</code>

  <code class="kd">public</code> <code class="nf">Rental</code><code class="o">(</code>
    <code class="n">Movie</code> <code class="n">movie</code><code class="o">,</code> <code class="kt">int</code> <code class="n">daysRented</code><code class="o">)</code> <code class="o">{</code>
    <code class="k">this</code><code class="o">.</code><code class="na">movie</code> <code class="o">=</code> <code class="n">movie</code><code class="o">;</code>
    <code class="k">this</code><code class="o">.</code><code class="na">daysRented</code> <code class="o">=</code> <code class="n">daysRented</code><code class="o">;</code>
  <code class="o">}</code>

<code class="uil">  <code class="kd">public</code> <code class="n">Money</code> <code class="nf">getCharge</code><code class="o">()</code> <code class="o">{</code>
</code><code class="uil">    <code class="k">return</code> <code class="n">movie</code><code class="o">.</code><code class="na">getCharge</code><code class="o">(</code><code class="n">daysRented</code><code class="o">);</code>
</code><code class="uil">  <code class="o">}</code>
</code><code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">RentalTest</code> <code class="o">{</code>
  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">getChargeFromMovie</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">Movie</code> <code class="n">movie</code> <code class="o">=</code> <code class="n">mock</code><code class="o">(</code><code class="n">Movie</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">when</code><code class="o">(</code><code class="n">movie</code><code class="o">.</code><code class="na">getCharge</code><code class="o">(</code><code class="n">any</code><code class="o">(</code><code class="n">Integer</code><code class="o">.</code><code class="na">class</code><code class="o">)))</code>
      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="n">a</code><code class="o">.</code><code class="na">money</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="mf">1.5</code><code class="o">).</code><code class="na">build</code><code class="o">());</code>
    <code class="n">assertMoney</code><code class="o">(</code>
      <code class="mf">1.5</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">rental</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">movie</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">getCharge</code><code class="o">());</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">Customer</code> <code class="o">{</code>

  <code class="kd">private</code> <code class="n">List</code><code class="o">&lt;</code><code class="n">Rental</code><code class="o">&gt;</code> <code class="n">rentals</code> <code class="o">=</code>
    <code class="k">new</code> <code class="n">ArrayList</code><code class="o">&lt;</code><code class="n">Rental</code><code class="o">&gt;();</code>

  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">addRental</code><code class="o">(</code><code class="n">Rental</code> <code class="n">rental</code><code class="o">)</code> <code class="o">{</code>
    <code class="n">rentals</code><code class="o">.</code><code class="na">add</code><code class="o">(</code><code class="n">rental</code><code class="o">);</code>
  <code class="o">}</code>

<code class="uil">  <code class="kd">public</code> <code class="n">Money</code> <code class="nf">getTotalCharge</code><code class="o">()</code> <code class="o">{</code>
</code><code class="uil">    <code class="n">Money</code> <code class="n">total</code> <code class="o">=</code> <code class="k">new</code> <code class="n">Money</code><code class="o">(</code><code class="mf">0.0</code><code class="o">);</code>
</code><code class="uil">    <code class="k">for</code> <code class="o">(</code><code class="n">Rental</code> <code class="n">rental</code> <code class="o">:</code> <code class="n">rentals</code><code class="o">)</code>
</code><code class="uil">      <code class="n">total</code> <code class="o">=</code> <code class="n">total</code><code class="o">.</code><code class="na">add</code><code class="o">(</code><code class="n">rental</code><code class="o">.</code><code class="na">getCharge</code><code class="o">());</code>
</code><code class="uil">    <code class="k">return</code> <code class="n">total</code><code class="o">;</code>
</code><code class="uil">  <code class="o">}</code>
</code><code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">CustomerTest</code> <code class="o">{</code>
  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">chargeForNoRentals</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertMoney</code><code class="o">(</code>
      <code class="mf">0.0</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">build</code><code class="o">().</code><code class="na">getTotalCharge</code><code class="o">());</code>
  <code class="o">}</code>

  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">chargeForOneRental</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">Rental</code> <code class="n">rental</code> <code class="o">=</code> <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">when</code><code class="o">(</code><code class="n">rental</code><code class="o">.</code><code class="na">getCharge</code><code class="o">())</code>
      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="n">a</code><code class="o">.</code><code class="na">money</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="mf">2.0</code><code class="o">).</code><code class="na">build</code><code class="o">());</code>
    <code class="n">assertMoney</code><code class="o">(</code>
      <code class="mf">2.0</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">rental</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">getTotalCharge</code><code class="o">());</code>
  <code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre>  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">chargeForTwoRentals</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">Rental</code> <code class="n">rental1</code> <code class="o">=</code> <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">when</code><code class="o">(</code><code class="n">rental1</code><code class="o">.</code><code class="na">getCharge</code><code class="o">())</code>
      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="n">a</code><code class="o">.</code><code class="na">money</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="mf">2.2</code><code class="o">).</code><code class="na">build</code><code class="o">());</code>
    <code class="n">Rental</code> <code class="n">rental2</code> <code class="o">=</code> <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">when</code><code class="o">(</code><code class="n">rental2</code><code class="o">.</code><code class="na">getCharge</code><code class="o">())</code>
      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="n">a</code><code class="o">.</code><code class="na">money</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="mf">3.5</code><code class="o">).</code><code class="na">build</code><code class="o">());</code>
    <code class="n">assertMoney</code><code class="o">(</code>
      <code class="mf">5.7</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">rental1</code><code class="o">,</code>
        <code class="n">rental2</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">getTotalCharge</code><code class="o">());</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="n">anOrder</code><code class="o">().</code><code class="na">from</code><code class="o">(</code>
  <code class="n">aCustomer</code><code class="o">().</code><code class="na">with</code><code class="o">(...)).</code><code class="na">build</code><code class="o">();</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="n">a</code><code class="o">.</code><code class="na">order</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(...)).</code><code class="na">build</code><code class="o">();</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="n">build</code><code class="o">(</code>
  <code class="n">order</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
    <code class="n">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(...)));</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">a</code> <code class="o">{</code>
  <code class="kd">public</code> <code class="kd">static</code> <code class="n">CustomerBuilder</code> <code class="n">customer</code> <code class="o">=</code>
    <code class="k">new</code> <code class="nf">CustomerBuilder</code><code class="o">();</code>
  <code class="kd">public</code> <code class="kd">static</code> <code class="n">MoneyBuilder</code> <code class="n">money</code> <code class="o">=</code>
    <code class="k">new</code> <code class="nf">MoneyBuilder</code><code class="o">();</code>

  <code class="kd">public</code> <code class="kd">static</code> <code class="kd">class</code> <code class="nc">CustomerBuilder</code> <code class="o">{</code>
    <code class="n">Rental</code><code class="o">[]</code> <code class="n">rentals</code><code class="o">;</code>

    <code class="n">CustomerBuilder</code><code class="o">()</code> <code class="o">{</code>
      <code class="k">this</code><code class="o">(</code><code class="k">new</code> <code class="n">Rental</code><code class="o">[</code><code class="mi">0</code><code class="o">]);</code>
    <code class="o">}</code>

    <code class="n">CustomerBuilder</code><code class="o">(</code><code class="n">Rental</code><code class="o">[]</code> <code class="n">rentals</code><code class="o">)</code> <code class="o">{</code>
      <code class="k">this</code><code class="o">.</code><code class="na">rentals</code> <code class="o">=</code> <code class="n">rentals</code><code class="o">;</code>
    <code class="o">}</code>

    <code class="kd">public</code> <code class="n">CustomerBuilder</code> <code class="nf">w</code><code class="o">(</code>
      <code class="n">Rental</code><code class="o">...</code> <code class="n">rentals</code><code class="o">)</code> <code class="o">{</code>
      <code class="k">return</code> <code class="k">new</code> <code class="nf">CustomerBuilder</code><code class="o">(</code><code class="n">rentals</code><code class="o">);</code>
    <code class="o">}</code>

    <code class="kd">public</code> <code class="n">Customer</code> <code class="nf">build</code><code class="o">()</code> <code class="o">{</code>
      <code class="n">Customer</code> <code class="n">result</code> <code class="o">=</code> <code class="k">new</code> <code class="n">Customer</code><code class="o">();</code>
      <code class="k">for</code> <code class="o">(</code><code class="n">Rental</code> <code class="n">rental</code> <code class="o">:</code> <code class="n">rentals</code><code class="o">)</code> <code class="o">{</code>
        <code class="n">result</code><code class="o">.</code><code class="na">addRental</code><code class="o">(</code><code class="n">rental</code><code class="o">);</code>
      <code class="o">}</code>
      <code class="k">return</code> <code class="n">result</code><code class="o">;</code>
    <code class="o">}</code>
  <code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre>  <code class="kd">public</code> <code class="kd">static</code> <code class="kd">class</code> <code class="nc">MoneyBuilder</code> <code class="o">{</code>
    <code class="kd">final</code> <code class="kt">double</code> <code class="n">val</code><code class="o">;</code>

    <code class="n">MoneyBuilder</code><code class="o">()</code> <code class="o">{</code>
      <code class="k">this</code><code class="o">(</code><code class="mf">1.0</code><code class="o">);</code>
    <code class="o">}</code>

    <code class="n">MoneyBuilder</code><code class="o">(</code><code class="kt">double</code> <code class="n">val</code><code class="o">)</code> <code class="o">{</code>
      <code class="k">this</code><code class="o">.</code><code class="na">val</code> <code class="o">=</code> <code class="n">val</code><code class="o">;</code>
    <code class="o">}</code>

    <code class="kd">public</code> <code class="n">MoneyBuilder</code> <code class="nf">w</code><code class="o">(</code><code class="kt">double</code> <code class="n">val</code><code class="o">)</code> <code class="o">{</code>
      <code class="k">return</code> <code class="k">new</code> <code class="nf">MoneyBuilder</code><code class="o">(</code><code class="n">val</code><code class="o">);</code>
    <code class="o">}</code>

    <code class="kd">public</code> <code class="n">Money</code> <code class="nf">build</code><code class="o">()</code> <code class="o">{</code>
      <code class="k">return</code> <code class="k">new</code> <code class="nf">Money</code><code class="o">(</code><code class="n">val</code><code class="o">);</code>
    <code class="o">}</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">CustomerTest</code> <code class="o">{</code>
  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">chargeForTwoRentals</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">Rental</code> <code class="n">rental1</code> <code class="o">=</code> <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">when</code><code class="o">(</code><code class="n">rental1</code><code class="o">.</code><code class="na">getCharge</code><code class="o">())</code>
      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="n">a</code><code class="o">.</code><code class="na">money</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="mf">2.2</code><code class="o">).</code><code class="na">build</code><code class="o">());</code>
    <code class="n">Rental</code> <code class="n">rental2</code> <code class="o">=</code> <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">when</code><code class="o">(</code><code class="n">rental2</code><code class="o">.</code><code class="na">getCharge</code><code class="o">())</code>
      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="n">a</code><code class="o">.</code><code class="na">money</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="mf">3.5</code><code class="o">).</code><code class="na">build</code><code class="o">());</code>
    <code class="n">assertMoney</code><code class="o">(</code>
      <code class="mf">5.7</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">w</code><code class="o">(</code>
        <code class="n">rental1</code><code class="o">,</code>
        <code class="n">rental2</code><code class="o">).</code><code class="na">build</code><code class="o">().</code><code class="na">getTotalCharge</code><code class="o">());</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">CustomerTest</code> <code class="o">{</code>
  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">chargeForTwoRentals</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">Rental</code> <code class="n">rental1</code> <code class="o">=</code> <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">when</code><code class="o">(</code><code class="n">rental1</code><code class="o">.</code><code class="na">getCharge</code><code class="o">())</code>
      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="n">a</code><code class="o">.</code><code class="na">money</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="mf">2.2</code><code class="o">).</code><code class="na">build</code><code class="o">());</code>
    <code class="n">Rental</code> <code class="n">rental2</code> <code class="o">=</code> <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">when</code><code class="o">(</code><code class="n">rental2</code><code class="o">.</code><code class="na">getCharge</code><code class="o">())</code>
      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="n">a</code><code class="o">.</code><code class="na">money</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="mf">3.5</code><code class="o">).</code><code class="na">build</code><code class="o">());</code>
<code class="uil">    <code class="n">Customer</code> <code class="n">customer</code> <code class="o">=</code> <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">build</code><code class="o">();</code>
</code><code class="uil">    <code class="n">customer</code><code class="o">.</code><code class="na">addRental</code><code class="o">(</code><code class="n">rental1</code><code class="o">);</code>
</code><code class="uil">    <code class="n">customer</code><code class="o">.</code><code class="na">addRental</code><code class="o">(</code><code class="n">rental2</code><code class="o">);</code>
</code>    <code class="n">assertMoney</code><code class="o">(</code>
      <code class="mf">5.7</code><code class="o">,</code> <code class="n">customer</code><code class="o">.</code><code class="na">getTotalCharge</code><code class="o">());</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">Customer</code> <code class="o">{</code>
  <code class="kd">private</code> <code class="n">List</code><code class="o">&lt;</code><code class="n">Rental</code><code class="o">&gt;</code> <code class="n">rentals</code> <code class="o">=</code>
    <code class="k">new</code> <code class="n">ArrayList</code><code class="o">&lt;</code><code class="n">Rental</code><code class="o">&gt;();</code>

  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">addRental</code><code class="o">(</code><code class="n">Rental</code> <code class="n">rental</code><code class="o">)</code> <code class="o">{</code>
    <code class="n">rentals</code><code class="o">.</code><code class="na">add</code><code class="o">(</code><code class="n">rental</code><code class="o">);</code>
  <code class="o">}</code>

  <code class="kd">public</code> <code class="n">Money</code> <code class="nf">getTotalCharge</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">Money</code> <code class="n">total</code> <code class="o">=</code> <code class="k">new</code> <code class="n">Money</code><code class="o">(</code><code class="mf">0.0</code><code class="o">);</code>
    <code class="k">for</code> <code class="o">(</code><code class="n">Rental</code> <code class="n">rental</code> <code class="o">:</code> <code class="n">rentals</code><code class="o">)</code>
      <code class="n">total</code> <code class="o">=</code> <code class="n">total</code><code class="o">.</code><code class="na">add</code><code class="o">(</code><code class="n">rental</code><code class="o">.</code><code class="na">getCharge</code><code class="o">());</code>
    <code class="k">return</code> <code class="n">total</code><code class="o">;</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">Customer</code> <code class="o">{</code>
  <code class="kd">private</code> <code class="n">ArrayList</code><code class="o">&lt;</code><code class="n">Rental</code><code class="o">&gt;</code> <code class="n">rentals</code> <code class="o">=</code>
    <code class="k">new</code> <code class="n">ArrayList</code><code class="o">&lt;</code><code class="n">Rental</code><code class="o">&gt;();</code>

<code class="uil">  <code class="kd">public</code> <code class="n">Customer</code> <code class="nf">addRentals</code><code class="o">(</code>
</code><code class="uil">    <code class="n">Rental</code><code class="o">...</code> <code class="n">newRentals</code><code class="o">)</code> <code class="o">{</code>
</code><code class="uil">    <code class="n">rentals</code><code class="o">.</code><code class="na">addAll</code><code class="o">(</code><code class="n">Arrays</code><code class="o">.</code><code class="na">asList</code><code class="o">(</code><code class="n">newRentals</code><code class="o">));</code>
</code><code class="uil">    <code class="k">return</code> <code class="k">this</code><code class="o">;</code>
</code><code class="uil">  <code class="o">}</code>
</code>
  <code class="kd">public</code> <code class="n">Money</code> <code class="nf">getTotalCharge</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">Money</code> <code class="n">total</code> <code class="o">=</code> <code class="k">new</code> <code class="n">Money</code><code class="o">(</code><code class="mf">0.0</code><code class="o">);</code>
    <code class="k">for</code> <code class="o">(</code><code class="n">Rental</code> <code class="n">rental</code> <code class="o">:</code> <code class="n">rentals</code><code class="o">)</code>
      <code class="n">total</code> <code class="o">=</code> <code class="n">total</code><code class="o">.</code><code class="na">add</code><code class="o">(</code><code class="n">rental</code><code class="o">.</code><code class="na">getCharge</code><code class="o">());</code>
    <code class="k">return</code> <code class="n">total</code><code class="o">;</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">CustomerTest</code> <code class="o">{</code>
  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">chargeForTwoRentals</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">Rental</code> <code class="n">rental1</code> <code class="o">=</code> <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">when</code><code class="o">(</code><code class="n">rental1</code><code class="o">.</code><code class="na">getCharge</code><code class="o">())</code>
      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="n">a</code><code class="o">.</code><code class="na">money</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="mf">2.2</code><code class="o">).</code><code class="na">build</code><code class="o">());</code>
    <code class="n">Rental</code> <code class="n">rental2</code> <code class="o">=</code> <code class="n">mock</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>
    <code class="n">when</code><code class="o">(</code><code class="n">rental2</code><code class="o">.</code><code class="na">getCharge</code><code class="o">())</code>
      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="n">a</code><code class="o">.</code><code class="na">money</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="mf">3.5</code><code class="o">).</code><code class="na">build</code><code class="o">());</code>
    <code class="n">assertMoney</code><code class="o">(</code>
      <code class="mf">5.7</code><code class="o">,</code>
<code class="uil">      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">build</code><code class="o">().</code><code class="na">addRentals</code><code class="o">(</code>
</code><code class="uil">        <code class="n">rental1</code><code class="o">,</code> <code class="n">rental2</code><code class="o">).</code><code class="na">getTotalCharge</code><code class="o">());</code>
</code>  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">MockitoExtensions</code> <code class="o">{</code>
  <code class="nd">@SuppressWarnings</code><code class="o">(</code><code class="s">"unchecked"</code><code class="o">)</code>
  <code class="kd">public</code> <code class="kd">static</code> <code class="o">&lt;</code><code class="n">T</code><code class="o">&gt;</code> <code class="n">T</code> <code class="n">create</code><code class="o">(</code>
    <code class="n">Object</code> <code class="n">methodCall</code><code class="o">)</code> <code class="o">{</code>
    <code class="n">when</code><code class="o">(</code><code class="n">methodCall</code><code class="o">)</code>
      <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code>
        <code class="n">StubBuilder</code><code class="o">.</code><code class="na">current</code><code class="o">.</code><code class="na">returnValue</code><code class="o">);</code>
    <code class="k">return</code> <code class="o">(</code><code class="n">T</code><code class="o">)</code>
      <code class="n">StubBuilder</code><code class="o">.</code><code class="na">current</code><code class="o">.</code><code class="na">mockInstance</code><code class="o">;</code>
  <code class="o">}</code>
  <code class="kd">public</code> <code class="kd">static</code> <code class="o">&lt;</code><code class="n">T</code><code class="o">&gt;</code> <code class="n">StubBuilder</code><code class="o">&lt;</code><code class="n">T</code><code class="o">&gt;</code> <code class="n">stub</code><code class="o">(</code>
    <code class="n">Class</code><code class="o">&lt;</code><code class="n">T</code><code class="o">&gt;</code> <code class="n">klass</code><code class="o">)</code> <code class="o">{</code>
    <code class="k">return</code> <code class="k">new</code> <code class="n">StubBuilder</code><code class="o">&lt;</code><code class="n">T</code><code class="o">&gt;(</code><code class="n">mock</code><code class="o">(</code><code class="n">klass</code><code class="o">));</code>
  <code class="o">}</code>
  <code class="kd">public</code> <code class="kd">static</code> <code class="kd">class</code> <code class="nc">StubBuilder</code><code class="o">&lt;</code><code class="n">T</code><code class="o">&gt;</code> <code class="o">{</code>
    <code class="kd">public</code> <code class="kd">static</code> <code class="n">StubBuilder</code> <code class="n">current</code><code class="o">;</code>
    <code class="kd">public</code> <code class="kd">final</code> <code class="n">T</code> <code class="n">mockInstance</code><code class="o">;</code>
    <code class="kd">private</code> <code class="n">Object</code> <code class="n">returnValue</code><code class="o">;</code>
    <code class="kd">public</code> <code class="nf">StubBuilder</code><code class="o">(</code><code class="n">T</code> <code class="n">mockInstance</code><code class="o">)</code> <code class="o">{</code>
      <code class="n">current</code> <code class="o">=</code> <code class="k">this</code><code class="o">;</code>
      <code class="k">this</code><code class="o">.</code><code class="na">mockInstance</code> <code class="o">=</code> <code class="n">mockInstance</code><code class="o">;</code>
    <code class="o">}</code>
    <code class="kd">public</code> <code class="n">T</code> <code class="nf">from</code><code class="o">()</code> <code class="o">{</code>
      <code class="k">return</code> <code class="n">mockInstance</code><code class="o">;</code>
    <code class="o">}</code>
    <code class="kd">public</code> <code class="n">StubBuilder</code><code class="o">&lt;</code><code class="n">T</code><code class="o">&gt;</code> <code class="nf">returning</code><code class="o">(</code>
      <code class="n">Object</code> <code class="n">returnValue</code><code class="o">)</code> <code class="o">{</code>
      <code class="k">this</code><code class="o">.</code><code class="na">returnValue</code> <code class="o">=</code> <code class="n">returnValue</code><code class="o">;</code>
      <code class="k">return</code> <code class="k">this</code><code class="o">;</code>
    <code class="o">}</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">CustomerTest</code> <code class="o">{</code>
  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">chargeForTwoRentals</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertMoney</code><code class="o">(</code>
      <code class="mf">5.7</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">build</code><code class="o">().</code><code class="na">addRentals</code><code class="o">(</code>
        <code class="n">create</code><code class="o">(</code>
          <code class="n">stub</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">)</code>
          <code class="o">.</code><code class="na">returning</code><code class="o">(</code><code class="n">a</code><code class="o">.</code><code class="na">money</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="mf">2.2</code><code class="o">).</code><code class="na">build</code><code class="o">())</code>
          <code class="o">.</code><code class="na">from</code><code class="o">().</code><code class="na">getCharge</code><code class="o">()),</code>
        <code class="n">create</code><code class="o">(</code>
          <code class="n">stub</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">)</code>
          <code class="o">.</code><code class="na">returning</code><code class="o">(</code><code class="n">a</code><code class="o">.</code><code class="na">money</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="mf">3.5</code><code class="o">).</code><code class="na">build</code><code class="o">())</code>
          <code class="o">.</code><code class="na">from</code><code class="o">().</code><code class="na">getCharge</code><code class="o">()))</code>
      <code class="o">.</code><code class="na">getTotalCharge</code><code class="o">());</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">MockitoExtensions</code> <code class="o">{</code>
  <code class="kd">public</code> <code class="kd">static</code> <code class="o">&lt;</code><code class="n">T</code><code class="o">&gt;</code> <code class="n">T</code> <code class="n">stub</code><code class="o">(</code>
    <code class="n">Class</code><code class="o">&lt;</code><code class="n">T</code><code class="o">&gt;</code> <code class="n">klass</code><code class="o">,</code>
    <code class="n">Function</code><code class="o">&lt;</code><code class="n">T</code><code class="o">,</code><code class="n">Object</code><code class="o">&gt;</code> <code class="n">f</code><code class="o">,</code>
    <code class="n">Object</code> <code class="n">returnVal</code><code class="o">)</code> <code class="o">{</code>
    <code class="k">try</code> <code class="o">{</code>
      <code class="n">T</code> <code class="n">result</code> <code class="o">=</code> <code class="n">mock</code><code class="o">(</code><code class="n">klass</code><code class="o">);</code>
      <code class="n">when</code><code class="o">(</code><code class="n">f</code><code class="o">.</code><code class="na">apply</code><code class="o">(</code><code class="n">result</code><code class="o">))</code>
        <code class="o">.</code><code class="na">thenReturn</code><code class="o">(</code><code class="n">returnVal</code><code class="o">);</code>
      <code class="k">return</code> <code class="n">result</code><code class="o">;</code>
    <code class="o">}</code> <code class="k">catch</code> <code class="o">(</code><code class="n">Exception</code> <code class="n">e</code><code class="o">)</code> <code class="o">{</code>
      <code class="k">throw</code> <code class="k">new</code> <code class="nf">RuntimeException</code><code class="o">(</code><code class="n">e</code><code class="o">);</code>
    <code class="o">}</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

<div class="code-block">
<div class="highlight"><pre><code class="kd">public</code> <code class="kd">class</code> <code class="nc">CustomerTest</code> <code class="o">{</code>
  <code class="nd">@Test</code>
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">chargeForTwoRentals</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">assertMoney</code><code class="o">(</code>
      <code class="mf">5.7</code><code class="o">,</code>
      <code class="n">a</code><code class="o">.</code><code class="na">customer</code><code class="o">.</code><code class="na">build</code><code class="o">().</code><code class="na">addRentals</code><code class="o">(</code>
<code class="uil">        <code class="n">stub</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">,</code>
</code><code class="uil">             <code class="n">s</code> <code class="o">-&gt;</code> <code class="n">s</code><code class="o">.</code><code class="na">getCharge</code><code class="o">(),</code>
</code><code class="uil">             <code class="n">a</code><code class="o">.</code><code class="na">money</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="mf">2.2</code><code class="o">).</code><code class="na">build</code><code class="o">()),</code>
</code><code class="uil">        <code class="n">stub</code><code class="o">(</code><code class="n">Rental</code><code class="o">.</code><code class="na">class</code><code class="o">,</code>
</code><code class="uil">             <code class="n">s</code> <code class="o">-&gt;</code> <code class="n">s</code><code class="o">.</code><code class="na">getCharge</code><code class="o">(),</code>
</code><code class="uil">             <code class="n">a</code><code class="o">.</code><code class="na">money</code><code class="o">.</code><code class="na">w</code><code class="o">(</code><code class="mf">3.5</code><code class="o">).</code><code class="na">build</code><code class="o">()))</code>
</code>      <code class="o">.</code><code class="na">getTotalCharge</code><code class="o">());</code>
  <code class="o">}</code>
<code class="o">}</code>
</pre></div>

</div>

</div>


</body>
</html>
